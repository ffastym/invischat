{"version":3,"sources":["images/deleted.jpg","serviceWorker.js","components/dumb/Aside.jsx","components/dumb/AddEmoji.jsx","components/dumb/UploadPhoto.jsx","reducers/appReducer.js","reducers/galleryReducer.js","reducers/messageReducer.js","reducers/popUpReducer.js","reducers/forumReducer.js","reducers/roomReducer.js","reducers/userReducer.js","store.js","actions/appActions.js","actions/userActions.js","actions/roomActions.js","actions/messageActions.js","socket.js","components/dumb/SendMessage.jsx","components/smart/WriteMessage.jsx","actions/popUpActions.js","components/smart/ChatToolbar.jsx","actions/galleryActions.js","components/smart/ChatMessage.jsx","components/smart/UsersList.jsx","components/smart/SavedList.jsx","components/smart/MessagesWrapper.jsx","components/smart/ChatWindow.jsx","components/dumb/Chat.jsx","components/dumb/RatingSnippet.jsx","components/dumb/Footer.jsx","components/dumb/Header.jsx","components/dumb/Home.jsx","components/dumb/Nav.jsx","components/smart/ContactUs.jsx","components/smart/CreateNick.jsx","components/dumb/LikeInterlocutor.jsx","components/smart/Rating.jsx","components/smart/Login.jsx","components/smart/PopUp.jsx","components/dumb/Gallery.jsx","components/dumb/PrivacyPolicy.jsx","components/dumb/CookiesBanner.jsx","components/smart/CreatePost.jsx","components/dumb/Loader.jsx","components/smart/Posts.jsx","components/smart/NewPosts.jsx","actions/forumActions.js","components/smart/Post.jsx","components/smart/Forum.jsx","components/App.jsx","index.js"],"names":["module","exports","isLocalhost","Boolean","window","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","console","log","onUpdate","onSuccess","catch","error","Aside","react_default","a","createElement","AddEmoji","props","className","onClick","showEmojiPicker","UploadPhoto","inputId","type","htmlFor","title","name","id","accept","onChange","imageSelect","initialState","chatPosition","isConnected","isMobile","isNavActive","isNeedRedirect","isInChat","isAcceptCookies","isNotificationsEnabled","onlineCount","theme","appReducer","arguments","length","undefined","action","Object","objectSpread","payload","innerWidth","isActive","activeType","private","images","index","activeIndex","public","galleryReducer","push","url","updatedGallery","text","imageUrl","imagePublicId","IsUploadedImage","quotedMessage","quotedImage","publicColor","newMessagesQty","fakeMessageData","messageReducer","isUploadedImage","isUploaded","message","image","isPopUpShow","popUpReducer","postsData","forumReducer","roomName","isFull","interlocutorId","gender","nick","userId","prevUserId","isNewInPublic","isLoggedIn","mutedList","likedList","allUsersList","likesQty","commentsQty","login","likedPosts","isBlocked","isModerator","senderId","status","senderNick","interlocutorNick","userReducer","isNoAdmin","likesCount","middleware","thunk","createStore","combineReducers","app","user","room","popup","gallery","forum","applyMiddleware","apply","toConsumableArray","appActions","toggleMenu","acceptCookies","localStorage","setItem","setConnectionStatus","setRedirectionStatus","setIsInChat","setTheme","getItem","changeNotifications","setDeviceType","setChatPosition","changeOnlineCount","count","userActions","setGender","setUserId","changeMutedList","list","setAsLoggedIn","data","_id","userData","setTimeout","socket","updateUsersList","password","logOut","removeItem","likeDislikePost","setLikesCount","qty","changeLikedList","JSON","stringify","setAsModerator","setAsNoAdmin","setBanStatus","setAllUsersList","setInterlocutorNick","setPrivateRequestData","setIsNew","setNick","roomActions","joinRoom","setInterlocutorId","setIsFull","leaveRoom","messageActions","setMessageText","sendFakeMessage","setNewMessagesQty","setQuote","quoteData","setImageUrl","setImagePublicId","resetMessageData","setIsUploadedImage","setPublicColor","color","i","Math","floor","random","io","chat","connect","subscribeJoinRoom","off","on","store","dispatch","subscribeUsersCount","leaveChat","emit","getState","destroy","reJoinRoom","joinChat","searchNew","isVIP","sendMessage","messageId","round","messageData","key","socketId","document","getElementById","innerHTML","WriteMessage","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","checkKeyType","e","publicMessageData","privateMessageData","preventDefault","typingHandler","target","isTyping","setState","toString","alert","getInputRef","node","inputRef","formatClipboardData","html","clipboardData","getData","imgRegExp","RegExp","imgSrc","setPreviewImgUrl","replace","execCommand","prevProps","refactoredMessage","roomIsFull","isEditable","ref","contentEditable","suppressContentEditableWarning","onInput","onPaste","onKeyPress","Component","popUpActions","showPopUp","hidePopUp","emojiTranslates","search","notfound","skintext","categories","recent","people","nature","foods","activity","places","objects","symbols","flags","custom","ChatToolbar","checkNick","addEventListener","hideEmojiPicker","isShowEmojiPicker","pickerRef","contains","removeEventListener","getPickerRef","addEmoji","emoji","addedEmoji","dangerouslySetInnerHTML","__html","Emoji","set","skin","parse","size","publicMessage","privateMessage","ReactDOMServer","renderToStaticMarkup","removeQuote","_this2","imagePreviewUrl","publicImageUrl","privateImageUrl","publicIsUploadedImg","privateIsUploadedImg","publicQuotedImage","privateQuotedImage","publicQuotedMessage","privateQuotedMessage","toolbarClassName","hasQuote","dist_es","i18n","showPreview","emojiTooltip","onSelect","style","position","top","width","left","display","Fragment","removeImagePreview","src","alt","dumb_UploadPhoto","dumb_AddEmoji","smart_WriteMessage","dumb_SendMessage","quote","galleryActions","addImageToGallery","setGalleryVisibility","setActiveGalleryType","setActiveIndex","removeImageFromGallery","ChatMessage","deleteMessage","removeFromGallery","map","value","imageIndex","deleted","quoteMessage","collapseActions","isShowActions","toggleActions","detectURL","messageText","b","c","likeMessage","isLiked","showGallery","parseInt","dataset","isSameGender","deletedImageUrl","date","Date","hours","getHours","minutes","getMinutes","nickName","label","activeClass","isYourMessage","genderClass","userGender","containerClassName","likeActionClassName","background","data-index","UsersList","blockClient","likeUser","newList","muteUser","prevList","indexOf","filter","existId","concat","createList","clientsData","hasOwnProperty","isMuted","likeButtonClassName","backgroundColor","children","changeNick","classList","toggle","proposePrivateChat","clientsList","receiverNick","receiverId","isToggled","prevState","snapshot","keys","SavedList","removeUser","_loop","isOnline","statusColor","MessagesWrapper","displayMessage","isAlien","botMessage","sendBotMessage","scrollToLastMessage","notify","play","messages","smart_ChatMessage","resizeHandler","likesHandler","messageWrapper","querySelector","appendChild","createRange","createContextualFragment","prevLikesCount","textContent","remove","force","chatTextRef","ceil","scrollTop","clientHeight","scrollHeight","scr","setInterval","scrollTo","clearInterval","refreshChat","isPrivate","toggleList","open","chatTextWrapperRef","notify2","getScrollHeight","getRef","getChatTextWrapperRef","saveUser","Audio","getMessageEvent","forEach","_this3","_this4","saveUserClassName","searchNewClassName","onScroll","smart_UsersList","smart_SavedList","PureComponent","CLOUDINARY_UPLOAD_PRESET","CLOUDINARY_UPLOAD_URL","ChatWindow","onImageDrop","files","uploadedFile","handleImageUpload","file","request","post","field","end","err","response","body","secure_url","public_id","deleteImage","publicImageId","privateImageId","chatClassName","react_dropzone_dist_es","multiple","activeClassName","disableClick","onDrop","bind","smart_MessagesWrapper","ssr","smart_ChatToolbar","Chat","onBeforeUnload","handleTouchStart","prevPosition","touchStartPosition","nativeEvent","touches","clientX","swipeDistance","handleSwipe","minSwipeLength","handleTouchStop","clearNewMessagesQty","touchPosition","clearAllUsersList","onTouchMove","onTouchStart","onTouchEnd","transition","smart_ChatWindow","Redirect","to","RatingSnippet","_useState","useState","rating","_useState2","slicedToArray","setRating","useEffect","starsClassAdditional","average","parseFloat","toFixed","ratingStarsClassName","itemScope","itemType","itemProp","content","ratesQty","Footer","_ref","dumb_RatingSnippet","data-href","data-layout","data-action","data-size","data-show-faces","data-share","changeChatPosition","logIn","burgerClassName","chatSwitchClassName","unreadMessagesCount","themeSwitchClassName","loginClassName","notificationsSwitchClassName","NavLink","exact","Helmet","aria-label","ContactUs","isEmptyText","mailSendSuccess","mailSendError","emailWasSend","scrollBottom","pageRef","getTextareaRef","textArea","sendMail","getPageRef","placeholder","autoFocus","CreateNick","changeSavingStatus","saveNick","acceptAction","modKey","isValid","checkKey","isInUse","showLoginForm","additionalClassName","setIsValid","Rating","disabled","tempRating","rate","starOver","starOut","sendRate","stars","onMouseOver","onMouseOut","Login","nickError","isInvalidNick","checkPassword","passError","checkPasswordIsSame","repeatedPass","repeatPassError","isNew","changeIsSave","isSave","nickExist","invalid","isValidForm","PopUp","acceptPrivateRequest","reject","rejectPrivateRequest","isModal","customContent","smart_CreateNick","smart_Rating","dumb_LikeInterlocutor","smart_Login","interlocutor","hideGallery","activeImageIndex","PrivacyPolicy","href","withRouter","CreatePost","removePreview","imgPubId","uploadImage","textarea","input","addPost","dd","getDate","mm","getMonth","fullDate","getFullYear","postData","author","authorId","isAllowComments","viewsQty","comments","checkTitleLength","soLong","validationError","manageComments","isAdded","cloudinary_react_lib","cloudName","publicId","height","fetchFormat","crop","Loader","LazyPostPreview","lazy","__webpack_require__","Posts","scrollList","listWrapper","hasMore","loadPosts","posts","postIds","reverse","lastId","counter","postId","lastPostId","react","fallback","dumb_Loader","lastPostIndex","listRef","NewPosts","managePost","publish","newPosts","newPost","data-post-id","forumActions","setAllPostsData","Post","setTextareaFocus","focus","likePost","isLike","params","post_id","prevLikedList","newLikedPostsList","addComment","comment","setCommentText","postsIds","commentsData","likeBtnClassName","prevPostId","nextPostId","hasPrevPost","hasNextPost","Forum","newPostsData","Switch","Route","path","render","smart_Posts","component","App","showRating","detectDeviceType","mobileBreakpoint","credentials","switchToPrivate","wrapperClassName","dumb_Header","dumb_Aside","dumb_Nav","dumb_Chat","smart_Forum","dumb_Home","dumb_Footer","smart_PopUp","isGalleryActive","dumb_Gallery","dumb_CookiesBanner","isBlockForce","ReactDOM","hydrate","BrowserRouter","react_redux_es","components_App","URL","process","origin","fetch","contentType","headers","get","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.ae4d3d4a.chunk.js","sourcesContent":["module.exports = \"data:image/jpeg;base64,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\"","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read http://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/sw.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nimport React from 'react'\r\n\r\n/**\r\n * Aside component\r\n *\r\n * @returns {*}\r\n * @constructor\r\n */\r\nconst Aside = () => {\r\n    return (\r\n        <aside></aside>\r\n    )\r\n};\r\n\r\nexport default Aside\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nimport React from 'react'\r\n\r\n/**\r\n * AddEmoji component\r\n *\r\n * @param props\r\n\r\n * @returns {*}\r\n * @constructor\r\n */\r\nconst AddEmoji = (props) => {\r\n    return (\r\n        <span className=\"action add-emoji\" onClick={props.showEmojiPicker}/>\r\n    )\r\n};\r\n\r\nexport default AddEmoji\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nimport React from 'react'\r\n\r\n/**\r\n * UploadPhoto component\r\n *\r\n * @param props\r\n\r\n * @returns {*}\r\n * @constructor\r\n */\r\nconst UploadPhoto = (props) => {\r\n    let inputId = 'upload_' + props.type + '_photo';\r\n\r\n    return (\r\n        <label className='action upload-photo' htmlFor={inputId} title='завантажити зображення'>\r\n            <input type='file'\r\n                   className='upload-photo'\r\n                   name={inputId}\r\n                   id={inputId}\r\n                   accept='image/*'\r\n                   onChange={props.imageSelect}\r\n            />\r\n        </label>\r\n    )\r\n};\r\n\r\nexport default UploadPhoto\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nconst initialState = {\r\n    chatPosition           : 0, // 0 means active chat is private\r\n    isConnected            : true,\r\n    isMobile               : true,\r\n    isNavActive            : false,\r\n    isNeedRedirect         : true,\r\n    isInChat               : false,\r\n    isAcceptCookies        : false,\r\n    isNotificationsEnabled : true,\r\n    onlineCount            : null,\r\n    theme                  : 'light'\r\n};\r\n\r\nconst appReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case 'TOGGLE_MENU':\r\n            state = {\r\n                ...state,\r\n                isNavActive: !state.isNavActive\r\n            };\r\n            break;\r\n        case 'ACCEPT_COOKIES':\r\n            state = {\r\n                ...state,\r\n                isAcceptCookies: true\r\n            };\r\n            break;\r\n        case 'SET_CHAT_POSITION':\r\n            state = {\r\n                ...state,\r\n                chatPosition: action.payload === null\r\n                    ? state.chatPosition === 0\r\n                        ? -window.innerWidth\r\n                        : 0\r\n                    : action.payload\r\n            };\r\n            break;\r\n        case 'SET_IS_IN_CHAT':\r\n            state = {\r\n                ...state,\r\n                isInChat: action.payload\r\n            };\r\n            break;\r\n        case 'SET_CONNECTION_STATUS':\r\n            state = {\r\n                ...state,\r\n                isConnected: action.payload\r\n            };\r\n            break;\r\n        case 'SET_REDIRECTION_STATUS':\r\n            state = {\r\n                ...state,\r\n                isNeedRedirect: action.payload\r\n            };\r\n            break;\r\n        case 'SET_THEME':\r\n            state = {\r\n                ...state,\r\n                theme: action.payload\r\n            };\r\n            break;\r\n        case 'SET_DEVICE_TYPE':\r\n            state = {\r\n                ...state,\r\n                isMobile: action.payload\r\n            };\r\n            break;\r\n        case 'CHANGE_NOTIFICATIONS':\r\n            state = {\r\n                ...state,\r\n                isNotificationsEnabled: !state.isNotificationsEnabled\r\n            };\r\n            break;\r\n        case 'CHANGE_ONLINE_COUNT':\r\n            state = {\r\n                ...state,\r\n                onlineCount: action.payload\r\n            };\r\n            break;\r\n        default:\r\n            state = {\r\n                ...state\r\n            };\r\n    }\r\n\r\n    return state;\r\n};\r\n\r\nexport default appReducer\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nconst initialState = {\r\n    isActive: false,\r\n    activeType: null,\r\n    private : {\r\n        images : [],\r\n        index  : 0,\r\n        activeIndex: null\r\n    },\r\n    public : {\r\n        images : [],\r\n        index  : 0,\r\n        activeIndex: null\r\n    }\r\n};\r\n\r\nconst galleryReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case 'SET_GALLERY_VISIBILITY' :\r\n            state = {\r\n                ...state,\r\n                isActive: action.payload\r\n            };\r\n            break;\r\n        case 'SET_ACTIVE_GALLERY_TYPE' :\r\n            state = {\r\n                ...state,\r\n                activeType: action.payload\r\n            };\r\n            break;\r\n        case 'ADD_TO_GALLERY':\r\n            const type = action.payload.type;\r\n\r\n            state = {\r\n                ...state,\r\n            };\r\n\r\n            state[type].images.push(action.payload.url);\r\n            state[type].index++;\r\n            break;\r\n        case 'REMOVE_FROM_GALLERY':\r\n            state = {\r\n                ...state\r\n            };\r\n\r\n            state[action.payload.type].images = action.payload.updatedGallery;\r\n            break;\r\n        case 'SET_ACTIVE_INDEX':\r\n            state = {\r\n                ...state\r\n            };\r\n\r\n            state[action.payload.type].activeIndex = action.payload.activeIndex;\r\n            break;\r\n        default:\r\n            state = {\r\n                ...state\r\n            };\r\n    }\r\n\r\n    return state;\r\n};\r\n\r\nexport default galleryReducer\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nconst initialState = {\r\n    private: {\r\n        text            : '',\r\n        imageUrl        : null,\r\n        imagePublicId   : null,\r\n        IsUploadedImage : false,\r\n        quotedMessage   : null,\r\n        quotedImage     : null\r\n    },\r\n    public: {\r\n        text            : '',\r\n        imageUrl        : null,\r\n        imagePublicId   : null,\r\n        IsUploadedImage : false,\r\n        quotedMessage   : null,\r\n        quotedImage     : null\r\n    },\r\n    publicColor : null,\r\n    newMessagesQty: 0,\r\n    fakeMessageData: {}\r\n};\r\n\r\nconst messageReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case 'SET_MESSAGE_TEXT':\r\n            state = {\r\n                ...state\r\n            };\r\n\r\n            state[action.payload.type] = {\r\n                ...state[action.payload.type],\r\n                text: action.payload.text\r\n            };\r\n            break;\r\n        case 'SET_IS_UPLOADED_IMAGE':\r\n            state = {\r\n                ...state\r\n            };\r\n\r\n            state[action.payload.type] = {\r\n                ...state[action.payload.type],\r\n                isUploadedImage: action.payload.isUploaded\r\n            };\r\n            break;\r\n        case 'SET_PUBLIC_COLOR':\r\n            state = {\r\n                ...state,\r\n                publicColor: action.payload\r\n            };\r\n            break;\r\n        case 'SET_NEW_MESSAGES_QTY':\r\n            state = {\r\n                ...state,\r\n                newMessagesQty: action.payload\r\n            };\r\n            break;\r\n        case 'SET_FAKE_MESSAGE_DATA':\r\n            state = {\r\n                ...state,\r\n                fakeMessageData: action.payload\r\n            };\r\n            break;\r\n        case 'RESET_MESSAGE_DATA':\r\n            const type = action.payload;\r\n\r\n            state = {\r\n                ...state\r\n            };\r\n\r\n            state[type] = initialState[type];\r\n            break;\r\n        case 'SET_IMAGE_URL':\r\n            state = {\r\n                ...state\r\n            };\r\n\r\n            state[action.payload.type] = {\r\n                ...state[action.payload.type],\r\n                imageUrl: action.payload.imageUrl\r\n            };\r\n            break;\r\n        case 'SET_QUOTE':\r\n            state = {\r\n                ...state\r\n            };\r\n\r\n            state[action.payload.type] = {\r\n                ...state[action.payload.type],\r\n                quotedMessage: action.payload.message,\r\n                quotedImage: action.payload.image,\r\n            };\r\n            break;\r\n        case 'SET_IMAGE_PUBLIC_ID':\r\n            state = {\r\n                ...state\r\n            };\r\n\r\n            state[action.payload.type] = {\r\n                ...state[action.payload.type],\r\n                imagePublicId: action.payload.id\r\n            };\r\n            break;\r\n        default:\r\n            state = {\r\n                ...state\r\n            };\r\n    }\r\n\r\n    return state;\r\n};\r\n\r\nexport default messageReducer\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nconst initialState = {\r\n    isPopUpShow : false,\r\n    type        : null\r\n};\r\n\r\nconst popUpReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case 'SHOW_POPUP' :\r\n            state = {\r\n                ...state,\r\n                type        : action.payload,\r\n                isPopUpShow : true\r\n            };\r\n            break;\r\n        case 'HIDE_POPUP' :\r\n            state = {\r\n                ...state,\r\n                isPopUpShow : false\r\n            };\r\n            break;\r\n        default:\r\n            state = {\r\n                ...state\r\n            };\r\n    }\r\n\r\n    return state;\r\n};\r\n\r\nexport default popUpReducer\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nconst initialState = {\r\n    postsData: null\r\n};\r\n\r\nconst forumReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case 'SET_POSTS':\r\n            state = {\r\n                ...state,\r\n                postsData: action.payload\r\n            };\r\n            break;\r\n        default:\r\n            state = {\r\n                ...state\r\n            };\r\n    }\r\n\r\n    return state;\r\n};\r\n\r\nexport default forumReducer\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nconst initialState = {\r\n    roomName       : null,\r\n    isFull         : false,\r\n    interlocutorId : null\r\n};\r\n\r\nconst appReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case 'JOIN_ROOM':\r\n            state = {\r\n                ...state,\r\n                roomName: action.payload\r\n            };\r\n            break;\r\n        case 'SET_INTERLOCUTOR_ID':\r\n            state = {\r\n                ...state,\r\n                interlocutorId: action.payload\r\n            };\r\n            break;\r\n        case 'LEAVE_ROOM':\r\n            state = {\r\n                ...state,\r\n                roomName : null,\r\n                isFull   : false\r\n            };\r\n            break;\r\n        case 'SET_IS_FULL':\r\n            state = {\r\n                ...state,\r\n                isFull: action.payload\r\n            };\r\n            break;\r\n        default:\r\n            state = {\r\n                ...state\r\n            };\r\n    }\r\n\r\n    return state;\r\n};\r\n\r\nexport default appReducer\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nconst initialState = {\r\n    gender           : null,\r\n    nick             : null,\r\n    userId           : null,\r\n    prevUserId       : null,\r\n    isNewInPublic    : true,\r\n    isLoggedIn       : false,\r\n    mutedList        : [],\r\n    likedList        : {},\r\n    allUsersList     : {},\r\n    likesQty         : null,\r\n    commentsQty      : null,\r\n    login            : null,\r\n    likedPosts       : {},\r\n    isBlocked        : false,\r\n    isModerator      : false,\r\n    senderId         : null,\r\n    status           : null,\r\n    senderNick       : null,\r\n    interlocutorNick : null\r\n};\r\n\r\nconst userReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case 'SET_GENDER':\r\n            state = {\r\n                ...state,\r\n                gender: action.payload\r\n            };\r\n            break;\r\n        case 'SET_ALL_USERS_LIST':\r\n            state = {\r\n                ...state,\r\n                allUsersList: action.payload\r\n            };\r\n            break;\r\n        case 'LIKE_DISLIKE_POST':\r\n            state = {\r\n                ...state,\r\n                likedPosts: action.payload\r\n            };\r\n            break;\r\n        case 'SET_AS_LOGGED_IN':\r\n            state = {\r\n                ...state,\r\n                isLoggedIn: true,\r\n                prevUserId: state.userId,\r\n                ...action.payload\r\n            };\r\n            break;\r\n        case 'LOGOUT':\r\n            state = {\r\n                ...state,\r\n                isLoggedIn: false,\r\n                ...action.payload\r\n            };\r\n            break;\r\n        case 'SET_BAN_STATUS':\r\n            state = {\r\n                ...state,\r\n                isBlocked: action.payload\r\n            };\r\n            break;\r\n        case 'SET_AS_NOADMIN':\r\n            state = {\r\n                ...state,\r\n                isNoAdmin: true\r\n            };\r\n            break;\r\n        case 'SET_USER_ID':\r\n            state = {\r\n                ...state,\r\n                userId: action.payload\r\n            };\r\n            break;\r\n        case 'SET_NICK':\r\n            state = {\r\n                ...state,\r\n                nick: action.payload\r\n            };\r\n            break;\r\n        case 'SET_LIKES_COUNT':\r\n            state = {\r\n                ...state,\r\n                likesCount: action.payload\r\n            };\r\n            break;\r\n        case 'CHANGE_MUTED_LIST':\r\n            state = {\r\n                ...state,\r\n                mutedList: action.payload\r\n            };\r\n            break;\r\n        case 'CHANGE_LIKED_LIST':\r\n            state = {\r\n                ...state,\r\n                likedList: action.payload\r\n            };\r\n            break;\r\n        case 'SET_AS_MODERATOR':\r\n            state = {\r\n                ...state,\r\n                isModerator: true\r\n            };\r\n            break;\r\n        case 'SET_IS_NEW':\r\n            state = {\r\n                ...state,\r\n                isNewInPublic: !state.isNewInPublic\r\n            };\r\n            break;\r\n        case 'SET_PRIVATE_REQUEST_DATA':\r\n            state = {\r\n                ...state,\r\n                ...action.payload\r\n            };\r\n            break;\r\n        case 'SET_INTERLOCUTOR_NICK':\r\n            state = {\r\n                ...state,\r\n                interlocutorNick: action.payload\r\n            };\r\n            break;\r\n        default:\r\n            state = {\r\n                ...state\r\n            };\r\n    }\r\n\r\n    return state;\r\n};\r\n\r\nexport default userReducer\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nimport app from './reducers/appReducer'\r\nimport gallery from './reducers/galleryReducer'\r\nimport logger from 'redux-logger'\r\nimport message from './reducers/messageReducer'\r\nimport popup from './reducers/popUpReducer'\r\nimport forum from './reducers/forumReducer'\r\nimport room from './reducers/roomReducer'\r\nimport thunk from 'redux-thunk'\r\nimport user from './reducers/userReducer'\r\nimport {createStore, combineReducers, applyMiddleware} from 'redux'\r\n\r\nlet middleware = [thunk];\r\n\r\nif (process.env.NODE_ENV === 'development') {\r\n    middleware = [...middleware, logger]\r\n}\r\n\r\nexport default createStore(\r\n    combineReducers({\r\n        app, user, room, message, popup, gallery, forum\r\n    }),\r\n    {},\r\n    applyMiddleware(...middleware)\r\n);\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nconst appActions = {\r\n    /**\r\n     * Toggle menu\r\n     *\r\n     * @returns {{type: string}}\r\n     */\r\n    toggleMenu: () => {\r\n        return {\r\n            type: 'TOGGLE_MENU'\r\n        }\r\n    },\r\n\r\n    acceptCookies: () => {\r\n        localStorage.setItem('acceptCookies', 'true');\r\n\r\n        return {\r\n            type: 'ACCEPT_COOKIES'\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Set connection status\r\n     *\r\n     * @param isConnected\r\n     * @returns {{payload: *, type: string}}\r\n     */\r\n    setConnectionStatus: (isConnected) => {\r\n        return {\r\n            type    : 'SET_CONNECTION_STATUS',\r\n            payload : isConnected\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Set redirection to chat status\r\n     *\r\n     * @param isNeedRedirect\r\n     * @returns {{payload: *, type: string}}\r\n     */\r\n    setRedirectionStatus: (isNeedRedirect) => {\r\n        return {\r\n            type    : 'SET_REDIRECTION_STATUS',\r\n            payload : isNeedRedirect\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Set is in chat\r\n     *\r\n     * @param isInChat\r\n     *\r\n     * @returns {{payload: *, type: string}}\r\n     */\r\n    setIsInChat: (isInChat) => {\r\n        return {\r\n            type    : 'SET_IS_IN_CHAT',\r\n            payload : isInChat\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Set chat theme\r\n     *\r\n     * @param theme = null\r\n     *\r\n     * @returns {{type: string}}\r\n     */\r\n    setTheme: (theme = null) => {\r\n        if (!theme) {\r\n            theme = localStorage.getItem('theme') === 'dark' ? 'light' : 'dark'\r\n        }\r\n\r\n        localStorage.setItem('theme', theme);\r\n\r\n        return {\r\n            type    : 'SET_THEME',\r\n            payload : theme\r\n        }\r\n    },\r\n\r\n    /**\r\n     * On/off notifications\r\n     *\r\n     * @returns {{type: string}}\r\n     */\r\n    changeNotifications: () => {\r\n        return {\r\n            type: 'CHANGE_NOTIFICATIONS'\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Set device type\r\n     *\r\n     * @param isMobile\r\n     *\r\n     * @returns {{payload: *, type: string}}\r\n     */\r\n    setDeviceType: (isMobile) => {\r\n        return {\r\n            type    : 'SET_DEVICE_TYPE',\r\n            payload : isMobile\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Set chat position\r\n     *\r\n     * @param position\r\n     *\r\n     * @returns {{payload: string, type: string}}\r\n     */\r\n    setChatPosition: (position = null) => {\r\n        return {\r\n            type    : 'SET_CHAT_POSITION',\r\n            payload : position\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Change online users count\r\n     *\r\n     * @param count\r\n     * @returns {{payload: *, type: string}}\r\n     */\r\n    changeOnlineCount: (count) => {\r\n        return {\r\n            type    : 'CHANGE_ONLINE_COUNT',\r\n            payload : count\r\n        }\r\n    }\r\n};\r\n\r\nexport default appActions;\r\n","import socket from \"../socket\";\r\n\r\n/**\r\n * @author Yuriy Matviyuk\r\n */\r\nconst userActions = {\r\n    /**\r\n     * Set user gender\r\n     *\r\n     * @param gender\r\n     *\r\n     * @returns {{payload: *, type: string}}\r\n     */\r\n    setGender: (gender) => {\r\n        localStorage.setItem('gender', gender);\r\n        \r\n        return {\r\n            type    : 'SET_GENDER',\r\n            payload : gender\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Set unique user id\r\n     *\r\n     * @param id\r\n     *\r\n     * @returns {{payload: *, type: string}}\r\n     */\r\n    setUserId: (id) => {\r\n        return {\r\n            type    : 'SET_USER_ID',\r\n            payload : id\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Mute/unmute list\r\n     *\r\n     * @param list\r\n     *\r\n     * @returns {{payload: *, type: string}}\r\n     */\r\n    changeMutedList: (list) => {\r\n        return {\r\n            type    : 'CHANGE_MUTED_LIST',\r\n            payload : list\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Set user as logged in\r\n     *\r\n     * @param data\r\n     *\r\n     * @returns {{payload: *, type: string}}\r\n     */\r\n    setAsLoggedIn(data) {\r\n        let userId = data._id,\r\n            nick = data.nick,\r\n            login = data.nick,\r\n            userData = {...data, userId, nick, login};\r\n\r\n        setTimeout(socket.updateUsersList, 1000);\r\n\r\n        delete userData.password;\r\n        delete userData._id;\r\n\r\n        localStorage.setItem('nick', nick);\r\n        localStorage.setItem('unique_id', userId);\r\n\r\n        return {\r\n            type: 'SET_AS_LOGGED_IN',\r\n            payload: userData\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Logout\r\n     *\r\n     * @returns {{type: string}}\r\n     */\r\n    logOut: () => {\r\n        let userData = {\r\n                nick: null,\r\n                login: null\r\n            };\r\n\r\n        localStorage.removeItem('credentials');\r\n        localStorage.removeItem('nick');\r\n\r\n        setTimeout(socket.updateUsersList, 1000);\r\n\r\n        return {\r\n            type: \"LOGOUT\",\r\n            payload: userData\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Change liked posts list\r\n     *\r\n     * @param list\r\n     *\r\n     * @returns {{payload: *, type: string}}\r\n     */\r\n    likeDislikePost: (list) => {\r\n        return {\r\n            type    : \"LIKE_DISLIKE_POST\",\r\n            payload : list\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Set likes count\r\n     *\r\n     * @param qty\r\n     *\r\n     * @returns {{payload: *, type: string}}\r\n     */\r\n    setLikesCount: (qty) => {\r\n        return {\r\n            type    : 'SET_LIKES_COUNT',\r\n            payload : qty\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Like/dislike user\r\n     *\r\n     * @param list\r\n     *\r\n     * @returns {{payload: *, type: string}}\r\n     */\r\n    changeLikedList: (list) => {\r\n        localStorage.setItem('liked_list', JSON.stringify(list));\r\n\r\n        return {\r\n            type    : 'CHANGE_LIKED_LIST',\r\n            payload : list\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Set User As moderator\r\n     *\r\n     * @returns {{type: string}}\r\n     */\r\n    setAsModerator: () => {\r\n        return {\r\n            type: 'SET_AS_MODERATOR'\r\n        }\r\n    },\r\n\r\n    setAsNoAdmin: () => {\r\n        return {\r\n            type: 'SET_AS_NOADMIN'\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Set ban status\r\n     *\r\n     * @param isBlockForce\r\n     * @returns {{payload: boolean, type: string}}\r\n     */\r\n    setBanStatus: (isBlockForce = false) => {\r\n        let isBlocked;\r\n\r\n        if (isBlockForce) {\r\n            isBlocked = true\r\n        } else if (localStorage.getItem('block')) {\r\n            isBlocked = false;\r\n            localStorage.removeItem('block');\r\n        } else {\r\n            isBlocked = true;\r\n            localStorage.setItem('block', 'blocked');\r\n        }\r\n\r\n        return {\r\n            type    : 'SET_BAN_STATUS',\r\n            payload : isBlocked\r\n        }\r\n    },\r\n\r\n    /**\r\n     * set all connected users list\r\n     *\r\n     * @param list\r\n     *\r\n     * @returns {{payload: *, type: string}}\r\n     */\r\n    setAllUsersList: (list) => {\r\n        return {\r\n            type    : 'SET_ALL_USERS_LIST',\r\n            payload : list\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Set interlocutor nick name\r\n     *\r\n     * @param nick\r\n     * @returns {{payload: *, type: string}}\r\n     */\r\n    setInterlocutorNick: (nick) => {\r\n        return {\r\n            type    : 'SET_INTERLOCUTOR_NICK',\r\n            payload : nick\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Set private request senders data\r\n     *\r\n     * @param data: object\r\n     *\r\n     * @returns {{payload: object, type: string}}\r\n     */\r\n    setPrivateRequestData: (data) => {\r\n        return {\r\n            type: 'SET_PRIVATE_REQUEST_DATA',\r\n            payload: data\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Set is new in public\r\n     *\r\n     * @returns {{type: string}}\r\n     */\r\n    setIsNew: () => {\r\n        return {\r\n            type: 'SET_IS_NEW'\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Set user nickName\r\n     *\r\n     * @param nick\r\n     *\r\n     * @returns {{payload: *, type: string}}\r\n     */\r\n    setNick: (nick) => {\r\n        return {\r\n            type: 'SET_NICK',\r\n            payload: nick\r\n        }\r\n    }\r\n};\r\n\r\nexport default userActions;\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nconst roomActions = {\r\n    /**\r\n     * Join private chat roomName\r\n     *\r\n     * @param room\r\n     *\r\n     * @returns {{type: string}}\r\n     */\r\n    joinRoom: (room) => {\r\n        return {\r\n            type: 'JOIN_ROOM',\r\n            payload: room\r\n        }\r\n    },\r\n\r\n    setInterlocutorId: (id) => {\r\n        return {\r\n            type: 'SET_INTERLOCUTOR_ID',\r\n            payload: id\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Set is full room\r\n     *\r\n     * @param isFull\r\n     *\r\n     * @returns {{type: string}}\r\n     */\r\n    setIsFull: (isFull) => {\r\n        return {\r\n            type    : 'SET_IS_FULL',\r\n            payload : isFull\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Leave private chat roomName\r\n     *\r\n     * @returns {{type: string}}\r\n     */\r\n    leaveRoom: () => {\r\n        return {\r\n            type: 'LEAVE_ROOM'\r\n        }\r\n    }\r\n};\r\n\r\nexport default roomActions;\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nconst messageActions = {\r\n    /**\r\n     * Set message text\r\n     *\r\n     * @param text\r\n     *\r\n     * @returns {{payload: *, type: string}}\r\n     */\r\n    setMessageText: (text) => {\r\n        return {\r\n            type    : 'SET_MESSAGE_TEXT',\r\n            payload : text\r\n        }\r\n    },\r\n\r\n    sendFakeMessage: (data) => {\r\n        return {\r\n            type    : 'SET_FAKE_MESSAGE_DATA',\r\n            payload : data\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Set quantity on new messages in not active chat\r\n     *\r\n     * @param qty\r\n     *\r\n     * @returns {{payload: *, type: string}}\r\n     */\r\n    setNewMessagesQty: (qty) => {\r\n        return {\r\n            type    : 'SET_NEW_MESSAGES_QTY',\r\n            payload : qty\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Set Quote\r\n     *\r\n     * @param quoteData\r\n     *\r\n     * @returns {{payload: *, type: string}}\r\n     */\r\n    setQuote: (quoteData) => {\r\n        return {\r\n            type: 'SET_QUOTE',\r\n            payload: quoteData\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Set uploaded image url\r\n     *\r\n     * @param url\r\n     *\r\n     * @returns {{payload: *, type: string}}\r\n     */\r\n    setImageUrl: (url) => {\r\n        return {\r\n            type: 'SET_IMAGE_URL',\r\n            payload: url\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Set uploaded image public id\r\n     *\r\n     * @param id\r\n     *\r\n     * @returns {{payload: *, type: string}}\r\n     */\r\n    setImagePublicId: (id) => {\r\n        return {\r\n            type: 'SET_IMAGE_PUBLIC_ID',\r\n            payload: id\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Reset message data\r\n     *\r\n     * @param type\r\n     *\r\n     * @returns {{payload: *, type: string}}\r\n     */\r\n    resetMessageData: (type) => {\r\n        return {\r\n            type    : 'RESET_MESSAGE_DATA',\r\n            payload : type\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Set is uploaded image\r\n     *\r\n     * @param isUploaded\r\n     *\r\n     * @returns {{payload: *, type: string}}\r\n     */\r\n    setIsUploadedImage: (isUploaded) => {\r\n        return {\r\n            type    : 'SET_IS_UPLOADED_IMAGE',\r\n            payload : isUploaded\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Set public messages color\r\n     *\r\n     * @returns {{payload: string, type: string}}\r\n     */\r\n    setPublicColor: () => {\r\n        let letters = '0123456789',\r\n            color = '#';\r\n\r\n        for (let i = 0; i < 6; i++) {\r\n            color += letters[Math.floor(Math.random() * 10)];\r\n        }\r\n\r\n        return {\r\n            type    : 'SET_PUBLIC_COLOR',\r\n            payload : color\r\n        }\r\n    }\r\n};\r\n\r\nexport default messageActions;\r\n","import io from 'socket.io-client'\r\nimport store from './store'\r\nimport appActions from \"./actions/appActions\"\r\nimport userActions from \"./actions/userActions\"\r\nimport roomActions from \"./actions/roomActions\";\r\nimport messageActions from \"./actions/messageActions\";\r\n\r\nconst socket = {\r\n    /**\r\n     * Socket.io\r\n     */\r\n    io: io,\r\n\r\n    /**\r\n     * Chat namespace\r\n     */\r\n    chat: null,\r\n\r\n    /**\r\n     * Connect to socket\r\n     */\r\n    connect: () => {\r\n        socket.chat = socket.io(process.env.NODE_ENV === 'development' ? 'localhost:3001' : '');\r\n\r\n        return socket\r\n    },\r\n\r\n    /**\r\n     * Subscribe to joining private room\r\n     *\r\n     * @returns socket object\r\n     */\r\n    subscribeJoinRoom: () => {\r\n        socket.chat.off('joined room').on('joined room', (room) => {\r\n            store.dispatch(roomActions.joinRoom(room))\r\n        });\r\n\r\n        return socket\r\n    },\r\n\r\n    /**\r\n     * Subscribe changing clients count\r\n     *\r\n     * @returns {{io: lookup, chat: null, subscribeJoinRoom: (function()), sendMessage: socket.sendMessage, subscribeUsersCount: (function()), connectToServer: socket.connectToServer}}\r\n     */\r\n    subscribeUsersCount: () => {\r\n        socket.chat.off('change clients count').on('change clients count', (count) => {\r\n            store.dispatch(appActions.changeOnlineCount(count))\r\n        });\r\n\r\n        return socket\r\n    },\r\n\r\n    /**\r\n     * Leave chat (after destroy chat component)\r\n     */\r\n    leaveChat: () => {\r\n        socket.chat.emit('leave chat');\r\n        socket.leaveRoom();\r\n    },\r\n\r\n    /**\r\n     * Leave private room\r\n     */\r\n    leaveRoom: () => {\r\n        const state = store.getState();\r\n\r\n        if (!state.room.roomName || !state.user.gender) {\r\n            return socket;\r\n        }\r\n\r\n        const data = {\r\n            room    : state.room.roomName,\r\n            gender  : state.user.gender,\r\n            destroy : !state.room.isFull\r\n        };\r\n\r\n        socket.chat.emit('leave room', data);\r\n        store.dispatch(roomActions.leaveRoom());\r\n\r\n        return socket\r\n    },\r\n\r\n    /**\r\n     * Try to rejoin private room\r\n     */\r\n    reJoinRoom: () => {\r\n        const state = store.getState();\r\n\r\n        if (state.room.roomName) {\r\n            socket.chat.emit('rejoin room', {\r\n                room   : state.room.roomName,\r\n                gender : state.user.gender,\r\n                isFull : state.room.isFull\r\n            })\r\n        }\r\n\r\n        return socket;\r\n    },\r\n\r\n    /**\r\n     * Join to chat\r\n     */\r\n    joinChat: () => {\r\n        const gender = store.getState().user.gender;\r\n\r\n        if (!gender) {\r\n            return socket\r\n        }\r\n\r\n        socket.chat.emit('join chat', gender);\r\n\r\n        return socket\r\n    },\r\n\r\n    /**\r\n     * Search new interlocutor in private chat\r\n     *\r\n     * @returns socket\r\n     */\r\n    searchNew: () => {\r\n        if (store.getState().room.roomName) {\r\n            socket.leaveRoom();\r\n        }\r\n\r\n        if (store.getState().user.gender) {\r\n            socket.joinChat();\r\n        }\r\n\r\n        return socket;\r\n    },\r\n\r\n    /**\r\n     * Set user nick name\r\n     *\r\n     * @param nick\r\n     */\r\n    setNick: (nick) => {\r\n        store.dispatch(userActions.setNick(nick));\r\n        socket.updateUsersList();\r\n\r\n        return socket\r\n    },\r\n\r\n    /**\r\n     * Join public add user to public list\r\n     */\r\n    updateUsersList: () => {\r\n        const state = store.getState(),\r\n              userData = {\r\n                  nick      : state.user.nick,\r\n                  userId    : state.user.userId,\r\n                  isVIP     : state.user.isVIP,\r\n                  isBlocked : state.user.isBlocked,\r\n                  color     : state.message.publicColor\r\n              };\r\n\r\n        if (state.user.nick && state.user.isNewInPublic) {\r\n            socket.chat.emit('connect to public chat', userData);\r\n            store.dispatch(userActions.setIsNew());\r\n        } else {\r\n            socket.chat.emit('reconnect to public chat', userData)\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Send message\r\n     *\r\n     * @param message\r\n     */\r\n    sendMessage: (message) => {\r\n        if (message.text || message.imageUrl || message.quotedImage || message.quotedMessage) {\r\n            const messageId = Math.round(100000 + Math.random() * (999999 - 100000)),\r\n                state = store.getState(),\r\n                type = message.type;\r\n\r\n            let messageData = {\r\n                ...message,\r\n                publicColor: type === 'public' && state.message.publicColor,\r\n                messageId: messageId,\r\n                key: messageId,\r\n                gender: state.user.gender,\r\n                nick: state.user.nick,\r\n                status: type === 'public' && state.user.status,\r\n                userId: type === 'public' && state.user.userId,\r\n                isNoAdmin: state.user.isNoAdmin,\r\n                socketId: socket.chat.id,\r\n                room: message.type === 'private' ? state.room.roomName : null\r\n            };\r\n\r\n            if (state.user.isBlocked) {\r\n                messageData.type = message.type;\r\n                store.dispatch(messageActions.sendFakeMessage(messageData))\r\n            } else {\r\n                socket.chat.emit('send ' + type + ' message', messageData);\r\n            }\r\n\r\n            document.getElementById(type + '_message').innerHTML = '';\r\n            store.dispatch(messageActions.resetMessageData(type))\r\n        }\r\n\r\n        return socket\r\n    }\r\n};\r\n\r\nexport default socket;\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nimport React from 'react'\r\nimport socket from \"../../socket\";\r\nimport {connect} from \"react-redux\";\r\n\r\n/**\r\n * SendMessage component\r\n *\r\n * @param props\r\n\r\n * @returns {*}\r\n * @constructor\r\n */\r\nconst SendMessage = (props) => {\r\n    /**\r\n     * Send message\r\n     */\r\n    const sendMessage = () => {\r\n        let type = props.type,\r\n            data = props.messageData[type];\r\n\r\n        socket.sendMessage({...data, type})\r\n    };\r\n\r\n    return (\r\n        <span className=\"action send-message\" onClick={sendMessage}/>\r\n    )\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        messageData : state.message\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps)(SendMessage)\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nimport React, {Component} from 'react'\r\nimport socket from \"../../socket\";\r\nimport messageActions from \"../../actions/messageActions\";\r\nimport {connect} from \"react-redux\";\r\n\r\n/**\r\n * WriteMessage component\r\n */\r\nclass WriteMessage extends Component {\r\n    /**\r\n     * WriteMessage Constructor\r\n     *\r\n     * @param props\r\n     */\r\n    constructor(props) {\r\n        super(props);\r\n        \r\n        this.state = {\r\n            isTyping: false\r\n        };\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        if (this.props.refactoredMessage !== prevProps.refactoredMessage) {\r\n            this.inputRef.innerHTML = this.props.refactoredMessage\r\n        }\r\n    }\r\n\r\n    checkKeyType = (e) => {\r\n        if (e.key !== 'Enter') {\r\n            return\r\n        }\r\n\r\n        const type = this.props.type,\r\n              data = type === 'public' ? this.props.publicMessageData : this.props.privateMessageData;\r\n\r\n        e.preventDefault();\r\n        socket.sendMessage({...data, type});\r\n    };\r\n\r\n    typingHandler = (e) => {\r\n        let text = e.target.innerHTML;\r\n\r\n        if (this.props.type === 'private' && !this.state.isTyping) {\r\n            socket.chat.emit('typing', this.props.room);\r\n            this.setState({\r\n                isTyping: true\r\n            });\r\n\r\n            setTimeout(() => {\r\n                this.setState({\r\n                    isTyping: false\r\n                });\r\n            }, 2500);\r\n        }\r\n\r\n        if (text.toString().length >= 1000) {\r\n            alert('Ваше повідомлення надто довге. Будь ласка, зменшіть кількість символів');\r\n            return false\r\n        }\r\n\r\n        this.props.setMessageText({type: this.props.type, text})\r\n    };\r\n\r\n    /**\r\n     * Get message input ref\r\n     *\r\n     * @param node\r\n     */\r\n    getInputRef = (node) => {\r\n        this.inputRef = node\r\n    };\r\n    /**\r\n     * Format clipboard data before paste\r\n     *\r\n     * @param e\r\n     */\r\n    formatClipboardData = (e) => {\r\n        e.preventDefault();\r\n        let html = e.clipboardData.getData(\"text/html\"),\r\n            imgRegExp = new RegExp(/(<img src=\")(.*?)(?=\\s*\")/),\r\n            imgSrc = html.match(imgRegExp);\r\n        if (imgSrc) {\r\n            //get image url\r\n            this.props.setPreviewImgUrl(imgSrc[0].replace('<img src=\"', ''));\r\n        }\r\n\r\n        let text = e.clipboardData.getData(\"text/plain\");\r\n        document.execCommand(\"insertHTML\", false, text);\r\n    };\r\n\r\n    /**\r\n     * Render WriteMessage component\r\n     */\r\n    render() {\r\n        const type = this.props.type,\r\n            roomIsFull = this.props.isFull,\r\n            isConnected = this.props.isConnected,\r\n            isEditable = (roomIsFull && isConnected) || (type === 'public' && isConnected && typeof this.props.nick === \"string\");\r\n\r\n        return (\r\n            <span className=\"action write-message\">\r\n            <div className=\"message-area\">\r\n                <p  className=\"message-input\"\r\n                    ref={this.getInputRef}\r\n                    contentEditable={isEditable}\r\n                    id={this.props.type + '_message'}\r\n                    suppressContentEditableWarning={true}\r\n                    onInput={this.typingHandler}\r\n                    onPaste={this.formatClipboardData}\r\n                    onKeyPress={this.checkKeyType}/>\r\n            </div>\r\n        </span>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        privateMessageData : state.message.private,\r\n        publicMessageData  : state.message.public,\r\n        isFull             : state.room.isFull,\r\n        nick               : state.user.nick,\r\n        room               : state.room.roomName,\r\n        isConnected        : state.app.isConnected\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        /**\r\n         * Set message text\r\n         *\r\n         * @param text\r\n         */\r\n        setMessageText: (text) => {\r\n            dispatch(messageActions.setMessageText(text))\r\n        }\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(WriteMessage)\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nconst popUpActions = {\r\n    /**\r\n     * Show popup\r\n     *\r\n     * @param type\r\n     *\r\n     * @returns {{payload: *, type: string}}\r\n     */\r\n    showPopUp: (type) => {\r\n        return {\r\n            type    : 'SHOW_POPUP',\r\n            payload : type\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Hide popup\r\n     *\r\n     * @returns {{type: string}}\r\n     */\r\n    hidePopUp: () => {\r\n        return {\r\n            type: 'HIDE_POPUP'\r\n        }\r\n    }\r\n};\r\n\r\nexport default popUpActions;\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nimport AddEmoji from '../dumb/AddEmoji'\r\nimport UploadPhoto from '../dumb/UploadPhoto'\r\nimport React, {Component} from 'react'\r\nimport ReactDOMServer from 'react-dom/server';\r\nimport 'emoji-mart/css/emoji-mart.css'\r\nimport { Picker } from 'emoji-mart'\r\nimport { Emoji } from 'emoji-mart'\r\nimport SendMessage from '../dumb/SendMessage'\r\nimport WriteMessage from './WriteMessage'\r\nimport {connect} from \"react-redux\";\r\nimport popUpActions from \"../../actions/popUpActions\";\r\nimport socket from \"../../socket\";\r\nimport messageActions from \"../../actions/messageActions\";\r\nconst emojiTranslates = {\r\n    search: 'Пошук',\r\n    notfound: 'Смайл не знайдено',\r\n    skintext: 'Виберіть тон шкіри за замовчуванням',\r\n    categories: {\r\n        search: 'Результати пошуку',\r\n        recent: 'Нещодавні',\r\n        people: 'Емоції та люди',\r\n        nature: 'Тварини та природа',\r\n        foods: 'Їжа та напої',\r\n        activity: 'Діяльність',\r\n        places: 'Подорожі та місця',\r\n        objects: 'Предмети',\r\n        symbols: 'Символи',\r\n        flags: 'Прапори',\r\n        custom: 'Користувацькі',\r\n    }\r\n};\r\n\r\n/**\r\n * ChatToolbar component\r\n */\r\nclass ChatToolbar extends Component {\r\n    /**\r\n     * ChatToolbar Constructor\r\n     *\r\n     * @param props\r\n     */\r\n    constructor(props) {\r\n        super(props);\r\n        \r\n        this.state = {\r\n            isTyping          : false,\r\n            isShowEmojiPicker : false,\r\n            refactoredMessage : null\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Component mounted in DOM\r\n     */\r\n    componentDidMount() {\r\n        socket.chat.on('show typing', () => {\r\n            this.setState({\r\n                isTyping: true\r\n            });\r\n\r\n            setTimeout(() => {\r\n                this.setState({\r\n                    isTyping: false\r\n                });\r\n            }, 2500);\r\n        });\r\n    }\r\n\r\n    checkNick = (e) => {\r\n        if (this.props.type === 'private') {\r\n            return\r\n        } else if (!this.props.nick) {\r\n            e.preventDefault();\r\n            this.props.showPopUp('CREATE_NICK')\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Display Emoji picker block after click on emoji button\r\n     */\r\n    showEmojiPicker = () => {\r\n        document.addEventListener('click', this.hideEmojiPicker);\r\n        document.addEventListener('tap', this.hideEmojiPicker);\r\n\r\n        this.setState({\r\n            isShowEmojiPicker: true\r\n        })\r\n    };\r\n\r\n    /**\r\n     * Hide emoji picker\r\n     *\r\n     * @param e\r\n     */\r\n    hideEmojiPicker = (e) => {\r\n        if (this.pickerRef && !this.pickerRef.contains(e.target)) {\r\n            this.setState({\r\n                isShowEmojiPicker: false\r\n            });\r\n\r\n            document.removeEventListener('click', this.hideEmojiPicker);\r\n            document.removeEventListener('tap', this.hideEmojiPicker);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Get Emoji picker wrapper ref\r\n     *\r\n     * @param node\r\n     */\r\n    getPickerRef = (node) => {\r\n        this.pickerRef = node\r\n    };\r\n\r\n    /**\r\n     * Add emoji to the message input\r\n     *\r\n     * @param emoji\r\n     */\r\n    addEmoji = (emoji) => {\r\n        const addedEmoji =\r\n            <span className=\"emoji-wrapper\"\r\n                  contentEditable={false}\r\n                  dangerouslySetInnerHTML={{\r\n                      __html: Emoji({\r\n                        html: true,\r\n                        set: 'apple',\r\n                        skin: JSON.parse(localStorage.getItem('emoji-mart.skin')),\r\n                        emoji: emoji.id,\r\n                        size: 20\r\n                      })\r\n                }}\r\n            />;\r\n        let message = this.props.type === 'public' ? this.props.publicMessage : this.props.privateMessage,\r\n            refactoredMessage = message + ReactDOMServer.renderToStaticMarkup(addedEmoji) + '&nbsp;';\r\n\r\n        this.setState({refactoredMessage});\r\n        this.props.setMessageText(this.props.type, refactoredMessage)\r\n    };\r\n\r\n    /**\r\n     * Remove quote\r\n     */\r\n    removeQuote = () => {\r\n        this.props.setQuote({type: this.props.type})\r\n    };\r\n\r\n    /**\r\n     * ComponentWillUnmount method\r\n     */\r\n    componentWillUnmount() {\r\n        document.removeEventListener('click', this.hideEmojiPicker);\r\n        document.removeEventListener('tap', this.hideEmojiPicker);\r\n        socket.chat.off('show typing')\r\n    }\r\n\r\n    /**\r\n     * Render ChatToolbar component\r\n     */\r\n    render() {\r\n        const type = this.props.type,\r\n              roomIsFull = this.props.isFull,\r\n              isConnected = this.props.isConnected,\r\n              imagePreviewUrl = type === 'public' ? this.props.publicImageUrl : this.props.privateImageUrl,\r\n              isUploadedImage = type === 'public' ? this.props.publicIsUploadedImg : this.props.privateIsUploadedImg,\r\n              quotedImage = type === 'public' ? this.props.publicQuotedImage : this.props.privateQuotedImage,\r\n              quotedMessage = type === 'public' ? this.props.publicQuotedMessage : this.props.privateQuotedMessage,\r\n              isActive = (roomIsFull && isConnected) || (type === 'public'),\r\n              toolbarClassName = isActive ? 'chat-actions-toolbar' : 'chat-actions-toolbar disabled',\r\n              hasQuote = quotedMessage || quotedImage;\r\n\r\n        return (\r\n            <div className={toolbarClassName}\r\n                 onClick={this.checkNick}\r\n                 title={isActive ? '' : 'дії з чатом тимчасово заблоковані'}>\r\n                {this.state.isTyping && type === 'private' &&\r\n                    <span className=\"write-animation\">анонім друкує повідомлення</span>}\r\n                {this.state.isShowEmojiPicker &&\r\n                <div ref={this.getPickerRef}>\r\n                    <Picker set='apple'\r\n                            i18n={emojiTranslates}\r\n                            showPreview={false}\r\n                            color={this.props.theme === 'light' ? '#2F2F2F' : '#E3E3E3'}\r\n                            emojiTooltip={true}\r\n                            onSelect={this.addEmoji}\r\n                            title='Оберіть смайл' emoji='point_up'\r\n                            style={{position: 'absolute', top: '-295px', width: 'calc(100% - 10px)', left: '5px', display: 'block'}}\r\n                    />\r\n                </div>}\r\n                {isUploadedImage &&\r\n                    <div className=\"image-preview\">\r\n                        <div className=\"preview-wrapper\">\r\n                        {imagePreviewUrl ?\r\n                            <React.Fragment>\r\n                                <span className=\"remove-preview\" onClick={this.props.removeImagePreview}/>\r\n                                <img src={imagePreviewUrl} alt=\"preview\"/>\r\n                            </React.Fragment> :\r\n                            <div className=\"image-preview-loader\">\r\n                                <span className=\"loader\"/>\r\n                            </div>}\r\n                        </div>\r\n                     </div>}\r\n                {hasQuote &&\r\n                <span className=\"quoted-message\">\r\n                        <span className=\"quote-wrapper\">\r\n                            <span className=\"remove-quote\" onClick={this.removeQuote}/>\r\n                            {quotedMessage && <span className=\"text\" dangerouslySetInnerHTML={{__html: quotedMessage}}/>}\r\n                            {quotedImage && <img src={quotedImage} alt=\"\"/>}\r\n                        </span>\r\n                    </span>}\r\n                <div className='actions-wrapper'>\r\n                    <UploadPhoto type={type} imageSelect={this.props.imageSelect}/>\r\n                    <AddEmoji type={type} showEmojiPicker={this.showEmojiPicker}/>\r\n                    <WriteMessage type={type} refactoredMessage={this.state.refactoredMessage}/>\r\n                    <SendMessage type={type}/>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        isFull               : state.room.isFull,\r\n        isConnected          : state.app.isConnected,\r\n        publicMessage        : state.message.public.text,\r\n        privateMessage       : state.message.private.text,\r\n        privateQuotedMessage : state.message.private.quotedMessage,\r\n        publicQuotedMessage  : state.message.public.quotedMessage,\r\n        privateQuotedImage   : state.message.private.quotedImage,\r\n        publicQuotedImage    : state.message.public.quotedImage,\r\n        privateImageUrl      : state.message.private.imageUrl,\r\n        publicIsUploadedImg  : state.message.public.isUploadedImage,\r\n        privateIsUploadedImg : state.message.private.isUploadedImage,\r\n        publicImageUrl       : state.message.public.imageUrl,\r\n        theme                : state.app.theme,\r\n        nick                 : state.user.nick\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        /**\r\n         * Show popup\r\n         *\r\n         * @param type\r\n         */\r\n        showPopUp: (type) => {\r\n            dispatch(popUpActions.showPopUp(type))\r\n        },\r\n\r\n        /**\r\n         * Set message text\r\n         *\r\n         * @param type\r\n         * @param text\r\n         */\r\n        setMessageText: (type, text) => {\r\n            dispatch(messageActions.setMessageText({type, text}))\r\n        },\r\n\r\n        /**\r\n         * Set quote\r\n         *\r\n         * @param quote\r\n         */\r\n        setQuote: (quote) => {\r\n            dispatch(messageActions.setQuote(quote))\r\n        }\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ChatToolbar)\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nconst galleryActions = {\r\n    /**\r\n     * Add new image to gallery\r\n     *\r\n     * @param data\r\n     *\r\n     * @returns {{payload: object, type: string}}\r\n     */\r\n    addImageToGallery: (data) => {\r\n        return {\r\n            type    : 'ADD_TO_GALLERY',\r\n            payload : data\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Show/hide image gallery\r\n     *\r\n     * @param isActive\r\n     *\r\n     * @returns {{payload: *, type: string}}\r\n     */\r\n    setGalleryVisibility: (isActive) => {\r\n        return {\r\n            type    : 'SET_GALLERY_VISIBILITY',\r\n            payload : isActive\r\n        }\r\n    },\r\n\r\n    setActiveGalleryType: (type) => {\r\n        return {\r\n            type    : 'SET_ACTIVE_GALLERY_TYPE',\r\n            payload : type\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Set active image index\r\n     *\r\n     * @param data\r\n     *\r\n     * @returns {{payload: *, type: string}}\r\n     */\r\n    setActiveIndex: (data) => {\r\n        return {\r\n            type: 'SET_ACTIVE_INDEX',\r\n            payload: data\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Remove image from gallery\r\n     *\r\n     * @param data\r\n     * @returns {{payload: *, type: string}}\r\n     */\r\n    removeImageFromGallery: (data) => {\r\n        return {\r\n            type: 'REMOVE_FROM_GALLERY',\r\n            payload: data\r\n        }\r\n    }\r\n};\r\n\r\nexport default galleryActions;\r\n","import React, {Component} from 'react'\r\nimport socket from \"../../socket\";\r\nimport {connect} from \"react-redux\";\r\nimport deleted from '../../images/deleted.jpg'\r\nimport messageActions from \"../../actions/messageActions\";\r\nimport galleryActions from \"../../actions/galleryActions\";\r\n\r\n/**\r\n * Message output component\r\n */\r\nclass ChatMessage extends Component {\r\n    /**\r\n     * ChatMessage Constructor\r\n     *\r\n     * @param props\r\n     */\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            name: null,\r\n            isSameGender: false,\r\n            messageText: null,\r\n            deletedImageUrl: '/images/deleted.jpg',\r\n            isShowActions: false,\r\n            date: null,\r\n            isLiked: false\r\n        };\r\n\r\n        if (props.image) {\r\n            this.state.imageIndex = props.gallery[props.type].images.length\r\n        }\r\n    }\r\n\r\n    /**\r\n     * ComponentDidMount method\r\n     */\r\n    componentDidMount() {\r\n        this.detectURL(this.props.message);\r\n\r\n        let date = new Date(),\r\n            hours = date.getHours() < 10 ? \"0\" + date.getHours() : date.getHours(),\r\n            minutes = date.getMinutes() < 10 ? \"0\" + date.getMinutes() : date.getMinutes(),\r\n            name;\r\n\r\n        if (this.props.type === 'public') {\r\n            name = this.props.nickName\r\n        } else if (this.props.label === 'bot') {\r\n            name = 'Бот'\r\n        } else if (this.props.label === 'anon') {\r\n            name = 'Анонім'\r\n        } else {\r\n            name = 'Ви'\r\n        }\r\n\r\n        this.setState({\r\n            date: !this.state.date ? hours + ':' + minutes : this.state.date,\r\n            name: name\r\n        })\r\n    }\r\n\r\n    /**\r\n     * Delete message action\r\n     */\r\n    deleteMessage = () => {\r\n        if (this.props.image) {\r\n            this.removeFromGallery();\r\n        }\r\n\r\n        socket.chat.emit('delete message', this.props.messageId)\r\n    };\r\n\r\n    /**\r\n     * Remove image from gallery\r\n     */\r\n    removeFromGallery = () => {\r\n        let type = this.props.type,\r\n            gallery,\r\n            updatedGallery;\r\n\r\n        gallery = this.props.gallery[type].images;\r\n        updatedGallery = gallery.map((value, index) => {\r\n            return index === this.state.imageIndex ? deleted : value\r\n        });\r\n\r\n        this.props.removeImageFromGallery({type, updatedGallery});\r\n    };\r\n\r\n    /**\r\n     * Quote message action\r\n     */\r\n    quoteMessage = () => {\r\n        this.props.setQuote({message: this.props.message, image: this.props.image, type: this.props.type})\r\n    };\r\n\r\n    /**\r\n     * Hide message actions\r\n     */\r\n    collapseActions = () => {\r\n        this.setState({\r\n            isShowActions: false\r\n        });\r\n\r\n        document.removeEventListener('click', this.collapseActions);\r\n        document.removeEventListener('tap', this.collapseActions);\r\n    };\r\n\r\n    /**\r\n     * Toggle actions\r\n     */\r\n    toggleActions = () => {\r\n        document.addEventListener('click', this.collapseActions);\r\n        document.addEventListener('tap', this.collapseActions);\r\n        this.setState({\r\n            isShowActions: true\r\n        })\r\n    };\r\n\r\n    /**\r\n     * Url usage detection\r\n     *\r\n     * @param text\r\n     * @returns {*}\r\n     */\r\n    detectURL = (text) => {\r\n        let urlRegex = /((([^;\"]https?:\\/\\/)|(^https?:\\/\\/)|(www\\.))[^\\s]+)/g;\r\n        this.setState({\r\n            messageText: text.replace(urlRegex, (url,b,c) => {\r\n                let url2 = (c === 'www.') ?  'http://' +url : url;\r\n                return '<a href=\"' +url2+ '\" target=\"_blank\">' + url + '</a>';\r\n            })\r\n        })\r\n    };\r\n\r\n    /**\r\n     * Likes handler\r\n     */\r\n    likeMessage = () => {\r\n        this.setState({\r\n            isLiked: !this.state.isLiked\r\n        }, () => {\r\n            socket.chat.emit('like message', {\r\n                id: this.props.messageId,\r\n                isLiked: this.state.isLiked\r\n            })\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Show images gallery\r\n     *\r\n     * @param e\r\n     */\r\n    showGallery = (e) => {\r\n        let type = this.props.type;\r\n\r\n        this.props.setActiveIndex({type, activeIndex: parseInt(e.target.dataset.index, 10)});\r\n        this.props.showGallery(type);\r\n    };\r\n\r\n    /**\r\n     * Render component method\r\n     *\r\n     * @returns {*}\r\n     */\r\n    render() {\r\n        let activeClass = this.state.isShowActions ? \" active\" : \"\",\r\n            isYourMessage = this.props.socketId === socket.chat.id,\r\n            genderClass = this.props.gender === this.props.userGender ? ' same' : ' anon',\r\n            label = isYourMessage ? 'you' : '',\r\n            hasQuote = this.props.quotedMessage || this.props.quotedImage,\r\n            containerClassName = \"message-container \" + this.props.gender + \" \" + label + activeClass + genderClass,\r\n            likeActionClassName = this.state.isLiked\r\n                ? \"message-action like-message liked\"\r\n                : \"message-action like-message\";\r\n\r\n        return (\r\n            <p className={containerClassName} id={this.props.messageId}>\r\n                {isYourMessage\r\n                    ? <span className=\"message-action delete-message\"\r\n                            onClick={this.deleteMessage}\r\n                            title=\"видалити повідомлення\"\r\n                    />\r\n                    : <span className={likeActionClassName}\r\n                            onClick={this.likeMessage}\r\n                            title={this.state.isLiked ? 'мені не подобається' : 'мені подобається'}\r\n                    />}\r\n                {\r\n                    <span className=\"message-action quote-message\"\r\n                          onClick={this.quoteMessage}\r\n                          title=\"переслати повідомлення\"\r\n                    />\r\n                }\r\n                <span onClick={this.props.label !== 'bot' ? this.toggleActions : () => {}}\r\n                      className={this.props.type === 'public' && this.props.isNoAdmin ? \"message vip\" : \"message\"}\r\n                      style={this.props.publicColor ? {background: this.props.publicColor} : {}}>\r\n                    {this.state.messageText &&\r\n                        <span className=\"message-text\"\r\n                            dangerouslySetInnerHTML={{__html: this.state.messageText}}\r\n                        />\r\n                    }\r\n                    {this.props.status\r\n                        && <span className=\"status\">{this.props.status}</span>}\r\n                    {this.props.image &&\r\n                        <span className=\"message-image\">\r\n                            <img src={this.props.image}\r\n                                 onClick={this.showGallery}\r\n                                 data-index={this.state.imageIndex}\r\n                                 alt=\"\"/>\r\n                        </span>}\r\n                    {hasQuote &&\r\n                        <span className=\"quote\">\r\n                            {this.props.quotedMessage &&\r\n                                <span className=\"text\"\r\n                                      dangerouslySetInnerHTML={{__html: this.props.quotedMessage}}\r\n                                />}\r\n                            {this.props.quotedImage && <img src={this.props.quotedImage} alt=\"\"/>}\r\n                        </span>}\r\n                </span>\r\n                <span className=\"time\">{this.state.name + \", \" + this.state.date}</span>\r\n            </p>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        nick       : state.user.nick,\r\n        userGender : state.user.gender,\r\n        gallery    : state.gallery\r\n    }\r\n};\r\n\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        /**\r\n         * Set quote\r\n         *\r\n         * @param quote\r\n         */\r\n        setQuote: (quote) => {\r\n            dispatch(messageActions.setQuote(quote))\r\n        },\r\n\r\n        /**\r\n         * Set active image index\r\n         *\r\n         * @param data\r\n         */\r\n        setActiveIndex: (data) => {\r\n            dispatch(galleryActions.setActiveIndex(data))\r\n        },\r\n\r\n        /**\r\n         * Show image gallery\r\n         *\r\n         * @param type\r\n         */\r\n        showGallery: (type) => {\r\n            dispatch(galleryActions.setGalleryVisibility(true));\r\n            dispatch(galleryActions.setActiveGalleryType(type))\r\n        },\r\n\r\n        /**\r\n         * Remove image from gallery\r\n         *\r\n         * @param data\r\n         */\r\n        removeImageFromGallery: (data) => {\r\n            dispatch(galleryActions.removeImageFromGallery(data))\r\n        },\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ChatMessage)\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nimport appActions from \"../../actions/appActions\";\r\nimport popUpActions from \"../../actions/popUpActions\";\r\nimport React, {Component} from 'react'\r\nimport socket from '../../socket'\r\nimport userActions from \"../../actions/userActions\";\r\nimport {connect} from \"react-redux\";\r\n\r\n/**\r\n * UsersList component\r\n */\r\nclass UsersList extends Component {\r\n    /**\r\n     * UsersList Constructor\r\n     *\r\n     * @param props\r\n     */\r\n    constructor(props) {\r\n        super(props);\r\n        \r\n        this.state = {\r\n            clientsList: [],\r\n            isToggled: false\r\n        };\r\n    }\r\n\r\n    /**\r\n     * ComponentDidMount method\r\n     */\r\n    componentDidMount() {\r\n        if(localStorage.getItem('status') === 'moderator') {\r\n            this.props.setAsModerator();\r\n        }\r\n\r\n        const likedList = localStorage.getItem('liked_list');\r\n\r\n        if (likedList) {\r\n            this.props.changeLikedList(JSON.parse(likedList))\r\n        }\r\n\r\n        socket.chat.on('change clients', (list) => {\r\n            this.props.setAllUsersList(list);\r\n            this.createList()\r\n        });\r\n\r\n        this.createList(this.props.allUsersList)\r\n    };\r\n\r\n    /**\r\n     * Unsubscribe from events\r\n     */\r\n    componentWillUnmount() {\r\n        socket.chat.off('change clients')\r\n    }\r\n\r\n    /**\r\n     * Block client in public chat\r\n     *\r\n     * @param id\r\n     */\r\n    blockClient = (id) => {\r\n        socket.chat.emit('block user', id)\r\n    };\r\n\r\n    /**\r\n     * Component did update\r\n     *\r\n     * @param prevProps\r\n     * @param prevState\r\n     * @param snapshot\r\n     */\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        if (prevProps.mutedList.length !== this.props.mutedList.length\r\n            || prevProps.nick !== this.props.nick\r\n            || Object.keys(prevProps.likedList).length !== Object.keys(this.props.likedList).length) {\r\n            this.createList()\r\n        }\r\n\r\n        if (prevProps.nick !== this.props.nick) {\r\n            socket.chat.emit('changed nick', {\r\n                nick: this.props.nick,\r\n                prevUserId: this.props.prevUserId,\r\n                userId: this.props.userId\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Like user Handler\r\n     *\r\n     * @param data\r\n     */\r\n    likeUser = (data) => {\r\n        const userId = data.userId;\r\n\r\n        let newList = {...this.props.likedList};\r\n\r\n        if (newList[userId]) {\r\n            newList = delete newList[userId];\r\n        } else {\r\n            newList[userId] = data;\r\n        }\r\n\r\n        this.props.changeLikedList(newList)\r\n    };\r\n\r\n    /**\r\n     * Mute user in public chat\r\n     *\r\n     * @param id\r\n     */\r\n    muteUser = (id) => {\r\n        const prevList = this.props.mutedList;\r\n\r\n        this.props.changeMutedList(prevList.indexOf(id) !== -1\r\n            ? prevList.filter((existId) => existId !== id)\r\n            : prevList.concat(id))\r\n    };\r\n\r\n    /**\r\n     * Create list of clients\r\n     */\r\n    createList = () => {\r\n        let clientsData = [],\r\n            data = this.props.allUsersList;\r\n\r\n        for (let userId in data) {\r\n            if (data.hasOwnProperty(userId)) {\r\n                let isMuted = this.props.mutedList.indexOf(data[userId].socketId) !== -1,\r\n                    likeButtonClassName = this.props.likedList[userId]\r\n                        ? 'liked like-user client-action' : 'like-user client-action',\r\n                    userData = data[userId];\r\n\r\n                if (!userData.nick) {\r\n                    continue\r\n                }\r\n\r\n                clientsData.push(\r\n                    <li key={userId}>\r\n                        <span className=\"client-color\" style={{backgroundColor: userData.color}}/>\r\n                        <span className=\"name\">{userData.nick}</span>\r\n                        <span className='user-actions'>\r\n                            {userData.socketId !== socket.chat.id &&\r\n                            <span className={likeButtonClassName}\r\n                                  onClick={() => {this.likeUser(userData)}}>\r\n                                {this.props.likesCount !== 0\r\n                                && <span className='likes-count' children={this.props.likesCount}/>}\r\n                            </span>}\r\n                            {userData.socketId === socket.chat.id &&\r\n                            <span className='client-action change-nick' onClick={this.props.changeNick}/>}\r\n                            {this.props.isModerator &&\r\n                            userData.socketId !== socket.chat.id &&\r\n                            <span\r\n                                className={userData.isBlocked ? 'ban-client client-action blocked' : 'ban-client client-action'}\r\n                                title='Заблокувати'\r\n                                onClick={(e) => {\r\n                                    e.target.classList.toggle('blocked');\r\n                                    this.blockClient(userData.socketId)\r\n                                }}\r\n                            />}\r\n                            {userData.socketId !== socket.chat.id &&\r\n                            <React.Fragment>\r\n                            <span className='start-chat client-action'\r\n                                  title='розпочати приватний чат'\r\n                                  onClick={() => {\r\n                                      this.proposePrivateChat(userData.nick, userData.socketId)\r\n                                  }}\r\n                            />\r\n                                <span className={isMuted ? 'mute-user client-action muted' : 'mute-user client-action'}\r\n                                      title='ігнорувати користувача'\r\n                                      onClick={() => {\r\n                                          this.muteUser(userData.socketId)\r\n                                      }}\r\n                                />\r\n                            </React.Fragment>}\r\n                        </span>\r\n                    </li>\r\n                )\r\n            }\r\n        }\r\n\r\n        this.setState({\r\n            clientsList: clientsData\r\n        })\r\n    };\r\n\r\n    /**\r\n     * Start private chat\r\n     *\r\n     * @param receiverNick\r\n     * @param receiverId\r\n     */\r\n    proposePrivateChat = (receiverNick, receiverId) => {\r\n        socket.chat.emit('private request', {\r\n            receiverNick,\r\n            receiverId,\r\n            senderNick: this.props.nick,\r\n            senderId: socket.chat.id\r\n        })\r\n    };\r\n\r\n    /**\r\n     * Render UsersList component\r\n     */\r\n    render() {\r\n        return (\r\n            <div className=\"users-list-wrapper\">\r\n                <ul className='users-list'>\r\n                    {this.state.clientsList}\r\n                </ul>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        nick         : state.user.nick,\r\n        mutedList    : state.user.mutedList,\r\n        allUsersList : state.user.allUsersList,\r\n        isModerator  : state.user.isModerator,\r\n        prevUserId   : state.user.prevUserId,\r\n        userId       : state.user.userId,\r\n        likesCount   : state.user.likesCount,\r\n        likedList    : state.user.likedList\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        /**\r\n         * Show popup\r\n         *\r\n         * @param type\r\n         */\r\n        showPopUp: (type) => {\r\n            dispatch(appActions.showPopUp(type))\r\n        },\r\n\r\n        /**\r\n         * Change nick name\r\n         */\r\n        changeNick: () => {\r\n            localStorage.removeItem('nick');\r\n            dispatch(popUpActions.showPopUp('CREATE_NICK'))\r\n        },\r\n\r\n        /**\r\n         * Mute/unmute user\r\n         *\r\n         * @param list\r\n         */\r\n        changeMutedList: (list) => {\r\n            dispatch(userActions.changeMutedList(list))\r\n        },\r\n\r\n        setAllUsersList: (list) => {\r\n            dispatch(userActions.setAllUsersList(list));\r\n        },\r\n\r\n        setAsModerator: () => {\r\n            dispatch(userActions.setAsModerator())\r\n        },\r\n\r\n        /**\r\n         * Like/dislike user\r\n         *\r\n         * @param list\r\n         */\r\n        changeLikedList: (list) => {\r\n            dispatch(userActions.changeLikedList(list))\r\n        }\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(UsersList)\r\n\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nimport appActions from \"../../actions/appActions\";\r\nimport popUpActions from \"../../actions/popUpActions\";\r\nimport React, {Component} from 'react'\r\nimport socket from '../../socket'\r\nimport userActions from \"../../actions/userActions\";\r\nimport {connect} from \"react-redux\";\r\n\r\n/**\r\n * UsersList component\r\n */\r\nclass SavedList extends Component {\r\n    /**\r\n     * UsersList Constructor\r\n     *\r\n     * @param props\r\n     */\r\n    constructor(props) {\r\n        super(props);\r\n        \r\n        this.state = {\r\n            clientsList: [],\r\n            allUsersList: {},\r\n            isToggled: false\r\n        };\r\n    }\r\n\r\n    /**\r\n     * ComponentDidMount method\r\n     */\r\n    componentDidMount() {\r\n        let userId = localStorage.getItem('unique_id');\r\n\r\n        if (!userId) {\r\n            userId = Math.floor(Math.random() * Math.floor(999999999));\r\n            localStorage.setItem('unique_id', userId)\r\n        }\r\n\r\n        this.props.setUserId(userId);\r\n    };\r\n\r\n    /**\r\n     * Component did update\r\n     *\r\n     * @param prevProps\r\n     */\r\n    componentDidUpdate(prevProps) {\r\n        if (Object.keys(prevProps.likedList).length !== Object.keys(this.props.likedList).length) {\r\n            this.createList(this.props.likedList)\r\n        }\r\n\r\n        if (Object.keys(prevProps.allUsersList).length !== Object.keys(this.props.allUsersList).length) {\r\n            this.createList(this.props.likedList)\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Remove user from liked list\r\n     *\r\n     * @param userId\r\n     */\r\n    removeUser = (userId) => {\r\n        let newList = {...this.props.likedList};\r\n\r\n        delete newList[userId];\r\n\r\n        this.props.changeLikedList(newList)\r\n    };\r\n\r\n    /**\r\n     * Create list of clients\r\n     *\r\n     * @param data\r\n     */\r\n    createList = (data) => {\r\n        let clientsData = [];\r\n\r\n        for (let userId in data) {\r\n            if (data.hasOwnProperty(userId)) {\r\n                let userData = data[userId],\r\n                    isOnline = this.props.allUsersList.hasOwnProperty(userId),\r\n                    statusColor = isOnline ? '#9FD468' : '#808080';\r\n\r\n                if (isOnline) {\r\n                    data[userId].socketId = this.props.allUsersList[userId].socketId\r\n                }\r\n\r\n                clientsData.push(\r\n                    <li key={userId}>\r\n                        <span className=\"client-color\" style={{backgroundColor: statusColor}}\r\n                              title={isOnline ? 'online' : 'offline'}/>\r\n                        <span className=\"name\">{userData.nick}</span>\r\n                        <span className='user-actions'>\r\n                            {isOnline && <span className='start-chat client-action'\r\n                                  title='розпочати приватний чат'\r\n                                  onClick={() => {\r\n                                      this.proposePrivateChat(userData.nick, userData.socketId)\r\n                                  }}\r\n                            />}\r\n                            <span className='remove-user client-action'\r\n                                  title='видалити користувача зі списку'\r\n                                  onClick={() => {\r\n                                      this.removeUser(userId)\r\n                                  }}\r\n                            />\r\n                        </span>\r\n                    </li>\r\n                )\r\n            }\r\n        }\r\n\r\n        this.setState({\r\n            clientsList: clientsData\r\n        })\r\n    };\r\n\r\n    /**\r\n     * Start private chat\r\n     *\r\n     * @param receiverNick\r\n     * @param receiverId\r\n     */\r\n    proposePrivateChat = (receiverNick, receiverId) => {\r\n        socket.chat.emit('private request', {\r\n            receiverNick,\r\n            receiverId,\r\n            senderNick: this.props.nick,\r\n            senderId: socket.chat.id\r\n        })\r\n    };\r\n\r\n    /**\r\n     * Render UsersList component\r\n     */\r\n    render() {\r\n        return (\r\n            <div className=\"users-list-wrapper\">\r\n                <ul className='users-list'>\r\n                    {this.state.clientsList.length\r\n                        ? this.state.clientsList :\r\n                    <li>Тут буде відображатися список усіх збережених користувачів. Щоб зберегти користувача натисніть\r\n                        на іконку серця у вікні приватного чату або поряд з ніком у списку загального чату. Колір поряд\r\n                        з користувачем у цьому списку означає його статус online (зелений) і offline (сірий).\r\n                    </li>}\r\n                </ul>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        likedList    : state.user.likedList,\r\n        allUsersList : state.user.allUsersList\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        /**\r\n         * Show popup\r\n         *\r\n         * @param type\r\n         */\r\n        showPopUp: (type) => {\r\n            dispatch(appActions.showPopUp(type))\r\n        },\r\n\r\n        /**\r\n         * Change nick name\r\n         */\r\n        changeNick: () => {\r\n            localStorage.removeItem('nick');\r\n            dispatch(popUpActions.showPopUp('CREATE_NICK'))\r\n        },\r\n\r\n        /**\r\n         * Set unique user id\r\n         *\r\n         * @param id\r\n         */\r\n        setUserId: (id) => {\r\n            dispatch(userActions.setUserId(id))\r\n        },\r\n\r\n        /**\r\n         * Like/dislike user\r\n         *\r\n         * @param list\r\n         */\r\n        changeLikedList: (list) => {\r\n            dispatch(userActions.changeLikedList(list))\r\n        }\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SavedList)\r\n\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nimport React, {PureComponent} from 'react'\r\nimport socket from \"../../socket\";\r\nimport ChatMessage from '../smart/ChatMessage'\r\nimport {connect} from \"react-redux\";\r\nimport roomActions from \"../../actions/roomActions\";\r\nimport UsersList from \"./UsersList\";\r\nimport SavedList from \"./SavedList\";\r\nimport popUpActions from \"../../actions/popUpActions\";\r\nimport galleryActions from \"../../actions/galleryActions\";\r\nimport messageActions from \"../../actions/messageActions\";\r\nimport userActions from \"../../actions/userActions\";\r\n\r\n/**\r\n * MessagesWrapper component\r\n */\r\nclass MessagesWrapper extends PureComponent {\r\n    /**\r\n     * MessagesWrapper Constructor\r\n     *\r\n     * @param props\r\n     */\r\n    constructor(props) {\r\n        super(props);\r\n        \r\n        this.state = {\r\n            notify          : null,\r\n            notify2         : null,\r\n            newMessagesQty  : 0,\r\n            messages        : []\r\n        };\r\n    }\r\n\r\n    /**\r\n     * ComponentDidMount\r\n     */\r\n    componentDidMount() {\r\n        if (!this.state.notify && !this.state.notify2) {\r\n            this.setState({\r\n                notify  : new Audio('/audio/magic.mp3'),\r\n                notify2 : new Audio('/audio/pop.mp3')\r\n            })\r\n        }\r\n\r\n        const type = this.props.type,\r\n            getMessageEvent = 'get ' + type + ' message';\r\n\r\n        if (type === 'private') {\r\n            let message = 'Очікуємо співрозмовника... </br> Поки йде пошук, можете поспілкуватися' +\r\n                ' в загальному чаті.';\r\n\r\n            if (this.props.isMobile) {\r\n                message += '</br> Щоб перейти в загальний чат зробіть свайп вліво ' +\r\n                '<img width=\"50px\" src=\"/images/swipe.gif\" alt=\"swipe invischat\"/>'\r\n            }\r\n\r\n            this.setState({\r\n                messages: this.state.messages.concat(<ChatMessage\r\n                    key={Math.round(100000 + Math.random() * (999999 - 100000))}\r\n                    gender=\"bot\"\r\n                    message={message}\r\n                    socketId={null}\r\n                    label='bot'\r\n                />)\r\n            });\r\n\r\n            socket.chat.off('get interlocutor id').on('get interlocutor id', (id) => {\r\n                this.props.setInterlocutorId(id)\r\n            })\r\n        } else {\r\n            socket.chat.off('get public chat info').on('get public chat info', () => {\r\n                this.props.nick && this.sendBotMessage('PUBLIC_WELCOME')\r\n            });\r\n\r\n            socket.chat.off('new user connected').on('new user connected', (nick) => {\r\n                if (nick) {\r\n                    this.sendBotMessage('NEW_USER_IN_PUBLIC', nick);\r\n                }\r\n            });\r\n\r\n            socket.chat.off('liked message').on('liked message', (data) => {\r\n                this.likesHandler(data)\r\n            });\r\n\r\n            socket.chat.emit('fetch last messages');\r\n\r\n            socket.chat.off('get last messages').on('get last messages', messages => {\r\n                if (messages.length) {\r\n                    messages.forEach(message => {\r\n                        this.displayMessage(message)\r\n                    })\r\n                }\r\n            })\r\n        }\r\n\r\n        socket.chat.off(getMessageEvent).on(getMessageEvent, (message) => {\r\n            this.displayMessage(message)\r\n        });\r\n\r\n        socket.chat.off('deleted message').on('deleted message', (id) => {\r\n            let message = document.getElementById(id);\r\n\r\n            if (message) {\r\n                message.innerHTML = '<span class=\"message-text removed\">Повідомлення видалено</span>'\r\n            }\r\n        });\r\n\r\n        this.props.isMobile && window.addEventListener(\"resize\", this.resizeHandler)\r\n    };\r\n\r\n    displayMessage = message => {\r\n        const type = this.props.type;\r\n        //Ignore message if client is muted\r\n        if (this.props.mutedList.indexOf(message.socketId) !== -1) {\r\n            return false\r\n        }\r\n\r\n        const isAlien = message.socketId !== socket.chat.id;\r\n\r\n        if (message.botMessage) {\r\n            return this.sendBotMessage(message.botMessage)\r\n        }\r\n\r\n        if (this.props.isMobile) {\r\n            if (type === 'private' && this.props.chatPosition !== 0) {\r\n                this.props.setNewMessagesQty(this.props.newMessagesQty + 1)\r\n            }\r\n\r\n            if (type === 'public' && this.props.chatPosition === 0) {\r\n                this.props.setNewMessagesQty(this.props.newMessagesQty + 1)\r\n            }\r\n        }\r\n\r\n        if (isAlien) {\r\n            this.scrollToLastMessage();\r\n\r\n            if (this.props.isNotificationsEnabled && type === 'private' && this.state.notify) {\r\n                this.state.notify.play();\r\n            }\r\n        } else {\r\n            this.scrollToLastMessage(true);\r\n        }\r\n\r\n        this.setState({\r\n            messages: this.state.messages.concat(\r\n                <ChatMessage key={message.messageId}\r\n                             message={message.text}\r\n                             type={this.props.type}\r\n                             label={socket.chat.id !== message.socketId ? 'anon' : 'you'}\r\n                             messageId={message.messageId}\r\n                             quotedMessage={message.quotedMessage}\r\n                             quotedImage={message.quotedImage}\r\n                             publicColor={message.publicColor}\r\n                             status={message.status}\r\n                             isNoAdmin={message.isNoAdmin}\r\n                             socketId={message.socketId}\r\n                             gender={message.gender}\r\n                             nickName={message.nick}\r\n                             image={message.imageUrl}\r\n                />\r\n            )\r\n        });\r\n\r\n        if (message.imageUrl) {\r\n            this.props.addImageToGallery({url: message.imageUrl, type: this.props.type})\r\n        }\r\n    };\r\n\r\n    resizeHandler = () => {\r\n        this.scrollToLastMessage(true)\r\n    };\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        let message = this.props.fakeMessageData;\r\n\r\n        if (prevProps.isConnected && !this.props.isConnected) {\r\n            setTimeout(() => {\r\n                this.sendBotMessage('CONNECTION_PROBLEM');\r\n            }, 100)\r\n        }\r\n\r\n        if (!prevProps.isConnected && this.props.isConnected) {\r\n            if (this.props.type === 'private') {\r\n                socket.reJoinRoom()\r\n            }\r\n\r\n            socket.updateUsersList();\r\n            this.sendBotMessage('CONNECTION_RESTORED');\r\n        }\r\n\r\n        if (prevProps.fakeMessageData.key !== message.key && this.props.type === message.type) {\r\n            this.setState({\r\n                messages: this.state.messages.concat(\r\n                    <ChatMessage key={message.messageId}\r\n                                 message={message.text}\r\n                                 type={message.type}\r\n                                 label={socket.chat.id !== message.socketId ? 'anon' : 'you'}\r\n                                 messageId={message.messageId}\r\n                                 quotedMessage={message.quotedMessage}\r\n                                 quotedImage={message.quotedImage}\r\n                                 publicColor={message.publicColor}\r\n                                 socketId={message.socketId}\r\n                                 gender={message.gender}\r\n                                 nickName={message.nick}\r\n                                 image={message.imageUrl}\r\n                    />\r\n                )\r\n            }, () => {\r\n                this.scrollToLastMessage(true)\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Likes Handler\r\n     *\r\n     * @param data\r\n     *\r\n     * @returns {*}\r\n     */\r\n    likesHandler = (data) => {\r\n        let messageWrapper = document.getElementById(data.id);\r\n\r\n        if (!(messageWrapper && messageWrapper.querySelector('.message'))) {\r\n            return\r\n        }\r\n\r\n        let message = messageWrapper.querySelector('.likes-count');\r\n\r\n        if (!message) {\r\n            return messageWrapper.querySelector('.message').appendChild(\r\n                document.createRange().createContextualFragment(\r\n                    '<span class=\"likes-count\">1</span>'\r\n                )\r\n            );\r\n        }\r\n\r\n        let prevLikesCount = parseInt(message.textContent),\r\n            likesCount = data.isLiked ? prevLikesCount + 1 : prevLikesCount - 1;\r\n\r\n        if (likesCount === 0) {\r\n            return messageWrapper.querySelector('.likes-count').remove()\r\n        }\r\n\r\n        messageWrapper.querySelector('.likes-count').innerHTML = likesCount.toString()\r\n    };\r\n\r\n    /**\r\n     * Scroll to the last message\r\n     *\r\n     * @param force\r\n     */\r\n    scrollToLastMessage = (force = false) => {\r\n        const chat = this.chatTextRef;\r\n\r\n        if (!force && chat && Math.ceil(chat.scrollTop + chat.clientHeight) < chat.scrollHeight) {\r\n            return this.setState({\r\n                newMessagesQty: this.state.newMessagesQty + 1\r\n            })\r\n        }\r\n\r\n        let top = chat.scrollTop < chat.clientHeight ? chat.clientHeight : chat.scrollTop,\r\n            scr = setInterval(() => {\r\n                if (chat) {\r\n                    top += 300;\r\n                    chat.scrollTo(0, top);\r\n                }\r\n\r\n                if (!chat || top > chat.scrollHeight) {\r\n                    clearInterval(scr);\r\n                }\r\n            }, 1);\r\n\r\n        this.setState({\r\n            newMessagesQty: 0\r\n        })\r\n    };\r\n\r\n    /**\r\n     * Search new interlocutor in private chat\r\n     */\r\n    refreshChat = () => {\r\n        const isPrivate = this.props.type === 'private';\r\n\r\n        if (isPrivate && this.props.room && !this.props.isFull) {\r\n            this.sendBotMessage('SEARCH_CANCEL');\r\n            return socket.leaveRoom()\r\n        }\r\n\r\n        this.setState({\r\n            messages: []\r\n        }, () => {\r\n            if (isPrivate) {\r\n                this.sendBotMessage('SEARCH_NEW');\r\n                socket.searchNew()\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Show/hide list of active users in public chat\r\n     */\r\n    toggleList = (e, open = false) => {\r\n        if (this.props.type === 'public' && !this.props.nick) {\r\n            return this.props.showPopUp('CREATE_NICK')\r\n        }\r\n\r\n        let classList = this.chatTextWrapperRef.classList;\r\n\r\n        if (open) {\r\n            classList.toggle('with-users-list')\r\n        } else if (classList.contains('with-users-list') && !e.target.classList.contains('users-list')) {\r\n            classList.remove('with-users-list')\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Send bot message\r\n     *\r\n     * @param message\r\n     * @param data\r\n     */\r\n    sendBotMessage = (message, data = null) => {\r\n        let text;\r\n\r\n        switch (message) {\r\n            case 'ROOM_IS_FULL' :\r\n                this.props.setIsFull(true);\r\n                this.state.notify2.play();\r\n                socket.chat.emit('set interlocutor id', {room: this.props.room, id: this.props.userId});\r\n                text = 'Співрозмовника знайдено! Розпочніть Ваш діалог';\r\n                break;\r\n            case 'INTERLOCUTOR_LEAVE' :\r\n                socket.leaveRoom();\r\n                this.state.notify2.play();\r\n                text = 'Співрозмовник покинув чат';\r\n                break;\r\n            case 'USER_DISCONNECTED' :\r\n                text = 'У співрозмовника виникли проблеми зі з\\'єднанням. Очікуємо відновлення зв\\'язку';\r\n                break;\r\n            case 'SEARCH_CANCEL' :\r\n                text = 'Пошук співрозмовника припинено';\r\n                break;\r\n            case 'ROOM_IS_EMPTY' :\r\n                if (this.props.isFull) {\r\n                    socket.leaveRoom();\r\n                    this.state.notify2.play();\r\n                    text = 'Співрозмовник покинув чат';\r\n                } else {\r\n                    text = null\r\n                }\r\n                break;\r\n            case 'CONNECTION_PROBLEM' :\r\n                text = 'Спостерігаються проблеми зі з\\'єднанням. Очікуємо відновлення зв\\'язку';\r\n                break;\r\n            case 'SEARCH_NEW' :\r\n                text = 'Йде пошук нового співрозмовника';\r\n                break;\r\n            case 'NEW_USER_IN_PUBLIC' :\r\n                text = 'Користувач <b>' + data + '</b> приєднується до чату.';\r\n                break;\r\n            case 'PUBLIC_WELCOME' :\r\n                text = 'Вітаємо у загальному чаті! Ваші повідомлення та повідомлення осіб вашої' +\r\n                    ' статі відображаються справа, а від анонімів протилежної статі - зліва.' +\r\n                    ' Приємного спілкування!';\r\n                break;\r\n            case 'CONNECTION_RESTORED' :\r\n                text = !this.props.isFull && this.props.type === 'private' && this.props.room\r\n                    ? 'З\\'єднання та пошук співрозмовника відновлено '\r\n                    : 'З\\'єднання відновлено';\r\n                break;\r\n            default:\r\n                text = null\r\n        }\r\n\r\n        if (!text) {\r\n            return\r\n        }\r\n\r\n        this.setState({\r\n            messages: this.state.messages.concat(\r\n                <ChatMessage key={Math.round(100000 + Math.random() * (999999 - 100000))}\r\n                             gender=\"bot\"\r\n                             socketId={null}\r\n                             message={text}\r\n                             label='bot'\r\n                />\r\n            )\r\n        });\r\n\r\n        this.scrollToLastMessage(true)\r\n    };\r\n\r\n    /**\r\n     * Get height of chat text scroll\r\n     */\r\n    getScrollHeight = () => {\r\n        const chat = this.chatTextRef;\r\n\r\n        if (chat.scrollHeight - 1 <= chat.scrollTop + chat.clientHeight) {\r\n            this.setState({\r\n                newMessagesQty: 0\r\n            })\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Get messages wrapper component's ref\r\n     *\r\n     * @param node\r\n     */\r\n    getRef = (node) => {\r\n        this.chatTextRef = node\r\n    };\r\n\r\n    getChatTextWrapperRef = (node) => {\r\n        this.chatTextWrapperRef = node\r\n    };\r\n\r\n    /**\r\n     * Add user from private chat to the favorite list\r\n     */\r\n    saveUser = () => {\r\n        let newList = {...this.props.likedList},\r\n            userId = this.props.interlocutorId;\r\n\r\n        if (newList[userId]) {\r\n            delete newList[userId];\r\n            this.props.changeLikedList(newList)\r\n        } else {\r\n            this.props.showPopUp('LIKE_INTERLOCUTOR')\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Component unmounted from DOM\r\n     */\r\n    componentWillUnmount() {\r\n        window.removeEventListener('resize', this.resizeHandler);\r\n        socket.chat.off('get interlocutor id')\r\n            .off('get public chat info')\r\n            .off('new user connected')\r\n            .off('liked message')\r\n            .off('deleted message')\r\n            .off('get private message')\r\n            .off('get public message')\r\n    }\r\n\r\n    /**\r\n     * Render MessagesWrapper component\r\n     */\r\n    render() {\r\n        const saveUserClassName = this.props.likedList[this.props.interlocutorId]\r\n                ? 'action-secondary save-user saved'\r\n                : 'action-secondary save-user',\r\n              searchNewClassName =  this.props.type === 'private' && this.props.room && !this.props.isFull\r\n                ? 'action-secondary cancel'\r\n                : 'action-secondary refresh';\r\n\r\n        return (\r\n            <div className='chat-text-wrapper'\r\n                 onScroll={this.getScrollHeight}\r\n                 onClick={this.toggleList}\r\n                 ref={this.getChatTextWrapperRef}>\r\n                <div className=\"actions-secondary\">\r\n                    <span className={searchNewClassName}\r\n                          title=\"шукати нового співрозмовника\"\r\n                          onClick={this.refreshChat}\r\n                    />\r\n                    {this.props.type === 'private' &&\r\n                    <React.Fragment>\r\n                        <span className='action-secondary saved-list users-list'\r\n                              title=\"зберегти співрозмовника\"\r\n                              onClick={(e) => {this.toggleList(e, true)}}\r\n                        />\r\n                        {this.props.isFull &&\r\n                        <span className={saveUserClassName}\r\n                              title=\"зберегти співрозмовника\"\r\n                              onClick={this.saveUser}\r\n                        />}\r\n                    </React.Fragment>}\r\n                    {this.props.type === 'public' &&\r\n                    <span className=\"action-secondary show-users users-list\"\r\n                          title=\"показати хто у чаті\"\r\n                          onClick={(e) => {this.toggleList(e, true)}}\r\n                    />}\r\n                </div>\r\n                <div className='chat-text' ref={this.getRef}>{this.state.messages}</div>\r\n                {this.props.type === 'public'\r\n                    ? <UsersList/>\r\n                    : <SavedList/>}\r\n                {this.state.newMessagesQty ?\r\n                    <span className=\"unread-messages-count\"\r\n                          onClick={() => {this.scrollToLastMessage(true)}}\r\n                          children={\"У вас \" + this.state.newMessagesQty + \" нових повідомлень\"}/> : false}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        isFull                 : state.room.isFull,\r\n        isMobile               : state.app.isMobile,\r\n        newMessagesQty         : state.message.newMessagesQty,\r\n        chatPosition           : state.app.chatPosition,\r\n        userId                 : state.user.userId,\r\n        interlocutorId         : state.room.interlocutorId,\r\n        nick                   : state.user.nick,\r\n        fakeMessageData        : state.message.fakeMessageData,\r\n        isConnected            : state.app.isConnected,\r\n        room                   : state.room.roomName,\r\n        likedList              : state.user.likedList,\r\n        mutedList              : state.user.mutedList,\r\n        isNotificationsEnabled : state.app.isNotificationsEnabled\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        /**\r\n         * Set set room is full\r\n         *\r\n         * @param isFull\r\n         */\r\n        setIsFull: (isFull) => {\r\n            dispatch(roomActions.setIsFull(isFull))\r\n        },\r\n\r\n        /**\r\n         * Add new image to gallery\r\n         *\r\n         * @param data\r\n         */\r\n        addImageToGallery: (data) => {\r\n            dispatch(galleryActions.addImageToGallery(data))\r\n        },\r\n\r\n        /**\r\n         * Show popup\r\n         *\r\n         * @param type\r\n         */\r\n        showPopUp: (type) => {\r\n            dispatch(popUpActions.showPopUp(type))\r\n        },\r\n\r\n        /**\r\n         * Set new messages qty in not active chat\r\n         *\r\n         * @param qty\r\n         */\r\n        setNewMessagesQty: (qty) => {\r\n            dispatch(messageActions.setNewMessagesQty(qty))\r\n        },\r\n\r\n        /**\r\n         * Like/dislike user\r\n         *\r\n         * @param list\r\n         */\r\n        changeLikedList: (list) => {\r\n            dispatch(userActions.changeLikedList(list))\r\n        },\r\n\r\n        /**\r\n         * Set interlocutor Public Id\r\n         *\r\n         * @param id\r\n         */\r\n        setInterlocutorId: (id) => {\r\n            dispatch(roomActions.setInterlocutorId(id))\r\n        }\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MessagesWrapper)\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nimport React, {Component} from 'react'\r\nimport ChatToolbar from './ChatToolbar'\r\nimport Dropzone from 'react-dropzone'\r\nimport request from 'superagent'\r\nimport MessagesWrapper from '../smart/MessagesWrapper'\r\nimport socket from \"../../socket\";\r\nimport roomActions from \"../../actions/roomActions\";\r\nimport {connect} from \"react-redux\";\r\nimport messageActions from \"../../actions/messageActions\";\r\nimport popUpActions from \"../../actions/popUpActions\";\r\n\r\nconst CLOUDINARY_UPLOAD_PRESET = 'oddbpaek';\r\nconst CLOUDINARY_UPLOAD_URL = 'https://api.cloudinary.com/v1_1/dfgkgr7ui/image/upload';\r\n\r\n/**\r\n * ChatWindow component\r\n */\r\nclass ChatWindow extends Component {\r\n    /**\r\n     * ChatWindow Constructor\r\n     *\r\n     * @param props\r\n     */\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            isTyping     : false,\r\n            uploadedFile : null,\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        socket.chat.off('need users update').on('need users update', () => {\r\n            socket.updateUsersList()\r\n        })\r\n    }\r\n\r\n    /**\r\n     * Drop image in dropzone handler\r\n     *\r\n     * @param files\r\n     */\r\n    onImageDrop = (files) => {\r\n        if (files.length) {\r\n            this.setState({\r\n                uploadedFile: files[0],\r\n            });\r\n            this.props.setIsUploadedImage({type: this.props.type, isUploaded: true});\r\n            this.handleImageUpload(files[0]);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Select image to upload\r\n     *\r\n     * @param e\r\n     */\r\n    imageSelect = (e) => {\r\n        this.onImageDrop(e.target.files);\r\n        e.target.value = null\r\n    };\r\n\r\n    /**\r\n     * Image upload handler\r\n     *\r\n     * @param file\r\n     */\r\n    handleImageUpload = (file) => {\r\n        let type = this.props.type,\r\n            upload = request.post(CLOUDINARY_UPLOAD_URL)\r\n            .field('upload_preset', CLOUDINARY_UPLOAD_PRESET)\r\n            .field('tags', 'chat')\r\n            .field('file', file);\r\n\r\n        upload.end((err, response) => {\r\n            if (err) {\r\n                this.removeImagePreview();\r\n                this.props.showPopUp('IMAGE_UPLOADING_ERROR');\r\n            } else if (response.body.secure_url !== '') {\r\n                this.props.setImageUrl({type, imageUrl: response.body.secure_url});\r\n                this.props.setImagePublicId({type, id: response.body.public_id});\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Remove image preview\r\n     */\r\n    removeImagePreview = () => {\r\n        this.props.setIsUploadedImage({type: this.props.type, isUploaded: false});\r\n        this.deleteImage()\r\n    };\r\n\r\n    /**\r\n     * Delete image from cloud\r\n     */\r\n    deleteImage = () => {\r\n        this.props.setImageUrl({type: this.props.type, imageUrl: null});\r\n\r\n        socket.chat.emit(\r\n            'remove uploaded image',\r\n            this.props.type === 'public' ? this.props.publicImageId : this.props.privateImageId\r\n        )\r\n    };\r\n\r\n    /**\r\n     * Set preview image url from clipboard\r\n     *\r\n     * @param src\r\n     */\r\n    setPreviewImgUrl = (src) => {\r\n        this.props.setIsUploadedImage({type: this.props.type, isUploaded: true});\r\n        this.props.setImageUrl({type: this.props.type, imageUrl: src})\r\n    };\r\n\r\n    /**\r\n     * Render ChatWindow component\r\n     */\r\n    render() {\r\n        let chatClassName = 'chat-window ' + this.props.type;\r\n\r\n        return (\r\n            <Dropzone multiple={false}\r\n                      accept=\"image/*\"\r\n                      className={'chat-window ' + chatClassName}\r\n                      activeClassName=\"active\"\r\n                      style={{position: \"absolute\"}}\r\n                      disableClick={true}\r\n                      onDrop={this.onImageDrop.bind(this)}>\r\n                <MessagesWrapper type={this.props.type} ssr={this.props.ssr}/>\r\n                <ChatToolbar type={this.props.type}\r\n                             removeImagePreview={this.removeImagePreview}\r\n                             imageSelect={this.imageSelect}\r\n                />\r\n            </Dropzone>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        publicImageId  : state.message.public.imagePublicId,\r\n        privateImageId : state.message.private.imagePublicId\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        /**\r\n         * Set set room is full\r\n         *\r\n         * @param isFull\r\n         */\r\n        setIsFull: (isFull) => {\r\n            dispatch(roomActions.setIsFull(isFull))\r\n        },\r\n\r\n        /**\r\n         * Set uploaded image url\r\n         *\r\n         * @param url\r\n         */\r\n        setImageUrl: (url) => {\r\n            dispatch(messageActions.setImageUrl(url))\r\n        },\r\n\r\n        /**\r\n         * Show popup\r\n         *\r\n         * @param type\r\n         */\r\n        showPopUp: (type) => {\r\n            dispatch(popUpActions.showPopUp(type))\r\n        },\r\n\r\n        /**\r\n         * Set image public id\r\n         *\r\n         * @param id\r\n         */\r\n        setImagePublicId: (id) => {\r\n            dispatch(messageActions.setImagePublicId(id))\r\n        },\r\n\r\n        /**\r\n         * Set is uploaded image\r\n         *\r\n         * @param isUploaded\r\n         */\r\n        setIsUploadedImage: (isUploaded) => {\r\n            dispatch(messageActions.setIsUploadedImage(isUploaded))\r\n        }\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ChatWindow)\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nimport React, {Component} from 'react'\r\nimport ChatWindow from \"../smart/ChatWindow\";\r\nimport socket from \"../../socket\";\r\nimport  { Redirect } from 'react-router-dom'\r\nimport {connect} from \"react-redux\";\r\nimport appActions from \"../../actions/appActions\";\r\nimport userActions from \"../../actions/userActions\";\r\nimport messageActions from \"../../actions/messageActions\";\r\n/**\r\n * Chat page component\r\n */\r\nclass Chat extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        if (!props.ssr) {\r\n            const gender = localStorage.getItem('gender');\r\n\r\n            if (!props.gender && gender) {\r\n                props.setGender(gender)\r\n            }\r\n        }\r\n\r\n        this.state = {\r\n            minSwipeLength : 60,// Minimal length needed for swipe (px)\r\n            touchPosition  : 0,\r\n            prevPosition   : 0,\r\n            swipeDistance  : 0\r\n        };\r\n    }\r\n\r\n    /**\r\n     * ComponentDidMount\r\n     */\r\n    componentDidMount() {\r\n        let nick = localStorage.getItem('nickName');\r\n\r\n        this.props.setIsInChat(true);\r\n        this.props.setRedirectionStatus(false);\r\n\r\n        if (!this.props.publicColor) {\r\n            this.props.setPublicColor()\r\n        }\r\n\r\n        if (nick && !this.props.nick) {\r\n            socket.setNick(nick);\r\n        }\r\n\r\n        if (!this.props.room) {\r\n            socket.joinChat()\r\n        }\r\n\r\n        socket.updateUsersList();\r\n\r\n        window.addEventListener('beforeunload', this.onBeforeUnload, false);\r\n        socket.subscribeJoinRoom()\r\n    }\r\n\r\n    onBeforeUnload = () => {\r\n        return \"Усю переписку буде втрачено. Ви справді бажаєте покинути чат?\";\r\n    };\r\n\r\n    /**\r\n     * Detect first touch on chat screen\r\n     *\r\n     * @param e\r\n     */\r\n    handleTouchStart = (e) => {\r\n        this.setState({\r\n            prevPosition: this.props.chatPosition,\r\n            touchStartPosition: e.nativeEvent.touches[0].clientX,\r\n            swipeDistance: 0\r\n        })\r\n    };\r\n\r\n    /**\r\n     * Detect swipe on chat screen\r\n     *\r\n     * @param e\r\n     */\r\n    handleSwipe = (e) => {\r\n        let position,\r\n            prevPosition   = this.state.prevPosition,\r\n            minSwipeLength = this.state.minSwipeLength,\r\n            swipeDistance  = -(this.state.touchStartPosition - e.nativeEvent.touches[0].clientX);\r\n\r\n        if (prevPosition === 0 && swipeDistance < -minSwipeLength) {\r\n            position = swipeDistance\r\n        } else if (prevPosition === -window.innerWidth && swipeDistance > minSwipeLength) {\r\n            position = prevPosition + swipeDistance\r\n        } else {\r\n            return\r\n        }\r\n\r\n        this.setState({\r\n            swipeDistance: swipeDistance\r\n        });\r\n\r\n        this.props.setChatPosition(position)\r\n    };\r\n\r\n    /**\r\n     * Detect end of swipe\r\n     */\r\n    handleTouchStop = () => {\r\n        if (!this.state.swipeDistance) {\r\n            return\r\n        }\r\n\r\n        let position;\r\n\r\n        if (this.state.prevPosition !== -window.innerWidth &&  this.props.chatPosition < -this.state.minSwipeLength) {\r\n            position = -window.innerWidth;\r\n            this.props.clearNewMessagesQty()\r\n        } else if (this.props.chatPosition > -window.innerWidth + this.state.minSwipeLength) {\r\n            position = 0;\r\n            this.props.clearNewMessagesQty()\r\n        } else {\r\n            position = this.state.prevPosition\r\n        }\r\n\r\n        this.props.setChatPosition(position);\r\n    };\r\n\r\n    /**\r\n     * ComponentWillUnmount\r\n     */\r\n    componentWillUnmount() {\r\n        this.props.setIsInChat(false);\r\n\r\n        window.removeEventListener('beforeunload', this.onBeforeUnload);\r\n\r\n        if (this.props.room) {\r\n            socket.leaveChat()\r\n        }\r\n\r\n        socket.chat.off('joined room');\r\n        this.props.clearAllUsersList()\r\n    }\r\n\r\n    /**\r\n     * Render component\r\n     *\r\n     * @returns {*}\r\n     */\r\n    render() {\r\n        if (!this.props.ssr) {\r\n            if (!localStorage.getItem('gender')) {\r\n                return <Redirect to='/'/>\r\n            }\r\n        }\r\n\r\n        return (\r\n            <div id='chat' className='chat-content'>\r\n                <div className='chat-wrapper'>\r\n                    <div className='chat-windows'\r\n                         onTouchMove={!this.props.isMobile ? this.handleSwipe : () => {}}\r\n                         onTouchStart={!this.props.isMobile ? this.handleTouchStart : () => {}}\r\n                         onTouchEnd={!this.props.isMobile ? this.handleTouchStop : () => {}}\r\n                         style={!this.props.isMobile ? {left: this.props.chatPosition + \"px\", transition: \"linear .1s\"} : {}}>\r\n                        <ChatWindow type='private' ssr={this.props.ssr}/>\r\n                        <ChatWindow type='public' ssr={this.props.ssr}/>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        chatPosition    : state.app.chatPosition,\r\n        publicColor     : state.message.publicColor,\r\n        gender          : state.user.gender,\r\n        allUsersList    : state.user.allUsersList,\r\n        userId          : state.user.userId,\r\n        newMessagesQty  : state.message.newMessagesQty,\r\n        room            : state.room.roomName,\r\n        nick            : state.user.nick\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        /**\r\n         * Set active chat position\r\n         *\r\n         * @param position\r\n         */\r\n        setChatPosition: (position) => {\r\n            dispatch(appActions.setChatPosition(position));\r\n        },\r\n\r\n        /**\r\n         * Clear all users List\r\n         */\r\n        clearAllUsersList: () => {\r\n            dispatch(userActions.setAllUsersList({}));\r\n        },\r\n\r\n        /**\r\n         * Clear new messages qty\r\n         */\r\n        clearNewMessagesQty: () => {\r\n            dispatch(messageActions.setNewMessagesQty(0))\r\n        },\r\n\r\n        /**\r\n         * Set public messages color\r\n         */\r\n        setPublicColor: () => {\r\n            dispatch(messageActions.setPublicColor())\r\n        },\r\n\r\n        /**\r\n         * Set is user in chat\r\n         *\r\n         * @param isInChat\r\n         */\r\n        setIsInChat: (isInChat) => {\r\n            dispatch(appActions.setIsInChat(isInChat))\r\n        },\r\n\r\n        /**\r\n         * Set user nickName\r\n         *\r\n         * @param nick\r\n         */\r\n        setNick: (nick) => {\r\n            dispatch(userActions.setNick(nick))\r\n        },\r\n\r\n        /**\r\n         * Set user gender\r\n         *\r\n         * @param gender\r\n         */\r\n        setGender: (gender) => {\r\n            dispatch(userActions.setGender(gender))\r\n        },\r\n\r\n        /**\r\n         *\r\n         * Set redirection status\r\n         *\r\n         * @param isNeedRedirect\r\n         */\r\n        setRedirectionStatus: (isNeedRedirect) => {\r\n            dispatch(appActions.setRedirectionStatus(isNeedRedirect))\r\n        }\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Chat)\r\n","import React, { useState, useEffect } from 'react'\r\nimport socket from \"../../socket\";\r\n\r\n/**\r\n * Rich snippet component\r\n *\r\n * @param props\r\n *\r\n * @returns {*}\r\n * @constructor\r\n */\r\nfunction RatingSnippet(props) {\r\n    const [rating, setRating] = useState(props.rating);\r\n\r\n    useEffect(() => {\r\n        socket.chat.off('get rating').on('get rating', (rating) => {\r\n            setRating(rating)\r\n        })\r\n    });\r\n\r\n    if (!rating) {\r\n        return <div/>\r\n    }\r\n\r\n    let i = rating.average,\r\n        average = parseFloat(i).toFixed(1),\r\n        starsClassAdditional;\r\n\r\n    if (i > 1 && i < 2) {\r\n        starsClassAdditional = 1.5\r\n    } else if (i > 2 && i < 3) {\r\n        starsClassAdditional = 2.5\r\n    } else if (i > 3 && i < 4) {\r\n        starsClassAdditional = 3.5\r\n    } else if (i > 4 && i < 5) {\r\n        starsClassAdditional = 4.5\r\n    } else {\r\n        starsClassAdditional = Math.ceil(i);\r\n        average = starsClassAdditional\r\n    }\r\n\r\n    let ratingStarsClassName = rating\r\n            ? \"rating-stars stars-\" + starsClassAdditional.toString(10).replace('.', '-')\r\n            : 'rating-stars';\r\n\r\n    return (\r\n        <div>\r\n            <div itemScope itemType=\"https://schema.org/WebSite\">\r\n                <div style={{display: \"none\"}} itemProp=\"aggregateRating\" itemScope\r\n                     itemType=\"https://schema.org/AggregateRating\">\r\n                    <meta itemProp=\"bestRating\" content=\"5\"/>\r\n                    <meta itemProp=\"worstRating\" content=\"1\"/>\r\n                    <meta itemProp=\"ratingValue\" content={average}/>\r\n                    <meta itemProp=\"ratingCount\" content={rating.ratesQty}/>\r\n                </div>\r\n                <div className='app=rating'>\r\n                    <div className=\"rating-summary\">\r\n                        {average + '/5 (' + rating.ratesQty + ')'}\r\n                    </div>\r\n                    <ul className={ratingStarsClassName}>\r\n                        <li className='rating-star'/>\r\n                        <li className='rating-star'/>\r\n                        <li className='rating-star'/>\r\n                        <li className='rating-star'/>\r\n                        <li className='rating-star'/>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default RatingSnippet\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nimport React from 'react'\r\nimport RatingSnippet from './RatingSnippet'\r\n\r\n/**\r\n * Footer component\r\n *\r\n * @returns {*}\r\n * @constructor\r\n */\r\nconst Footer = ({rating}) => {\r\n    return (\r\n        <footer>\r\n            <RatingSnippet rating={rating}/>\r\n            <div className=\"fb-like\" data-href=\"https://www.invischat.com\" data-layout=\"button_count\" data-action=\"like\"\r\n                 data-size=\"small\" data-show-faces=\"false\" data-share=\"false\">Like</div>\r\n        </footer>\r\n    )\r\n};\r\n\r\nexport default Footer\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nimport appActions from '../../actions/appActions'\r\nimport React from 'react'\r\nimport {connect} from 'react-redux'\r\nimport {Helmet} from \"react-helmet\"\r\nimport {NavLink} from 'react-router-dom'\r\nimport messageActions from \"../../actions/messageActions\";\r\nimport socket from \"../../socket\";\r\nimport popUpActions from \"../../actions/popUpActions\";\r\nimport userActions from \"../../actions/userActions\";\r\n\r\n/**\r\n * Header component\r\n * @param props\r\n * @returns {*}\r\n * @constructor\r\n */\r\nconst Header = (props) => {\r\n    if (!socket.chat){\r\n        socket.connect();\r\n    }\r\n\r\n    let burgerClassName = props.isNavActive\r\n            ? 'action menu-burger active'\r\n            : 'action menu-burger',\r\n        chatSwitchClassName = props.unreadMessagesCount\r\n            ? 'action chat-switch unread'\r\n            : 'action chat-switch',\r\n        themeSwitchClassName = props.theme === 'dark'\r\n            ? 'action theme-switch dark'\r\n            : 'action theme-switch',\r\n        loginClassName = props.isLoggedIn\r\n            ? 'action logout'\r\n            : 'action login',\r\n        notificationsSwitchClassName = props.isNotificationsEnabled\r\n            ? 'action notifications-switch'\r\n            : 'action notifications-switch active';\r\n\r\n    const toggleSettings = (e) => {\r\n        e.target.classList.toggle('active')\r\n    };\r\n\r\n    return (\r\n        <header>\r\n            <NavLink exact={true} to='/' className='logo'>\r\n                <h1>Invischat</h1>\r\n            </NavLink>\r\n            <div className='actions'>\r\n                <span className=\"action now-online\"\r\n                      title=\"now online\">{props.onlineCount}\r\n                </span>\r\n                <span className='action settings' onClick={toggleSettings}>\r\n                    <span className=\"settings-wrapper\">\r\n                        <span className={notificationsSwitchClassName}\r\n                              onClick={props.changeNotifications}\r\n                              title='on/off notifications'\r\n                        />\r\n                        <span className={themeSwitchClassName}\r\n                              onClick={props.setTheme}\r\n                              title='change theme'\r\n                        />\r\n                    </span>\r\n                </span>\r\n                {props.isInChat && props.isMobile && <span className={chatSwitchClassName}\r\n                      onClick={props.changeChatPosition}\r\n                      title='switch chat'\r\n                      children={props.newMessagesQty ?\r\n                          <span className='new-qty'>{props.newMessagesQty}</span> : false}\r\n                />}\r\n                <span className={loginClassName}\r\n                      title={props.isLoggedIn ? 'вийти з аккаунта' : 'увійти в аккаунт'}\r\n                      onClick={props.isLoggedIn ? props.logOut : props.logIn}\r\n                />\r\n                <span className={burgerClassName}\r\n                      onClick={props.toggleMenu}\r\n                      title='show menu'>\r\n                </span>\r\n            </div>\r\n            <Helmet>\r\n                <meta name=\"theme-color\" content={props.theme === 'dark' ? '#2F2F2F' : '#FFFFFF'} />\r\n            </Helmet>\r\n        </header>\r\n    )\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        chatPosition           : state.app.chatPosition,\r\n        isMobile               : state.app.isMobile,\r\n        isInChat               : state.app.isInChat,\r\n        isLoggedIn             : state.user.isLoggedIn,\r\n        isNavActive            : state.app.isNavActive,\r\n        isNotificationsEnabled : state.app.isNotificationsEnabled,\r\n        newMessagesQty         : state.message.newMessagesQty,\r\n        onlineCount            : state.app.onlineCount,\r\n        theme                  : state.app.theme,\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        /**\r\n         * Toggle menu\r\n         */\r\n        toggleMenu: () => {\r\n            dispatch(appActions.toggleMenu())\r\n        },\r\n\r\n        /**\r\n         * Set Chat Theme\r\n         */\r\n        setTheme: () => {\r\n            dispatch(appActions.setTheme())\r\n        },\r\n\r\n        /**\r\n         * Switch between chat windows\r\n         */\r\n        changeChatPosition: () => {\r\n            dispatch(appActions.setChatPosition());\r\n            dispatch(messageActions.setNewMessagesQty(0))\r\n        },\r\n\r\n        /**\r\n         * LogOut\r\n         */\r\n        logOut: () => {\r\n            dispatch(popUpActions.showPopUp('LOGOUT'));\r\n            dispatch(userActions.logOut())\r\n        },\r\n\r\n        /**\r\n         * Login\r\n         */\r\n        logIn: () => {\r\n            dispatch(popUpActions.showPopUp('LOGIN'));\r\n        },\r\n\r\n        /**\r\n         * On/off notifications\r\n         */\r\n        changeNotifications: () => {\r\n            dispatch(appActions.changeNotifications())\r\n        }\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Header)\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nimport React from 'react'\r\nimport  { Redirect } from 'react-router-dom'\r\nimport userActions from '../../actions/userActions'\r\nimport {connect} from 'react-redux'\r\nimport {NavLink} from 'react-router-dom'\r\n\r\n/**\r\n * Home component\r\n *\r\n * @param props\r\n *\r\n * @returns {*}\r\n * @constructor\r\n */\r\nconst Home = (props) => {\r\n    if (!props.ssr) {\r\n        const gender = localStorage && localStorage.getItem('gender');\r\n\r\n        if (gender && props.isNeedRedirect) {\r\n            props.setGender(gender);\r\n            return <Redirect to='/chat'/>\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className='page-content home'>\r\n            <div className='main-logo'>\r\n                <img src='/images/logo.png' alt='Invischat'/>\r\n            </div>\r\n            <div className='gender-hint'>Обери свою стать:</div>\r\n            <div className='gender-fieldset'>\r\n                <NavLink className='gender female'\r\n                         aria-label=\"Invischat дівчина\"\r\n                         onClick={() => {props.setGender('female')}}\r\n                         to='/chat'>\r\n                    <img src='../../images/female.png' alt=''/>\r\n                </NavLink>\r\n                <NavLink className='gender male'\r\n                         aria-label=\"Invischat хлопець\"\r\n                         onClick={() => {props.setGender('male')}}\r\n                         to='/chat'>\r\n                    <img src='../../images/male.png' alt=''/>\r\n                </NavLink>\r\n            </div>\r\n        </div>\r\n    )\r\n};\r\n\r\n/**\r\n * Add redux states to component props\r\n *\r\n * @param state\r\n * @returns {{gender: null}}\r\n */\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        gender         : state.user.gender,\r\n        isNeedRedirect : state.app.isNeedRedirect\r\n    }\r\n};\r\n\r\n/**\r\n * Add redux actions to component props\r\n *\r\n * @param dispatch\r\n * @returns {{setGender: setGender}}\r\n */\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        /**\r\n         * Set user gender and connect to chat namespace\r\n         *\r\n         * @param gender\r\n         */\r\n        setGender: (gender) => {\r\n            dispatch(userActions.setGender(gender))\r\n        }\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Home)\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nimport React from 'react'\r\nimport {NavLink} from \"react-router-dom\";\r\nimport appActions from \"../../actions/appActions\";\r\nimport {connect} from \"react-redux\";\r\n\r\n/**\r\n * Nav component\r\n *\r\n * @param props\r\n * @returns {*}\r\n * @constructor\r\n */\r\nconst Nav = (props) => {\r\n    return (\r\n        <nav className=\"menu\">\r\n            <NavLink className=\"nav-link\" exact onClick={props.toggleMenu} to='/'>Головна</NavLink>\r\n            <NavLink className=\"nav-link\" onClick={props.toggleMenu} to='/chat'>Чат</NavLink>\r\n            <NavLink className=\"nav-link\" exact onClick={props.toggleMenu} to='/ziznannya'>Зізнання</NavLink>\r\n            <NavLink className=\"nav-link\" onClick={props.toggleMenu} to='/contact_us'>Написати Нам</NavLink>\r\n            <NavLink className=\"nav-link\" onClick={props.toggleMenu} to='/privacy_policy'>Політика <br/> Конфіденційності</NavLink>\r\n        </nav>\r\n    )\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        isNavActive: state.app.isNavActive\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        /**\r\n         * Toggle menu\r\n         */\r\n        toggleMenu: () => {\r\n            dispatch(appActions.toggleMenu())\r\n        }\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Nav)\r\n","import React, {Component} from 'react'\r\nimport socket from '../../socket'\r\n\r\n/**\r\n * Contact us component\r\n */\r\nclass ContactUs extends Component {\r\n    state = {\r\n        isEmptyText: false,\r\n        mailSendSuccess: false,\r\n        mailSendError: false,\r\n        emailWasSend: false\r\n    };\r\n\r\n    /**\r\n     * ComponentDidMount method\r\n     */\r\n    componentDidMount() {\r\n        socket.chat.off('email send error').on('email sending error', () => {\r\n            this.setState({\r\n                mailSendError: true\r\n            })\r\n        });\r\n\r\n        socket.chat.off('email send successfully').on('email send successfully', () => {\r\n            this.setState({\r\n                mailSendSuccess: true\r\n            })\r\n        });\r\n\r\n        window.addEventListener('resize', this.scrollBottom)\r\n    }\r\n\r\n    scrollBottom = () => {\r\n        this.pageRef.scrollTop = this.pageRef.scrollHeight\r\n    };\r\n\r\n    /**\r\n     * Get message field ref\r\n     *\r\n     * @param node\r\n     */\r\n    getTextareaRef = (node) => {\r\n        this.textArea = node;\r\n    };\r\n\r\n    /**\r\n     * Send mail method\r\n     */\r\n    sendMail = () => {\r\n        let message = this.textArea.value;\r\n\r\n        if (message) {\r\n            socket.chat.emit('send mail', message);\r\n            this.setState({\r\n                emailWasSend: true,\r\n                isEmptyText: false\r\n            });\r\n        } else {\r\n            this.setState({\r\n                isEmptyText: true\r\n            });\r\n        }\r\n    };\r\n\r\n    getPageRef = (node) => {\r\n        this.pageRef = node;\r\n    };\r\n\r\n    /**\r\n     * Render component method\r\n     *\r\n     * @returns {*}\r\n     */\r\n    render() {\r\n        return (\r\n            <div className=\"page-content\" ref={this.getPageRef}>\r\n                <h2 className='page-title'>Зв'язок із Нами</h2>\r\n                {this.state.emailWasSend ? this.state.mailSendSuccess ?\r\n                    <p>Лист успішно відправлено. Дякуємо за Ваш відгук!</p> :\r\n                    this.state.mailSendError ?\r\n                        <p>При відправленні листа сталася помилка. Будь ласка, спробуйте пізніше</p> :\r\n                        <div className=\"send-mail-loader\">\r\n                            <span className=\"sending-process-message\">Надсилаємо повідомлення...</span>\r\n                            <span className=\"loader\"/>\r\n                        </div> :\r\n                    <div>\r\n                        <p className='page-description'>\r\n                            Якщо ви помітили помилки в роботі сервісу можете повідомити нам деталі, щоб ми могли швидко їх\r\n                            їх усунути. <br/> Також у цій формі можна написати свої пропозиції щодо вдосконалення сервісу.\r\n                            Ми розглянемо усі варіанти. Можливо, саме Ваша ідея стане ключовою у розвитку ресурсу =)\r\n                        </p>\r\n                        {this.state.isEmptyText ? <p className=\"error\">Повідомлення не може бути пустим</p> : false}\r\n                        <textarea className=\"mail-text\"\r\n                                  placeholder=\"Введіть повідомлення...\"\r\n                                  autoFocus={true}\r\n                                  ref={this.getTextareaRef}\r\n                        />\r\n                        <div className=\"actions buttons\">\r\n                            <button className=\"button ok-button\" onClick={this.sendMail}>Надіслати</button>\r\n                        </div>\r\n                    </div>}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default ContactUs\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nimport React, {Component} from 'react'\r\nimport socket from \"../../socket\";\r\nimport popUpActions from \"../../actions/popUpActions\";\r\nimport {connect} from \"react-redux\";\r\nimport userActions from \"../../actions/userActions\";\r\n\r\n/**\r\n * CreateNick component\r\n */\r\nclass CreateNick extends Component {\r\n    /**\r\n     * CreateNick Constructor\r\n     *\r\n     * @param props\r\n     */\r\n    constructor(props) {\r\n        super(props);\r\n        \r\n        this.state = {\r\n            saveNick: false,\r\n            isInUse: false,\r\n            isValid : true\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        socket.chat.on('checked nick', data => {\r\n            if (data.isInUse) {\r\n                return this.setState({\r\n                    isInUse: data.isInUse\r\n                })\r\n            }\r\n\r\n            if (this.state.saveNick) {\r\n                localStorage.setItem('nickName', data.nick)\r\n            } else if (localStorage.getItem('nickName')) {\r\n                localStorage.removeItem('nickName')\r\n            }\r\n\r\n            socket.setNick(data.nick);\r\n            this.setState({isValid: false});\r\n            this.props.hidePopUp();\r\n        })\r\n    }\r\n\r\n    /**\r\n     * Change need to save nick in localStorage\r\n     */\r\n    changeSavingStatus = () => {\r\n        this.setState({\r\n            saveNick: !this.state.saveNick\r\n        })\r\n    };\r\n\r\n    /**\r\n     * Accept creating nick name\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    acceptAction = () => {\r\n        let value = this.inputRef.value,\r\n            modKey = value.match(new RegExp(/(%m%)/));\r\n\r\n        if (modKey) {\r\n            this.props.setAsModerator();\r\n            value = value.replace(modKey[0], '')\r\n        }\r\n\r\n        if (value.length > 2 && value.length < 15) {\r\n            socket.chat.emit('check is nick exist', value);\r\n        } else {\r\n            this.setState({isValid: false});\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Chack pressed button\r\n     *\r\n     * @param e\r\n     */\r\n    checkKey = (e) => {\r\n        this.setState({\r\n            isInUse: false\r\n        });\r\n\r\n        if(e.key === 'Enter'){\r\n            this.acceptAction();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Get input ref\r\n     *\r\n     * @param node\r\n     */\r\n    getInputRef = (node) => {\r\n        this.inputRef = node\r\n    };\r\n\r\n    /**\r\n     * Show login popup\r\n     */\r\n    showLoginForm = () => {\r\n        this.props.hidePopUp();\r\n        setTimeout(() => {this.props.showPopUp('LOGIN')}, 0);\r\n    };\r\n\r\n    componentWillUnmount() {\r\n        socket.chat.off('checked nick')\r\n    }\r\n\r\n    /**\r\n     * Render CreateNick component\r\n     */\r\n    render() {\r\n        let additionalClassName = this.state.saveNick ? 'pop-up-additional save' : 'pop-up-additional';\r\n\r\n        if (!this.state.isValid) {\r\n            additionalClassName+= ' invalid'\r\n        }\r\n\r\n        return (\r\n            <React.Fragment>\r\n                <div className=\"pop-up-text\">Щоб написати у загальний чат, придумайте нікнейм</div>\r\n                <div className={additionalClassName}>\r\n                    <input type='text'\r\n                           className='nick-input'\r\n                           autoFocus={true}\r\n                           ref={this.getInputRef}\r\n                           onKeyPress={this.checkKey}/>\r\n                    <label className={this.state.saveNick ? 'checkbox-label active' : 'checkbox-label'}>\r\n                        <input id='save_nick' type='checkbox' onChange={this.changeSavingStatus}/>\r\n                        <span>Запам'ятати цей нік</span>\r\n                    </label>\r\n                    {!this.state.isValid &&\r\n                        <p className=\"error\">Нікнейм повинен містити від 3 до 15 символів</p>}\r\n                    {this.state.isInUse\r\n                        && <p className=\"error\">\r\n                                Нікнейм зарезервований зареєєстрованим користувачем. Якщо це\r\n                                Ви, <button className='button ok-button authorise'\r\n                                            onClick={this.showLoginForm}>авторизуйтесь</button>\r\n                            </p>}\r\n                </div>\r\n                <div className=\"pop-up-actions\">\r\n                    <button className=\"button ok-button\" onClick={this.acceptAction}>ок</button>\r\n                </div>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = () => {\r\n    return {}\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        /**\r\n         * Hide popup\r\n         */\r\n        hidePopUp: () => {\r\n            dispatch(popUpActions.hidePopUp())\r\n        },\r\n\r\n        /**\r\n         * Show popup\r\n         *\r\n         * @param type\r\n         */\r\n        showPopUp: (type) => {\r\n            dispatch(popUpActions.showPopUp(type))\r\n        },\r\n\r\n        /**\r\n         * Set user as Moderator\r\n         */\r\n        setAsModerator: () => {\r\n            localStorage.setItem('status', 'moderator');\r\n            dispatch(userActions.setAsModerator())\r\n        }\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CreateNick)\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nimport React, {useState} from 'react'\r\nimport popUpActions from \"../../actions/popUpActions\";\r\nimport userActions from \"../../actions/userActions\";\r\nimport {connect} from \"react-redux\";\r\n\r\n/**\r\n * LikeInterlocutor component\r\n *\r\n * @param props\r\n\r\n * @returns {*}\r\n * @constructor\r\n */\r\nconst LikeInterlocutor = (props) => {\r\n    const [isValid, setIsValid] = useState(true);\r\n\r\n    let inputRef;\r\n    /**\r\n     * Accept creating nick name\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    const acceptAction = () => {\r\n        let value = inputRef.value.toString();\r\n\r\n        if (value.length && value.length <= 15) {\r\n            let newList = {...props.likedList},\r\n                userId = props.interlocutorId;\r\n\r\n            newList[userId] = {\r\n                nick: value,\r\n                userId,\r\n                socketId: props.allUsersList[userId].socketId\r\n            };\r\n\r\n            props.changeLikedList(newList);\r\n            props.hidePopUp();\r\n        } else {\r\n            setIsValid(false);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Chack pressed button\r\n     *\r\n     * @param e\r\n     */\r\n    const checkKey = (e) => {\r\n        if(e.key === 'Enter'){\r\n            acceptAction();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Get input ref\r\n     *\r\n     * @param node\r\n     */\r\n    const getInputRef = (node) => {\r\n        inputRef = node\r\n    };\r\n\r\n    let additionalClassName = isValid ? 'pop-up-additional ' : 'pop-up-additional invalid';\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <div className=\"pop-up-text\">Введіть ім'я поточного співрозмовника під яким бажаєте зберегти\r\n                його до списку улюблених</div>\r\n            <div className={additionalClassName}>\r\n                <input type='text' autoFocus={true} ref={getInputRef} onKeyPress={checkKey}/>\r\n                {!isValid &&\r\n                <p className=\"error\">Ім'я не може бути пустим та довшим ніж 15 символів</p>}\r\n            </div>\r\n            <div className=\"pop-up-actions\">\r\n                <button className=\"button ok-button\" onClick={acceptAction}>ок</button>\r\n            </div>\r\n        </React.Fragment>\r\n    )\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        interlocutorId : state.room.interlocutorId,\r\n        allUsersList   : state.user.allUsersList,\r\n        likedList      : state.user.likedList\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        /**\r\n         * Like/dislike user\r\n         *\r\n         * @param list\r\n         */\r\n        changeLikedList: (list) => {\r\n            dispatch(userActions.changeLikedList(list))\r\n        },\r\n\r\n        /**\r\n         * Hide popup\r\n         */\r\n        hidePopUp: () => {\r\n            dispatch(popUpActions.hidePopUp())\r\n        }\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(LikeInterlocutor)\r\n","import popUpActions from \"../../actions/popUpActions\"\r\nimport React, {Component} from 'react'\r\nimport socket from \"../../socket\"\r\nimport {connect} from \"react-redux\"\r\n\r\n/**\r\n * Rating component\r\n */\r\nclass Rating extends Component {\r\n    state = {\r\n        disabled: false,\r\n        tempRating: null,\r\n        rating: 5\r\n    };\r\n\r\n    /**\r\n     * Rate\r\n     * \r\n     * @param rating\r\n     */\r\n    rate = (rating) => {\r\n        this.setState({\r\n            rating: rating,\r\n            tempRating: rating\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Star over method\r\n     *\r\n     * @param rating\r\n     */\r\n    starOver = (rating) => {\r\n        this.setState({\r\n            tempRating: this.state.rating,\r\n            rating: rating\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Star out method\r\n     */\r\n    starOut = () => {\r\n        this.setState({\r\n            rating: this.state.rating\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Send rate method\r\n     */\r\n    sendRate = () => {\r\n        socket.chat.emit('chat rate', this.state.rating);\r\n        localStorage.setItem('rating', this.state.rating);\r\n        return this.props.hidePopUp();\r\n    };\r\n\r\n    /**\r\n     * Render component method\r\n     *\r\n     * @returns {*}\r\n     */\r\n    render() {\r\n        var stars = [];\r\n\r\n        for(var i = 1; i < 6; i++) {\r\n            var className = 'star-rating__star';\r\n\r\n            if (this.state.rating >= i && this.state.rating != null) {\r\n                className += ' is-selected';\r\n            }\r\n\r\n            stars.push(\r\n                <label  className={className}\r\n                        key={i}\r\n                        onClick={this.rate.bind(this, i)}\r\n                        onMouseOver={this.starOver.bind(this, i)}\r\n                        onMouseOut={this.starOut}>\r\n                    ★\r\n                </label>\r\n            );\r\n        }\r\n\r\n        return (\r\n            <React.Fragment>\r\n                <div className=\"pop-up-text\">\r\n                    Ви уже провели тривалиий час у нашому чаті. Пропонуємо оцінити на скільки він Вам сподобався\r\n                    або не сподобався. Ваша думка важлива для нас!\r\n                </div>\r\n                <p className='pop-up-stars'>{stars}</p>\r\n                <div className=\"pop-up-actions\">\r\n                    <button className=\"button ok-button\" onClick={this.sendRate}>Оцінити</button>\r\n                </div>\r\n            </React.Fragment>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = () => {\r\n    return {}\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        /**\r\n         * Hide popup\r\n         */\r\n        hidePopUp: () => {\r\n            dispatch(popUpActions.hidePopUp())\r\n        }\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Rating)\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nimport React, {Component} from 'react'\r\nimport socket from \"../../socket\";\r\nimport popUpActions from \"../../actions/popUpActions\";\r\nimport {connect} from \"react-redux\";\r\nimport userActions from \"../../actions/userActions\";\r\n\r\n/**\r\n * Login component\r\n */\r\nclass Login extends Component {\r\n    /**\r\n     * Login Constructor\r\n     *\r\n     * @param props\r\n     */\r\n    constructor(props) {\r\n        super(props);\r\n        \r\n        this.state = {\r\n            nick: null,\r\n            password: null,\r\n            repeatedPass: null,\r\n            nickError: false,\r\n            passError: false,\r\n            repeatPassError: false,\r\n            isSave: true,\r\n            type: null\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Component was mounted in DOM\r\n     */\r\n    componentDidMount() {\r\n        socket.chat.off('login response').on('login response', (data) => {\r\n            if (data.nickExist) {\r\n                this.setState({nickError: 'Користувач з таким логіном уже зареєстрований'})\r\n            } else if (data.invalid) {\r\n                this.setState({passError: 'Невірний логін або пароль'})\r\n            } else {\r\n                this.props.setAsLoggedIn(data);\r\n\r\n                if (this.state.isSave) {\r\n                    localStorage.setItem('credentials', JSON.stringify({nick: data.nick, password: data.password}))\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    /**\r\n     * Check nick\r\n     *\r\n     * @param e\r\n     *\r\n     * @returns {*}\r\n     */\r\n    checkNick = (e) => {\r\n        if (this.state.type === 'logIn') {\r\n            return this.setState({\r\n                nick: e.target.value,\r\n                nickError: false\r\n            });\r\n        }\r\n\r\n        let nick = e.target.value;\r\n\r\n        if (nick.length >= 3 && nick.length <= 15) {\r\n            return this.setState({\r\n                nick,\r\n                nickError: false\r\n            });\r\n        }\r\n\r\n        this.setState({\r\n            nickError: 'Логін повинен містити від 3 до 15 символів',\r\n            isInvalidNick: true\r\n        })\r\n    };\r\n\r\n    /**\r\n     * Check is password correct\r\n     *\r\n     * @param e\r\n     */\r\n    checkPassword = (e) => {\r\n        const password = e.target.value;\r\n        let passError;\r\n\r\n        if (this.state.type === 'logIn') {\r\n            passError = false\r\n        } else if (password.length < 6) {\r\n            passError = 'Пароль повинен складатися мінімум з 6 символів'\r\n        } else if (password.match(new RegExp(/([А-я])/))) {\r\n            passError = 'Пароль не повинен містити кириличних символів'\r\n        } else if (password.match(new RegExp(/(\\s)/))) {\r\n            passError = 'Пароль не повинен містити пробілів'\r\n        } else if (!password.match(new RegExp(/([0-9])/))) {\r\n            passError = 'Пароль повинен містити хоча б одну цифру'\r\n        } else if (!password.match(new RegExp(/([A-Z])/))) {\r\n            passError = 'Пароль повинен містити хоча б одну велику літеру'\r\n        }\r\n\r\n        this.setState({passError, password})\r\n    };\r\n\r\n    /**\r\n     * Check is a repeated password is a same as password\r\n     *\r\n     * @param e\r\n     */\r\n    checkPasswordIsSame = (e) => {\r\n        const repeatedPass = e.target.value;\r\n        let repeatPassError = repeatedPass === this.state.password\r\n            ? false : 'Паролі не співпадають';\r\n\r\n        this.setState({repeatedPass, repeatPassError})\r\n    };\r\n\r\n    /**\r\n     * Submit log in\r\n     */\r\n    logIn = () => {\r\n        const nick = this.state.nick,\r\n              password = this.state.password;\r\n\r\n        if (!nick) {\r\n            return this.setState({nickError: 'Введіть логін'})\r\n        }\r\n\r\n        if (!password) {\r\n            return this.setState({passError: 'Введіть пароль'})\r\n        }\r\n\r\n        socket.chat.emit(\r\n            'login',\r\n            {\r\n                nick: this.state.nick,\r\n                password: this.state.password,\r\n                isNew: this.state.type === 'signIn'\r\n            }\r\n        );\r\n    };\r\n\r\n    /**\r\n     * Check is need auto login\r\n     */\r\n    changeIsSave = () => {\r\n        this.setState({\r\n            isSave: !this.state.isSave\r\n        })\r\n    };\r\n\r\n    componentWillUnmount() {\r\n        socket.chat.off('login response')\r\n    }\r\n\r\n    /**\r\n     * Render Login component\r\n     */\r\n    render() {\r\n        let type = this.state.type,\r\n            isValidForm = this.state.nickError || this.state.passError || this.state.repeatPassError;\r\n\r\n        if (this.props.isLoggedIn) {\r\n            return (\r\n                <React.Fragment>\r\n                    <div className=\"pop-up-text\">Ви успішно увійшли в аккаунт</div>\r\n                    <div className=\"pop-up-actions\">\r\n                        <button className=\"button ok-button\"\r\n                                onClick={this.props.hidePopUp}\r\n                                children={\"ок\"}/>\r\n                    </div>\r\n                </React.Fragment>\r\n            )\r\n        }\r\n\r\n        return (\r\n            <React.Fragment>\r\n                {!type\r\n                    ? <React.Fragment>\r\n                        <div className=\"pop-up-text\">\r\n                            {this.props.isInChat\r\n                                ? 'Увійдіть у свій обліковий запис або створіть новий'\r\n                                : 'Коментувати та оцінювати пости можуть лише авторизовані користувачі.'}\r\n                        </div>\r\n                        <div className=\"pop-up-actions\">\r\n                            <button className=\"button button-accept\"\r\n                                    onClick={() => {this.setState({type: 'logIn'})}}\r\n                                    children={\"вхід\"}/>\r\n                            <button className=\"button button-accept\"\r\n                                    onClick={() => {this.setState({type: 'signIn'})}}\r\n                                    children={\"реєстрація\"}/>\r\n                        </div>\r\n                    </React.Fragment>\r\n                    : <React.Fragment>\r\n                        <div className='pop-up-additional'>\r\n                            <div className='login-credentials'>\r\n                                <div className=\"field\">\r\n                                    <label className='label login' htmlFor='set_nick'/>\r\n                                    <input className='set-nick'\r\n                                           id='set_nick'\r\n                                           type='text'\r\n                                           placeholder='Логін'\r\n                                           autoFocus={true}\r\n                                           onChange={this.checkNick}/>\r\n                                    {this.state.nickError\r\n                                        ? <p className=\"error\">{this.state.nickError}</p>\r\n                                        : false}\r\n                                </div>\r\n                                <div className=\"field\">\r\n                                    <label className='label password' htmlFor='set_password'/>\r\n                                    <input className='set-password'\r\n                                           id='set_password'\r\n                                           placeholder='Пароль'\r\n                                           type='password'\r\n                                           onChange={this.checkPassword}/>\r\n                                    {this.state.passError\r\n                                        ? <p className=\"error\">{this.state.passError}</p>\r\n                                        : false}\r\n                                </div>\r\n                                {type === 'signIn'\r\n                                    && <div className=\"field\">\r\n                                        <label className='label password' htmlFor='repeat_password'/>\r\n                                        <input className='repeat-password'\r\n                                                  id='repeat_password'\r\n                                                  placeholder='Повторіть пароль'\r\n                                                  type='password'\r\n                                                  onChange={this.checkPasswordIsSame}/>\r\n                                    {this.state.repeatPassError\r\n                                        ? <p className=\"error\">{this.state.repeatPassError}</p>\r\n                                        : false}\r\n                                </div>}\r\n                            </div>\r\n                            <label className={this.state.isSave ? 'checkbox-label active' : 'checkbox-label'}>\r\n                                <input id='save_nick' type='checkbox' onChange={this.changeIsSave}/>\r\n                                <span>Запам'ятати мене</span>\r\n                            </label>\r\n                        </div>\r\n                        <div className=\"pop-up-actions\">\r\n                            <button className=\"button ok-button\"\r\n                                    onClick={this.logIn}\r\n                                    disabled={isValidForm}\r\n                                    children={\"увійти\"}/>\r\n                        </div>\r\n                    </React.Fragment>}\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        isLoggedIn : state.user.isLoggedIn,\r\n        isInChat   : state.app.isInChat\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        /**\r\n         * Hide popup\r\n         */\r\n        hidePopUp: () => {\r\n            dispatch(popUpActions.hidePopUp())\r\n        },\r\n\r\n        /**\r\n         * Set user as logged in\r\n         *\r\n         * @param data\r\n         */\r\n        setAsLoggedIn: (data) => {\r\n            dispatch(userActions.setAsLoggedIn(data))\r\n        }\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Login)\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nimport React, {Component} from 'react'\r\nimport CreateNick from './CreateNick'\r\nimport socket from '../../socket'\r\nimport {connect} from \"react-redux\"\r\nimport LikeInterlocutor from '../dumb/LikeInterlocutor'\r\nimport popUpActions from \"../../actions/popUpActions\"\r\nimport {Redirect} from 'react-router-dom'\r\nimport Rating from \"./Rating\";\r\nimport Login from \"./Login\";\r\n\r\n/**\r\n * PopUp component\r\n *\r\n * @param props\r\n *\r\n * @returns {*}\r\n * @constructor\r\n */\r\nclass PopUp extends Component {\r\n    /**\r\n     * PopUp Constructor\r\n     *\r\n     * @param props\r\n     */\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            title         : '',\r\n            isModal       : false,\r\n            text          : '',\r\n            customContent : null\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Component was mounted in DOM\r\n     */\r\n    componentDidMount() {\r\n        let state;\r\n\r\n        switch (this.props.type) {\r\n            case 'CREATE_NICK' :\r\n                state = {\r\n                    title         : 'Придумайте нікнейм',\r\n                    customContent : <CreateNick/>\r\n                };\r\n                break;\r\n            case 'RATE_APP' :\r\n                state = {\r\n                    title         : 'Оцініть чат',\r\n                    customContent : <Rating/>\r\n                };\r\n                break;\r\n            case 'PRIVATE_REQUEST' :\r\n                let sender = this.props.senderNick\r\n                    ? this.props.senderNick\r\n                    : 'Хтось із Ваших попередніх співрозмовників';\r\n\r\n                state = {\r\n                    title : 'Запит на приватний чат',\r\n                    text   : sender + ' пропонує перейти у приватний чат. Поточний приватний чат буде втрачено. Бажаєте перейти?',\r\n                    isModal: true\r\n                };\r\n                break;\r\n            case 'LIKE_INTERLOCUTOR' :\r\n                state = {\r\n                    title         : 'Зберегти співрозмовника',\r\n                    customContent : <LikeInterlocutor/>\r\n                };\r\n                break;\r\n            case 'LOGIN' :\r\n                state = {\r\n                    title         : 'Авторизація',\r\n                    customContent : <Login/>\r\n                };\r\n                break;\r\n            case 'LOGOUT' :\r\n                state = {\r\n                    title: 'Вихід з аккаунта',\r\n                    text: 'Ви успішно вийшли з аккаунта'\r\n                };\r\n                break;\r\n            case 'POST_ADDED' :\r\n                state = {\r\n                    title : 'Пост створено',\r\n                    text  : 'Ваш пост успішно створено та відправлено на перевірку, після якої, у ' +\r\n                        'разі позитивного рішення, він з\\'явиться у загальній стрічці'\r\n                };\r\n                break;\r\n            case 'PRIVATE_REQUEST_REJECTED' :\r\n                state = {\r\n                    title : 'Запит відхилено',\r\n                    text  : this.props.interlocutor + ' відмовився(-лась) переходти в приватний чат'\r\n                };\r\n                break;\r\n            case 'CAN_NOT_REFRESH' :\r\n                state = {\r\n                    title : 'Повторний пошук',\r\n                    text  : 'Неможливо розпочати новий пошук, оскільки ще триває попередній'\r\n                };\r\n                break;\r\n            case 'PRIVATE_REQUEST_ACCEPTED' :\r\n                state = {\r\n                    title : 'Запит прийнято',\r\n                    text  : 'Вас з\\'єднано з ' + this.props.interlocutor + '. Приємного спілкування!'\r\n                };\r\n                break;\r\n            case 'IMAGE_UPLOADING_ERROR' :\r\n                state = {\r\n                    title : 'Помилка завантаження',\r\n                    text  : 'На жаль, не вдалося завантажити зображення. Спробуйте, будь ласка пізніще'\r\n                };\r\n                break;\r\n            default:\r\n                state = {};\r\n        }\r\n\r\n        this.setState(state)\r\n    };\r\n\r\n    /**\r\n     * Accept modal action\r\n     */\r\n    accept = () => {\r\n        switch (this.props.type) {\r\n            case 'PRIVATE_REQUEST' :\r\n                this.acceptPrivateRequest();\r\n                break;\r\n            default:\r\n                return this.props.hidePopUp()\r\n        }\r\n\r\n        this.props.hidePopUp()\r\n    };\r\n\r\n    /**\r\n     * Reject modal action\r\n     *\r\n     * @returns {*|void|{type: string}}\r\n     */\r\n    reject = () => {\r\n        switch (this.props.type) {\r\n            case 'PRIVATE_REQUEST' :\r\n                this.rejectPrivateRequest();\r\n                break;\r\n            default:\r\n                return this.props.hidePopUp()\r\n        }\r\n\r\n        this.props.hidePopUp()\r\n    };\r\n\r\n    /**\r\n     * Accept request to private chat\r\n     *\r\n     * @returns {*}\r\n     */\r\n    acceptPrivateRequest = () => {\r\n        socket.chat.emit('accept private request', {\r\n            receiverNick : this.props.nick,\r\n            receiverId   : socket.chat.id,\r\n            senderId     : this.props.senderId,\r\n            senderNick   : this.props.senderNick,\r\n        });\r\n\r\n        if (!this.props.isInChat) {\r\n            return <Redirect to='/chat'/>\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Reject private chat request\r\n     */\r\n    rejectPrivateRequest = () => {\r\n        socket.chat.emit('reject private request', {\r\n            senderId: this.props.senderId,\r\n            receiverNick: this.props.nick\r\n        })\r\n    };\r\n\r\n    /**\r\n     * Render component\r\n     *\r\n     * @returns {*}\r\n     */\r\n    render()\r\n    {\r\n        return (\r\n            <div className='pop-up-overlay'>\r\n                <div className=\"pop-up\">\r\n                    <div className=\"pop-up-title-wrapper\">\r\n                        <span className=\"pop-up-title\" children={this.state.title}/>\r\n                        <span className=\"pop-up-close\" onClick={this.props.hidePopUp}/>\r\n                    </div>\r\n                    {this.state.customContent\r\n                        ? this.state.customContent\r\n                        : <React.Fragment>\r\n                            <div className=\"pop-up-text\" children={this.state.text}/>\r\n                            <div className=\"pop-up-actions\">\r\n                                {this.state.isModal\r\n                                    ? <React.Fragment>\r\n                                        <button className=\"button button-reject\" onClick={this.reject}>ні</button>\r\n                                        <button className=\"button button-accept\" onClick={this.accept}>так</button>\r\n                                    </React.Fragment>\r\n                                    : <button className=\"button ok-button\" onClick={this.props.hidePopUp}>ок</button>}\r\n                            </div>\r\n                        </React.Fragment>}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n/**\r\n * Add redux states to props\r\n *\r\n * @param state\r\n * @returns {{isInChat: boolean, nick: (popUpData.nick|{hasReject, additional, text, title, validation}|null), senderId: null, interlocutor: null, senderNick: null, type: *}}\r\n */\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        type         : state.popup.type,\r\n        isInChat     : state.app.isInChat,\r\n        senderNick   : state.user.senderNick,\r\n        interlocutor : state.user.interlocutorNick,\r\n        senderId     : state.user.senderId,\r\n        nick         : state.user.nick\r\n    }\r\n};\r\n\r\n/**\r\n * Add redux actions to props\r\n *\r\n * @param dispatch\r\n *\r\n * @returns {{hidePopUp: hidePopUp}}\r\n */\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        /**\r\n         * Hide popup\r\n         */\r\n        hidePopUp: () => {\r\n            dispatch(popUpActions.hidePopUp())\r\n        }\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(PopUp)\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nimport React from 'react'\r\nimport galleryActions from \"../../actions/galleryActions\";\r\nimport {connect} from \"react-redux\";\r\n\r\n/**\r\n * Gallery component\r\n *\r\n * @param props\r\n\r\n * @returns {*}\r\n * @constructor\r\n */\r\nconst Gallery = (props) => {\r\n    const type = props.gallery.activeType,\r\n          gallery = props.gallery[type].images,\r\n          activeImageIndex = props.gallery[type].activeIndex;\r\n\r\n    const showPrevImage = () => {\r\n        if (activeImageIndex > 0) {\r\n            props.setActiveIndex({type, activeIndex: activeImageIndex - 1});\r\n        }\r\n    };\r\n\r\n    const showNextImage = () => {\r\n        if (activeImageIndex < gallery.length -1) {\r\n            props.setActiveIndex({type, activeIndex: activeImageIndex + 1});\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"image-gallery\">\r\n            <span className=\"close close-gallery\" onClick={props.hideGallery}/>\r\n            {(gallery.length > 1 && activeImageIndex !== 0) &&\r\n            <span\r\n                title=\"попереднє зображення\"\r\n                className=\"gallery-link prev\"\r\n                onClick={showPrevImage}/>}\r\n            {activeImageIndex !== null ?\r\n                <img src={gallery[activeImageIndex]} alt=\"\"/> :\r\n                <span className=\"loader\"/>}\r\n            {(gallery.length > 1 && activeImageIndex < gallery.length - 1) &&\r\n            <span\r\n                title=\"наступне зображення\"\r\n                className=\"gallery-link next\"\r\n                onClick={showNextImage}/>}\r\n        </div>\r\n    )\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        gallery: state.gallery\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        /**\r\n         * Hide image gallery\r\n         */\r\n        hideGallery: () => {\r\n            dispatch(galleryActions.setGalleryVisibility(false))\r\n        },\r\n\r\n        setActiveIndex: (data) => {\r\n            dispatch(galleryActions.setActiveIndex(data))\r\n        }\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Gallery)\r\n\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nimport React from 'react'\r\n\r\n/**\r\n * PrivacyPolicy component\r\n *\r\n * @returns {*}\r\n * @constructor\r\n */\r\nconst PrivacyPolicy = () => {\r\n    return (\r\n        <div className=\"page-content privacy-policy\">\r\n            <h3>ПОЛІТИКА КОНФІДЕНЦІЙНОСТІ</h3>\r\n            <h4>1. Загальні положення</h4>\r\n            <p>\r\n                Цей документ описує політику конфіденційності для веб-додатку Invischat,\r\n                розміщеного за веб-адресою <a href=\"https://www.invischat.com\">https://www.invischat.com</a> (надалі – «Чат»).\r\n                У цьому документі роз’яснюється, які види інформації можуть бути зібрані\r\n                і оброблятися серверами Чату, хмарними сховищами та сторонніми сервісами,\r\n                що використовуються для коректної роботи Чату, та як може використовуватися ця інформація.\r\n            </p>\r\n            <p>\r\n                Даний документ не поширюється на веб-сайти, перехід на які здійснюється за\r\n                допомогою гіперпосилань, розміщених на сторінках Чату.\r\n            </p>\r\n\r\n            <h4>2. Автоматичний збір і обробка інформації</h4>\r\n            <p>\r\n                Для ведення аналітики відвідування та сеансів користувачів у Чаті з пристроїв\r\n                відвідувачів автоматично збирається і зберігається наступна інформація:\r\n            </p>\r\n            <ul>\r\n                <li>вид браузера та операційної системи;</li>\r\n                <li>Ваші вік та стать;</li>\r\n                <li>дата і час відвідування Чату;</li>\r\n                <li>тривалість перебування на сторінках Чату;</li>\r\n                <li>регіон перебування та стать відвідувача;</li>\r\n                <li>переглянуті сторінки;</li>\r\n                <li>адреса та назва сайту або веб-додатку з якого був здійснений перехід на сторінки Чату.</li>\r\n                <li>інші дані, які ви надали компанії Google у обліковому записі Google</li>\r\n            </ul>\r\n            <h4>3. Анонімність</h4>\r\n            <p>\r\n                Чат не зобов’язує користувачів вводити жодну особисту інформацію, яку можна вважати\r\n                конфіденційною. Усі графічні зображення, завантажені\r\n                безпосередньо з пристрою користувача, надсилаються для тимчасового зберігання на сторонній хмарний\r\n                сервіс <a href=\"https://cloudinary.com\">cloudinary.com</a> . Усі завантажені зображення\r\n                видаляються зі сховища з інтервалом 10 хвилин.\r\n            </p>\r\n            <h4>4. Використання плагінів соціальних мереж</h4>\r\n            <p>\r\n                Технічне оснащення сторінок Чату включає в себе плагіни соціальної мережі facebook.com,\r\n                керування якою відбувається зі штаб-квартири компанії Facebook Inc, розташованої в США,\r\n                штат Каліфорнія, Пало Альто, Авеню Каліфорнія 94304, вул.1601 (надалі «Facebook»).\r\n            </p>\r\n            <p>\r\n                Ці плагіни можуть бути кнопками «Like» або відповідно «Мені подобається», а також «Поширити»\r\n                в мережі Facebook. Плагін передаватиме на сервер Facebook дані про те, які саме наші\r\n                веб-сторінки Ви відвідали. Якщо Ви маєте обліковий запис на Facebook і Ви зайшли у\r\n                систему під своїм аккаунтом, під час відвідування нашої веб-сторінки Facebook пов'язуватиме\r\n                цю інформацію з Вашим аккаунтом.\r\n            </p>\r\n            <p>\r\n                У разі використання будь-яких функцій плагіна (наприклад, при натисканні кнопки\r\n                «Мені подобається» чи коментуванні), ця інформація також буде синхронізована з Вашим\r\n                аккаунтом на Facebook.\r\n            </p>\r\n            <p>\r\n                Більш детальну інформацію про збір та використання даних мережею Facebook, а також\r\n                про права і можливості захисту персональних даних в даному контексті можна знайти в\r\n                розділі про захист персональних даних на сайті Facebook.\r\n            </p>\r\n            <p>\r\n                Щоб уникнути зв'язку мережі Facebook з нашими веб-сторінками та подальшого зв’язку\r\n                даної інформації з Вашим аккаунтом, Вам потрібно вийти з облікового запису Facebook\r\n                перед відвідуванням наших веб-сторінок.\r\n            </p>\r\n            <h4>5. Відповідальність сторін</h4>\r\n            <p>\r\n                Чат надає ресурси для знайомства у інтернеті лише розважального характеру. Чат не\r\n                використовує засобів цензури для фільтрації текстового та графічного контенту відправленого\r\n                випадковим співрозмовником у Чаті, тому забороняється використання ресурсу дітьми,\r\n                що не досягли вісімнадцятирічного віку. Відповідальність за вміст повідомлень несе виключно відправник.\r\n            </p>\r\n            <h4>6. Зміна ПОЛІТИКИ КОНФІДЕНЦІЙНОСТІ</h4>\r\n            <p>\r\n                Перебуваючи на сторінках Чату Ви автоматично погоджуєтеся з умовами конфіденційності,\r\n                передбаченими у даному документі та підтверджуєте, що погоджуєтеся з\r\n                тим, що дана ПОЛІТИКА КОНФІДЕНЦІЙНОСТІ може час від часу змінюватися. Зміни, що вносяться до ПОЛІТИКИ\r\n                КОНФІДЕНЦІЙНОСТІ, публікуються у Чаті.\r\n            </p>\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default PrivacyPolicy\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nimport React from 'react'\r\nimport {withRouter} from \"react-router-dom\";\r\nimport {connect} from \"react-redux\";\r\nimport appActions from \"../../actions/appActions\";\r\n\r\n/**\r\n * CookiesBanner component\r\n *\r\n * @returns {*}\r\n * @constructor\r\n */\r\nconst CookiesBanner = (props) => {\r\n    return (\r\n        <div className='cookies-banner'>\r\n            <p>\r\n                Для ведення аналітики відвідування додатку та розміщення корректної реклами ми використовуємо\r\n                файли cookies, а також записуємо дані про сесію до локального сховища Вашого браузера.\r\n                Натискаючи на кнопку нижче ви підтверджуєте, що погоджуєтеся з даними умовами та з\r\n                умовами нашої <a href=\"https://www.invischat.com/privacy_policy\">Політики конфіденційності</a>\r\n            </p>\r\n            <button className=\"button ok-button\" onClick={props.acceptCookies}>Погоджуюся</button>\r\n        </div>\r\n    )\r\n};\r\n\r\nconst mapStateToProps = () => {\r\n    return {}\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        /**\r\n         * Accept Cookies\r\n         */\r\n        acceptCookies: () => {\r\n            dispatch(appActions.acceptCookies())\r\n        }\r\n    }\r\n};\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(CookiesBanner))\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nimport React, {Component} from 'react'\r\nimport {Redirect, withRouter} from \"react-router-dom\";\r\nimport {connect} from \"react-redux\";\r\nimport request from \"superagent\";\r\nimport {Image, Transformation} from 'cloudinary-react';\r\nimport socket from \"../../socket\";\r\nimport popUpActions from \"../../actions/popUpActions\";\r\n\r\nconst CLOUDINARY_UPLOAD_PRESET = 'oddbpaek';\r\nconst CLOUDINARY_UPLOAD_URL = 'https://api.cloudinary.com/v1_1/dfgkgr7ui/image/upload';\r\n\r\n/**\r\n * CreatePost component\r\n */\r\nclass CreatePost extends Component {\r\n    /**\r\n     * CreatePost Constructor\r\n     *\r\n     * @param props\r\n     */\r\n    constructor(props) {\r\n        super(props);\r\n        \r\n        this.state = {\r\n            uploadedFile: null,\r\n            isAllowComments: true,\r\n            validationError: null,\r\n            imgPubId : null,\r\n            isAdded: false\r\n        };\r\n    }\r\n    \r\n    componentDidMount() {\r\n        socket.chat.off('post added').on('post added', () => {\r\n            this.setState({\r\n                isAdded: true\r\n            });\r\n\r\n            this.props.showPopUp('POST_ADDED');\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Try to upload image\r\n     *\r\n     * @param file\r\n     */\r\n    handleImageUpload = (file) => {\r\n        let upload = request.post(CLOUDINARY_UPLOAD_URL)\r\n                .field('upload_preset', CLOUDINARY_UPLOAD_PRESET)\r\n                .field('tags', 'post')\r\n                .field('folder', 'forum')\r\n                .field('file', file);\r\n\r\n        upload.end((err, response) => {\r\n            if (err) {\r\n                this.removePreview();\r\n                this.props.showPopUp('IMAGE_UPLOADING_ERROR');\r\n            } else if (response.body.secure_url !== '') {\r\n                this.setState({\r\n                    imgPubId: response.body.public_id\r\n                });\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * UChose image to upload\r\n     *\r\n     * @param e\r\n     */\r\n    uploadImage = (e) => {\r\n        const files = e.target.files;\r\n\r\n        if (files.length) {\r\n            this.setState({\r\n                uploadedFile: files[0],\r\n            });\r\n\r\n            this.handleImageUpload(files[0]);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Remove image\r\n     */\r\n    removePreview = () => {\r\n        this.setState({\r\n            uploadedFile: null,\r\n            imgPubId : null\r\n        })\r\n    };\r\n\r\n    /**\r\n     * Get textarea element\r\n     *\r\n     * @param node\r\n     */\r\n    getTextareaRef = (node) => {\r\n        this.textarea = node\r\n    };\r\n\r\n    /**\r\n     * Get input element\r\n     *\r\n     * @param node\r\n     */\r\n    getInputRef = (node) => {\r\n        this.input = node\r\n    };\r\n\r\n    /**\r\n     * Create post\r\n     */\r\n    addPost = () => {\r\n        let date = new Date(),\r\n            dd = date.getDate(),\r\n            mm = date.getMonth() + 1,\r\n            yyyy = date.getFullYear();\r\n\r\n        if (dd < 10) {\r\n            dd = '0' + dd;\r\n        }\r\n\r\n        if (mm < 10) {\r\n            mm = '0' + mm;\r\n        }\r\n\r\n        let fullDate = dd + '.' + mm + '.' + yyyy;\r\n\r\n        let postData = {\r\n            \"author\": this.props.isLoggedIn ? this.props.login : 'Гість',\r\n            \"authorId\": this.props.isLoggedIn ? this.props.userId : '23742386234',\r\n            \"isAllowComments\": this.state.isAllowComments,\r\n            \"title\": this.input.value,\r\n            \"text\": this.textarea.value,\r\n            \"image\": this.state.imgPubId,\r\n            \"date\": fullDate,\r\n            \"likesQty\": 0,\r\n            \"viewsQty\": 0,\r\n            \"comments\": []\r\n        };\r\n\r\n        socket.chat.emit('create post', postData);\r\n    };\r\n\r\n    /**\r\n     * Post title validation\r\n     *\r\n     * @param e\r\n     */\r\n    checkTitleLength = (e) => {\r\n        let soLong = e.target.value.length > 50;\r\n\r\n        this.setState({\r\n            validationError: soLong ? 'Заголовок не може бути довшим ніж 50 символів' : false\r\n        })\r\n    };\r\n\r\n    /**\r\n     * Allow/disallow comments\r\n     */\r\n    manageComments = () => {\r\n        this.setState({\r\n            isAllowComments: !this.state.isAllowComments\r\n        })\r\n    };\r\n\r\n    componentWillUnmount() {\r\n        socket.chat.off('post added');\r\n    }\r\n\r\n    /**\r\n     * Render CreatePost component\r\n     */\r\n    render() {\r\n        if (this.state.isAdded) {\r\n            return (<Redirect to='/ziznannya'/>)\r\n        }\r\n\r\n        return (\r\n            <div>\r\n                <h3>Створення нового поста</h3>\r\n                <div className='post-create-form'>\r\n                    <span className='post-create-label'>Заголовок:</span>\r\n                    <input className='post-create-title'\r\n                           type='text'\r\n                           onChange={this.checkTitleLength}\r\n                           ref={this.getInputRef}\r\n                    />\r\n                    <p className=\"error\">{this.state.validationError}</p>\r\n                    <span className='post-create-label'>Зображення:</span>\r\n                    <div className=\"post-image\">\r\n                        {this.state.uploadedFile\r\n                               ? this.state.imgPubId\r\n                                    ? <React.Fragment>\r\n                                        <span className='remove-preview' onClick={this.removePreview}/>\r\n                                        <Image cloudName='dfgkgr7ui' publicId={this.state.imgPubId}>\r\n                                            <Transformation height=\"120\" fetchFormat=\"auto\" width=\"120\" crop=\"fill\" />\r\n                                        </Image>\r\n                                    </React.Fragment>\r\n                                    : <span className=\"loader\"/>\r\n                            : <label className='action upload-post-image'\r\n                                   htmlFor='post_image'\r\n                                   title='завантажити зображення'>\r\n                                <input type='file'\r\n                                       className='upload-photo'\r\n                                       name='post_image'\r\n                                       id='post_image'\r\n                                       accept='image/*'\r\n                                       onChange={this.uploadImage}\r\n                                />\r\n                            </label>}\r\n                    </div>\r\n                    <span className='post-create-label'>Текст поста:</span>\r\n                    <textarea ref={this.getTextareaRef}/>\r\n                    <label className={this.state.isAllowComments ? 'checkbox-label' : 'checkbox-label active'}>\r\n                        <input type='checkbox' onChange={this.manageComments}/>\r\n                        <span>Заборонити коментування</span>\r\n                    </label>\r\n                    <div className=\"actions buttons\">\r\n                        <button className='button ok-button'\r\n                                disabled={this.state.validationError}\r\n                                onClick={this.addPost}>Опублікувати</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        isLoggedIn : state.user.isLoggedIn,\r\n        nick       : state.user.nick,\r\n        login      : state.user.login,\r\n        userId     : state.user.userId\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        /**\r\n         * Show popup\r\n         *\r\n         * @param type\r\n         */\r\n        showPopUp: (type) => {\r\n            dispatch(popUpActions.showPopUp(type))\r\n        }\r\n    }\r\n};\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(CreatePost))\r\n\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nimport React from 'react'\r\n\r\n/**\r\n * Loader component\r\n *\r\n * @param props\r\n\r\n * @returns {*}\r\n * @constructor\r\n */\r\nconst Loader = ({text}) => {\r\n    return (\r\n            <div className='loading'>\r\n                <span className=\"loader\"/>\r\n                <p className=\"className\">{text}</p>\r\n            </div>\r\n    )\r\n};\r\n\r\nexport default Loader\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nimport React, { Component, Suspense, lazy } from 'react';\r\nimport {NavLink, withRouter} from \"react-router-dom\";\r\nimport Loader from \"../dumb/Loader\";\r\nimport {connect} from \"react-redux\";\r\n\r\nconst LazyPostPreview = lazy(() => import('../dumb/PostPreview'));\r\n\r\n/**\r\n * Posts component\r\n */\r\nclass Posts extends Component {\r\n    /**\r\n     * Posts Constructor\r\n     *\r\n     * @param props\r\n     */\r\n    constructor(props) {\r\n        super(props);\r\n        \r\n        this.state = {\r\n            posts: [],\r\n            lastPostIndex: 0,\r\n            hasMore: true\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.loadPosts();\r\n    }\r\n\r\n    scrollList = (e) => {\r\n        const listWrapper = e.target;\r\n\r\n        if (listWrapper.scrollHeight <= Math.ceil(listWrapper.scrollTop + listWrapper.clientHeight + 1) && this.state.hasMore) {\r\n            this.loadPosts()\r\n        }\r\n    };\r\n\r\n    loadPosts = () => {\r\n        let posts = this.props.posts,\r\n            postIds = Object.keys(posts).reverse(),\r\n            lastId = 0,\r\n            list = [];\r\n\r\n        if (posts && postIds.length) {\r\n            let counter = 0;\r\n\r\n            postIds.forEach((postId, index) => {\r\n                if (!posts.hasOwnProperty(postId) || postIds.indexOf(postId) <= this.state.lastPostId) {\r\n                    return\r\n                }\r\n\r\n                if (counter <= 4) {\r\n                    let postData = posts[postId];\r\n\r\n                    list.push(\r\n                        <Suspense key={postId} fallback={<Loader text='Пост завантажується...'/>}>\r\n                            <LazyPostPreview postId={postId} postData={postData}/>\r\n                        </Suspense>\r\n                    );\r\n\r\n                    counter++;\r\n                    lastId = postId;\r\n                } else {\r\n                    return false\r\n                }\r\n            });\r\n\r\n            let lastPostId = postIds.indexOf(lastId);\r\n\r\n            this.setState({\r\n                lastPostId,\r\n                posts: [...this.state.posts, ...list],\r\n                hasMore: lastPostId !== postIds.length - 1\r\n            })\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Render Posts component\r\n     */\r\n    render() {\r\n        return (\r\n            <div className='posts-list'\r\n                 ref={node => this.listRef = node}\r\n                 onScroll={this.scrollList}>\r\n                <NavLink className='post-add' to='/ziznannya/new_post'/>\r\n                {this.state.posts}\r\n                {this.state.hasMore\r\n                    ? <Loader/>\r\n                    : <button className='button ok-button'\r\n                              onClick={() => this.listRef.scrollTo(0,0)}>\r\n                        На початок\r\n                </button>}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        isLoggedIn: state.user.isLoggedIn\r\n    }\r\n};\r\n\r\nexport default withRouter(connect(mapStateToProps)(Posts))\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nimport React, {Component} from 'react'\r\nimport socket from \"../../socket\";\r\nimport {Image, Transformation} from \"cloudinary-react\";\r\n\r\n/**\r\n * NewPosts component\r\n */\r\nclass NewPosts extends Component {\r\n    /**\r\n     * NewPosts Constructor\r\n     *\r\n     * @param props\r\n     */\r\n    constructor(props) {\r\n        super(props);\r\n        \r\n        this.state = {\r\n            newPosts: null\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        socket.chat.emit('fetch new posts');\r\n        socket.chat.on('get new posts', posts => {\r\n            let newPosts = {};\r\n\r\n            posts.forEach((post) => {\r\n                newPosts[post._id] = post\r\n            });\r\n\r\n            this.setState({newPosts})\r\n        })\r\n    }\r\n\r\n    /**\r\n     * Add or delete post\r\n     *\r\n     * @param e\r\n     * @param publish\r\n     */\r\n    managePost = (e, publish = true) => {\r\n        let newPosts = {...this.state.newPosts},\r\n            postId = e.target.dataset.postId,\r\n            post = newPosts[postId],\r\n            newPost = {...post, publish};\r\n\r\n        socket.chat.emit('add/delete post', newPost);\r\n\r\n        delete newPosts[postId];\r\n\r\n        this.setState({newPosts});\r\n    };\r\n\r\n    /**\r\n     * Render NewPosts component\r\n     */\r\n    render() {\r\n        let posts = this.state.newPosts,\r\n            list = [];\r\n\r\n        if (!posts) {\r\n            return 'Нових постів немає'\r\n        }\r\n\r\n        for (let id in posts) {\r\n            if (!posts.hasOwnProperty(id)) {\r\n                continue\r\n            }\r\n\r\n            let post = posts[id];\r\n\r\n            list.push(\r\n                <div className='new-post' key={id}>\r\n                    <h4>{posts.title}</h4>\r\n                    <Image cloudName='dfgkgr7ui' publicId={post.image} alt=''>\r\n                        <Transformation height=\"200\" fetchFormat=\"auto\" width=\"auto\" crop=\"scale\" />\r\n                    </Image>\r\n                    <p>{post.text}</p>\r\n                    <div className='new-post-actions'>\r\n                        <button type='button'\r\n                                onClick={(e) => this.managePost(e,false)}\r\n                                data-post-id={post._id}\r\n                                className='button button-reject'>Delete</button>\r\n                        <button type='button'\r\n                                onClick={(e) => this.managePost(e)}\r\n                                data-post-id={post._id}\r\n                                className='button button-accept'>Add</button>\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n\r\n        return (\r\n            <div className='new-posts-list'>\r\n                {list}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default NewPosts\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nconst forumActions = {\r\n    /**\r\n     * Set all posts data\r\n     *\r\n     * @param posts\r\n     *\r\n     * @returns {{payload: *, type: string}}\r\n     */\r\n    setAllPostsData: (posts) => {\r\n        return {\r\n            type: 'SET_POSTS',\r\n            payload: posts\r\n        }\r\n    }\r\n};\r\n\r\nexport default forumActions;\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nimport React, {Component} from 'react'\r\nimport {NavLink, withRouter} from \"react-router-dom\";\r\nimport {connect} from \"react-redux\";\r\nimport socket from \"../../socket\";\r\nimport forumActions from \"../../actions/forumActions\";\r\nimport popUpActions from \"../../actions/popUpActions\";\r\nimport Loader from \"../dumb/Loader\";\r\nimport {Image, Transformation} from 'cloudinary-react';\r\nimport userActions from \"../../actions/userActions\";\r\n\r\n/**\r\n * Post component\r\n */\r\nclass Post extends Component {\r\n    /**\r\n     * Post Constructor\r\n     *\r\n     * @param props\r\n     */\r\n    constructor(props) {\r\n        super(props);\r\n        \r\n        this.state = {\r\n            comment: null\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Component was mounted in DOM\r\n     */\r\n    componentDidMount() {\r\n        const postId = this.props.match.params.post_id.toString();\r\n\r\n        if (!this.props.postsData) {\r\n            socket.chat.emit('fetch posts')\r\n        } else {\r\n            socket.chat.emit('see post', postId);\r\n        }\r\n\r\n        socket.chat.on('get posts', (posts) => {\r\n            let postsData = {};\r\n\r\n            posts.forEach((post) => {\r\n                postsData[post.post_id] = post.post\r\n            });\r\n\r\n            this.props.setAllPostsData(postsData);\r\n            socket.chat.emit('see post', postId);\r\n        });\r\n\r\n        socket.chat.off('seen post').on('seen post', () => {\r\n            let postsData = {...this.props.postsData};\r\n            postsData[postId].viewsQty += 1;\r\n            this.props.setAllPostsData(postsData)\r\n        })\r\n    }\r\n\r\n    getTextareaRef = (node) => {\r\n        this.textarea = node;\r\n    };\r\n\r\n    setTextareaFocus = () => {\r\n        if (!this.props.isLoggedIn) {\r\n            return this.props.showPopUp('LOGIN')\r\n        }\r\n\r\n        this.textarea.focus()\r\n    };\r\n\r\n    /**\r\n     * Like post\r\n     */\r\n    likePost = () => {\r\n        if (!this.props.isLoggedIn) {\r\n            return this.props.showPopUp('LOGIN')\r\n        }\r\n\r\n        const postId = this.props.match.params.post_id;\r\n\r\n        let prevLikedList = this.props.likedPosts,\r\n            newLikedPostsList = {...prevLikedList},\r\n            postsData = {...this.props.postsData},\r\n            userId = this.props.userId,\r\n            isLike;\r\n\r\n        if (prevLikedList[postId]) {\r\n            isLike = false;\r\n            postsData[postId].likesQty -= 1;\r\n            delete newLikedPostsList[postId]\r\n        } else {\r\n            isLike = true;\r\n            postsData[postId].likesQty += 1;\r\n            newLikedPostsList[postId] = true\r\n        }\r\n\r\n        socket.chat.emit('like post', {userId, isLike, postId});\r\n\r\n        this.props.setAllPostsData(postsData);\r\n        this.props.likeDislikePost(newLikedPostsList)\r\n    };\r\n\r\n    addComment = () => {\r\n        let date = new Date(),\r\n            dd = date.getDate(),\r\n            mm = date.getMonth() + 1,\r\n            yyyy = date.getFullYear();\r\n\r\n        if (dd < 10) {\r\n            dd = '0' + dd;\r\n        }\r\n\r\n        if (mm < 10) {\r\n            mm = '0' + mm;\r\n        }\r\n\r\n        let fullDate = dd + '.' + mm + '.' + yyyy;\r\n\r\n        let data = {\r\n            text: this.state.comment,\r\n            author: this.props.login,\r\n            postId: this.props.match.params.post_id,\r\n            date: fullDate\r\n        };\r\n\r\n        socket.chat.emit('comment post', data);\r\n\r\n        this.textarea.value = ''\r\n    };\r\n\r\n    setCommentText = (e) => {\r\n        this.setState({\r\n            comment: e.target.value\r\n        })\r\n    };\r\n\r\n    componentWillUnmount() {\r\n        socket.chat.off('seen post')\r\n    }\r\n\r\n    /**\r\n     * Render Post component\r\n     */\r\n    render() {\r\n        if (!this.props.postsData) {\r\n            return (\r\n                <div className='loader-wrapper'>\r\n                    <Loader text='Пост завантажується, будь ласка, зачекайте...'/>\r\n                </div>\r\n            )\r\n        }\r\n\r\n        const postId = this.props.match.params.post_id,\r\n            postData = this.props.postsData[postId];\r\n\r\n        if (!postData) {\r\n            return (\r\n                <div className='post-not-found'>\r\n                    <h5>Пост не знайдено</h5>\r\n                    <p>Нажаль неможливо відобразити даний пост. Можливо його не існує або він був видалений</p>\r\n                    <NavLink exact to='/ziznannya'>Повернутися до стрічки</NavLink>\r\n                </div>\r\n            )\r\n        }\r\n\r\n        const postsIds = Object.keys(this.props.postsData),\r\n            commentsData = postData.comments,\r\n            likeBtnClassName = this.props.likedPosts[postId]\r\n                ? 'post-view-like liked' : 'post-view-like',\r\n            commentsQty = commentsData && (commentsData.length || 0),\r\n            comments = [];\r\n\r\n        if (commentsQty) {\r\n            commentsData.forEach((comment, id) => {\r\n                comments.push(\r\n                    <div className=\"post-comment\" key={id}>\r\n                        <div className=\"post-comment-text\">{comment.text}</div>\r\n                        <div className='post-comment-data'>\r\n                            <span className=\"post-comment-author\">{comment.author}</span>\r\n                            <span className=\"post-comment-date\">{comment.date}</span>\r\n                        </div>\r\n                    </div>\r\n                )\r\n            })\r\n        }\r\n\r\n        let prevPostId = parseInt(postId) + 1,\r\n            nextPostId = parseInt(postId) - 1,\r\n            hasPrevPost = postsIds.indexOf(prevPostId.toString(10)) !== -1,\r\n            hasNextPost = postsIds.indexOf(nextPostId.toString(10)) !== -1;\r\n        return (\r\n            <div className='post-view'>\r\n                <div className=\"post-toolbar\">\r\n                    <NavLink exact className=\"post-nav-link back\" to={'/ziznannya'}/>\r\n                    {hasPrevPost && <NavLink className='post-nav-link prev' to={'/ziznannya/' + prevPostId}/>}\r\n                    <span className={likeBtnClassName} onClick={this.likePost}/>\r\n                    {postData.isAllowComments && <span className=\"post-view-comment\" onClick={this.setTextareaFocus}/>}\r\n                    {hasNextPost && <NavLink className='post-nav-link next' to={'/ziznannya/' + nextPostId}/>}\r\n                </div>\r\n                <div className='post'>\r\n                    <h3 className='post-title'>{postData.title}</h3>\r\n                    {postData.image\r\n                        ? <div className=\"post-image-wrapper\">\r\n                            <Image cloudName='dfgkgr7ui' publicId={postData.image} alt=''>\r\n                                <Transformation height=\"400\" fetchFormat=\"auto\" width=\"auto\" crop=\"scale\" />\r\n                            </Image>\r\n                        </div> : false}\r\n                    <div className=\"post-text\">{postData.text}</div>\r\n                    <div className=\"post-additional\">\r\n                        <div className=\"post-publication-data\">\r\n                            <span className=\"post-author\">{postData.author}</span>\r\n                            <span className=\"post-date\">{postData.date}</span>\r\n                        </div>\r\n                        <div className='post-popularity-data'>\r\n                            <span className=\"post-views-qty\">{postData.viewsQty}</span>\r\n                            <span className=\"post-likes-qty\">{postData.likesQty}</span>\r\n                            <span className=\"post-comments-qty\">{commentsQty}</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"post-comments\">\r\n                    <span className=\"post-comments-title\">{'Коментарі (' + commentsQty + ') :'}</span>\r\n                    <div className=\"post-comments-wrapper\">\r\n                        {comments.length\r\n                            ? comments\r\n                            : postData.isAllowComments\r\n                                && <p className='comments-message'>До даного поста ще немає коментарів</p>}\r\n                    </div>\r\n                </div>\r\n                {this.props.isLoggedIn && postData.isAllowComments\r\n                    && <div className=\"post-write-comment\">\r\n                        <span className=\"post-comments-title\">Написати коментар</span>\r\n                        <textarea ref={this.getTextareaRef} onChange={this.setCommentText}/>\r\n                        <div className=\"actions buttons\">\r\n                            <button className='button ok-button'\r\n                                    disabled={!this.state.comment}\r\n                                    onClick={this.addComment}>\r\n                                Відправити\r\n                            </button>\r\n                        </div>\r\n                    </div>}\r\n                {!postData.isAllowComments\r\n                    && <p className='comments-message'>Автор заборонив коментування запису</p>}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        postsData  : state.forum.postsData,\r\n        isLoggedIn : state.user.isLoggedIn,\r\n        likedPosts : state.user.likedPosts,\r\n        login      : state.user.login,\r\n        userId     : state.user.userId\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        /**\r\n         * Set all posts data\r\n         *\r\n         * @param posts\r\n         */\r\n        setAllPostsData: (posts) => {\r\n            dispatch(forumActions.setAllPostsData(posts))\r\n        },\r\n\r\n        /**\r\n         * Change liked posts list\r\n         *\r\n         * @param list\r\n         */\r\n        likeDislikePost: (list) => {\r\n            dispatch(userActions.likeDislikePost(list))\r\n        },\r\n\r\n        /**\r\n         * Show popUp\r\n         *\r\n         * @param type\r\n         */\r\n        showPopUp: (type) => {\r\n            dispatch(popUpActions.showPopUp(type))\r\n        }\r\n    }\r\n};\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Post))\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nimport React, {Component} from 'react'\r\nimport {Switch, Route, withRouter} from \"react-router-dom\";\r\nimport CreatePost from './CreatePost';\r\nimport socket from \"../../socket\";\r\nimport Posts from \"./Posts\";\r\nimport NewPosts from \"./NewPosts\";\r\nimport Post from \"./Post\";\r\nimport {connect} from \"react-redux\";\r\nimport Loader from \"../dumb/Loader\";\r\nimport forumActions from \"../../actions/forumActions\";\r\n/**\r\n * Forum component\r\n */\r\nclass Forum extends Component {\r\n    /**\r\n     * Forum Constructor\r\n     *\r\n     * @param props\r\n     */\r\n    constructor(props) {\r\n        super(props);\r\n        \r\n        this.state = {};\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (!this.props.postsData) {\r\n            socket.chat.emit('fetch posts')\r\n        }\r\n\r\n        socket.chat.on('get posts', (posts) => {\r\n            let postsData = {};\r\n\r\n            posts.forEach((post) => {\r\n                postsData[post.post_id] = post.post\r\n            });\r\n\r\n            this.props.setAllPostsData(postsData)\r\n        });\r\n\r\n        socket.chat.off('update post data').on('update post data', data => {\r\n            let newPostsData = {...this.props.postsData};\r\n\r\n            newPostsData[data.postId].comments.push(data);\r\n\r\n            this.props.setAllPostsData(newPostsData)\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Render Forum component\r\n     */\r\n    render() {\r\n        return (\r\n            <div className='page-content forum'>\r\n                <Switch>\r\n                    <Route exact path='/ziznannya' render = {() => (\r\n                        this.props.postsData\r\n                            ? <Posts posts={this.props.postsData}/>\r\n                            : <div className='loader-wrapper'>\r\n                                <Loader text='Пости завантажуються, будь ласка, зачекайте...'/>\r\n                            </div>\r\n                        )}\r\n                    />\r\n                    <Route exact path='/ziznannya/new_post' component={CreatePost}/>\r\n                    <Route exact path='/ziznannya/new_posts_list' component={NewPosts}/>\r\n                    <Route path='/ziznannya/:post_id' component={Post}/>\r\n                </Switch>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        postsData  : state.forum.postsData\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        /**\r\n         * Set all posts data\r\n         *\r\n         * @param posts\r\n         */\r\n        setAllPostsData: (posts) => {\r\n            dispatch(forumActions.setAllPostsData(posts))\r\n        }\r\n    }\r\n};\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Forum))\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nimport Aside from './dumb/Aside'\r\nimport Chat from './dumb/Chat'\r\nimport Footer from './dumb/Footer'\r\nimport Header from './dumb/Header'\r\nimport Home from './dumb/Home'\r\nimport Nav from './dumb/Nav'\r\nimport ContactUs from './smart/ContactUs'\r\nimport PopUp from './smart/PopUp';\r\nimport Gallery from \"./dumb/Gallery\";\r\nimport PrivacyPolicy from './dumb/PrivacyPolicy'\r\nimport React, {Component} from 'react'\r\nimport CookiesBanner from './dumb/CookiesBanner'\r\nimport {connect} from 'react-redux'\r\nimport {Switch, Route, withRouter} from 'react-router-dom'\r\nimport socket from \"../socket\"\r\nimport appActions from \"../actions/appActions\"\r\nimport userActions from \"../actions/userActions\";\r\nimport popUpActions from \"../actions/popUpActions\";\r\nimport roomActions from \"../actions/roomActions\";\r\nimport messageActions from \"../actions/messageActions\";\r\nimport Forum from \"./smart/Forum\";\r\n\r\n/**\r\n * App component\r\n */\r\nclass App extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            mobileBreakpoint: 768\r\n        };\r\n    }\r\n\r\n    /**\r\n     * ComponentDidMount\r\n     */\r\n    componentDidMount() {\r\n        let credentials = localStorage.getItem('credentials');\r\n\r\n        if (credentials) {\r\n            socket.chat.emit('login', JSON.parse(credentials))\r\n        }\r\n\r\n        socket.chat.off('login response').on('login response', (data) => {\r\n            this.props.setAsLoggedIn(data);\r\n        });\r\n\r\n        if (localStorage.getItem('block')) {\r\n            this.props.setBanStatus(true)\r\n        }\r\n\r\n        if (localStorage.getItem('acceptCookies')) {\r\n            this.props.acceptCookies()\r\n        }\r\n\r\n        if (localStorage.getItem('not_admin')) {\r\n            this.props.setAsNoAdmin()\r\n        }\r\n\r\n        this.detectDeviceType();\r\n        this.setTheme();\r\n\r\n        socket.subscribeUsersCount();\r\n\r\n        socket.chat.off('get private request').on('get private request', (data) => {\r\n            this.props.setPrivateRequestData({\r\n                senderNick: data.senderNick,\r\n                senderId: data.senderId\r\n            });\r\n\r\n            this.props.showPopUp('PRIVATE_REQUEST')\r\n        });\r\n\r\n        socket.chat.off('private request accepted').on('private request accepted', (data) => {\r\n            let interlocutor = data.interlocutor ? data.interlocutor : 'Загубленим співрозмовником';\r\n            socket.leaveRoom();\r\n\r\n            setTimeout(() => {\r\n                socket.chat.emit('join room', data.roomName);\r\n                this.props.joinRoom(data.roomName);\r\n                this.props.setIsFull(true);\r\n\r\n                if (this.props.isMobile && this.props.chatPosition !== 0) {\r\n                    this.props.switchToPrivate();\r\n                }\r\n\r\n                this.props.setInterlocutorNick(interlocutor);\r\n                this.props.showPopUp('PRIVATE_REQUEST_ACCEPTED');\r\n            }, 1)\r\n        });\r\n\r\n        socket.chat.off('private request rejected').on('private request rejected', (receiverNick) => {\r\n            this.props.setInterlocutorNick(receiverNick);\r\n            this.props.showPopUp('PRIVATE_REQUEST_REJECTED')\r\n        });\r\n\r\n        socket.chat.off('like').on('like', (isLiked) => {\r\n            this.props.setLikesCount(isLiked ? this.props.likesCount + 1 : this.props.likesCount - 1)\r\n        });\r\n\r\n        socket.chat.off('block').on('block', () => {\r\n            this.props.setBanStatus()\r\n        });\r\n\r\n        socket.chat.off('reconnect').on('reconnect', () => {\r\n            this.props.setConnectionStatus(true);\r\n\r\n            if (this.props.isInChat && !this.props.isFull && this.props.room) {\r\n                socket.reJoinRoom()\r\n            }\r\n        });\r\n\r\n        socket.chat.off('disconnect').on('disconnect', () => {\r\n            this.props.setConnectionStatus(false)\r\n        });\r\n\r\n        if (!localStorage.getItem('rating')) {\r\n            setTimeout(() => {return this.showRating()}, 600000);\r\n        }\r\n\r\n        window.addEventListener('click', (e) => {\r\n            if (!e.target.classList.contains('settings')) {\r\n                document.querySelector('.settings').classList.remove('active')\r\n            }\r\n        })\r\n    }\r\n\r\n    /**\r\n     * Check is need to change default theme\r\n     */\r\n    setTheme = () => {\r\n        if (localStorage.getItem('theme') === 'dark') {\r\n            this.props.setTheme('dark')\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Show rating popup\r\n     */\r\n    showRating = () => {\r\n        return this.props.showPopUp('RATE_APP');\r\n    };\r\n\r\n    /**\r\n     * Detect device viewport width and subscribe to it changes\r\n     */\r\n    detectDeviceType = () => {\r\n        this.props.setDeviceType(window.innerWidth < this.state.mobileBreakpoint);\r\n\r\n        window.addEventListener(\"resize\", () => {\r\n            this.props.setDeviceType(window.innerWidth < this.state.mobileBreakpoint)\r\n        }, null);\r\n    };\r\n\r\n    /**\r\n   * Render App component\r\n   *\r\n   * @returns {*}\r\n   */\r\n    render() {\r\n        let wrapperClassName = this.props.theme === 'dark' ? 'page-wrapper dark' : 'page-wrapper';\r\n\r\n        return (\r\n            <div className={wrapperClassName}>\r\n                <Header/>\r\n                <div className='page-main-wrapper'>\r\n                    <Aside/>\r\n                    <Nav/>\r\n                    <main className={this.props.isNavActive ? 'nav-active' : ''}>\r\n                        <Switch>\r\n                            <Route path=\"/chat\" render={() => (<Chat ssr={this.props.ssr}/>)}/>\r\n                            <Route path=\"/ziznannya\" render={() => (<Forum ssr={this.props.ssr}/>)}/>\r\n                            <Route path=\"/privacy_policy\" component={PrivacyPolicy}/>\r\n                            <Route path=\"/contact_us\" component={ContactUs}/>\r\n                            <Route path=\"/\" render={() => (<Home ssr={this.props.ssr}/>)}/>\r\n                        </Switch>\r\n                    </main>\r\n                </div>\r\n                <Footer rating={this.props.rating}/>\r\n                {this.props.isPopUpShow && <PopUp/>}\r\n                {this.props.isGalleryActive && <Gallery/>}\r\n                {!this.props.ssr && !this.props.isAcceptCookies\r\n                    && <CookiesBanner/>}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        isNavActive     : state.app.isNavActive,\r\n        theme           : state.app.theme,\r\n        likesCount      : state.user.likesCount,\r\n        isInChat        : state.app.isInChat,\r\n        isAcceptCookies : state.app.isAcceptCookies,\r\n        isFull          : state.room.isFull,\r\n        isGalleryActive : state.gallery.isActive,\r\n        room            : state.room.roomName,\r\n        userId          : state.user.userId,\r\n        isMobile        : state.app.isMobile,\r\n        chatPosition    : state.app.chatPosition,\r\n        isPopUpShow     : state.popup.isPopUpShow\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        /**\r\n         * Change online users count\r\n         *\r\n         * @param count\r\n         */\r\n        changeOnlineCount: (count) => {\r\n            dispatch(appActions.changeOnlineCount(count))\r\n        },\r\n\r\n        /**\r\n         * Accept Cookies\r\n         */\r\n        acceptCookies: () => {\r\n            dispatch(appActions.acceptCookies())\r\n        },\r\n\r\n        /**\r\n         * Change design theme\r\n         *\r\n         * @param theme\r\n         */\r\n        setTheme: (theme) => {\r\n            dispatch(appActions.setTheme(theme))\r\n        },\r\n\r\n        /**\r\n         * Set likes count\r\n         *\r\n         * @param qty\r\n         */\r\n        setLikesCount: (qty) => {\r\n            dispatch(userActions.setLikesCount(qty))\r\n        },\r\n\r\n        /**\r\n         * Join private room\r\n         *\r\n         * @param room\r\n         */\r\n        joinRoom: (room) => {\r\n            dispatch(roomActions.joinRoom(room))\r\n        },\r\n\r\n        /**\r\n         * Set current interlocutor nick\r\n         *\r\n         * @param nick\r\n         */\r\n        setInterlocutorNick: (nick) => {\r\n            dispatch(userActions.setInterlocutorNick(nick))\r\n        },\r\n\r\n        /**\r\n         * Show popup\r\n         *\r\n         * @param type\r\n         */\r\n        showPopUp: (type) => {\r\n            dispatch(popUpActions.showPopUp(type))\r\n        },\r\n\r\n        /**\r\n         * Set sender request data\r\n         *\r\n         * @param data\r\n         */\r\n        setPrivateRequestData: (data) => {\r\n            dispatch(userActions.setPrivateRequestData(data))\r\n        },\r\n\r\n        /**\r\n         * Set device type\r\n         *\r\n         * @param isMobile\r\n         */\r\n        setDeviceType: (isMobile) => {\r\n            dispatch(appActions.setDeviceType(isMobile))\r\n        },\r\n\r\n        /**\r\n         * Switch to private window\r\n         */\r\n        switchToPrivate: () => {\r\n            dispatch(appActions.setChatPosition());\r\n            dispatch(messageActions.setNewMessagesQty(0))\r\n        },\r\n\r\n        /**\r\n         * Set user ban status\r\n         *\r\n         * @param isBlockForce\r\n         */\r\n        setBanStatus: (isBlockForce = false) => {\r\n            dispatch(userActions.setBanStatus(isBlockForce))\r\n        },\r\n\r\n        /**\r\n         * Set noadmin status\r\n         */\r\n        setAsNoAdmin: () => {\r\n            dispatch(userActions.setAsNoAdmin())\r\n        },\r\n\r\n        /**\r\n         * Set connection status\r\n         *\r\n         * @param isConnected\r\n         */\r\n        setConnectionStatus: (isConnected) => {\r\n            dispatch(appActions.setConnectionStatus(isConnected))\r\n        },\r\n\r\n        /**\r\n         * Set user as logged in\r\n         *\r\n         * @param data\r\n         */\r\n        setAsLoggedIn: (data) => {\r\n            dispatch(userActions.setAsLoggedIn(data))\r\n        },\r\n\r\n        /**\r\n         * Set set room is full\r\n         *\r\n         * @param isFull\r\n         */\r\n        setIsFull: (isFull) => {\r\n            dispatch(roomActions.setIsFull(isFull))\r\n        }\r\n    }\r\n};\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(App))\r\n","/**\n * @author Yuriy Matviyuk\n */\nimport './index.css'\nimport * as serviceWorker from './serviceWorker'\nimport App from './components/App'\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport store from './store'\nimport {BrowserRouter} from 'react-router-dom'\nimport {Provider} from 'react-redux'\n\nReactDOM.hydrate((\n    <BrowserRouter>\n        <Provider store={store}>\n            <App/>\n        </Provider>\n    </BrowserRouter>\n), document.getElementById('root'));\nserviceWorker.register();\n\n"],"sourceRoot":""}