{"version":3,"sources":["serviceWorker.js","components/dumb/Aside.jsx","components/dumb/AddEmoji.jsx","components/dumb/UploadPhoto.jsx","reducers/appReducer.js","reducers/roomReducer.js","reducers/userReducer.js","reducers/galleryReducer.js","reducers/popUpReducer.js","reducers/messageReducer.js","store.js","actions/appActions.js","actions/userActions.js","actions/roomActions.js","actions/messageActions.js","socket.js","components/dumb/SendMessage.jsx","components/smart/WriteMessage.jsx","actions/popUpActions.js","components/smart/ChatToolbar.jsx","actions/galleryActions.js","components/smart/ChatMessage.jsx","components/smart/UsersList.jsx","components/smart/SavedList.jsx","components/smart/MessagesWrapper.jsx","components/smart/ChatWindow.jsx","components/dumb/Gallery.jsx","components/dumb/Chat.jsx","components/dumb/Footer.jsx","components/dumb/Header.jsx","components/dumb/Home.jsx","components/dumb/Nav.jsx","components/smart/ContactUs.jsx","components/smart/CreateNick.jsx","components/dumb/LikeInterlocutor.jsx","components/smart/PopUp.jsx","components/dumb/PrivacyPolicy.jsx","components/App.jsx","index.js","images/deleted.jpg"],"names":["isLocalhost","Boolean","window","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","console","log","onUpdate","onSuccess","catch","error","Aside","react_default","a","createElement","AddEmoji","props","className","onClick","showEmojiPicker","UploadPhoto","inputId","type","htmlFor","title","name","id","accept","onChange","imageSelect","initialState","chatPosition","isConnected","isMobile","isNavActive","isNeedRedirect","isInChat","isNotificationsEnabled","onlineCount","theme","appReducer","arguments","length","undefined","action","Object","objectSpread","payload","innerWidth","roomName","isFull","interlocutorId","gender","nick","userId","isNewInPublic","mutedList","likedList","allUsersList","likesCount","isBlocked","isModerator","senderId","senderNick","interlocutorNick","userReducer","isNoAdmin","isActive","activeType","private","images","index","activeIndex","public","galleryReducer","push","url","updatedGallery","isPopUpShow","popUpReducer","text","imageUrl","imagePublicId","IsUploadedImage","quotedMessage","quotedImage","publicColor","newMessagesQty","fakeMessageData","messageReducer","isUploadedImage","isUploaded","message","image","createStore","combineReducers","app","user","room","popup","gallery","applyMiddleware","logger","appActions","toggleMenu","setConnectionStatus","setRedirectionStatus","setIsInChat","setTheme","localStorage","getItem","setItem","changeNotifications","setDeviceType","setChatPosition","changeOnlineCount","count","userActions","setGender","setUserId","changeMutedList","list","setLikesCount","qty","changeLikedList","JSON","stringify","setAsModerator","setAsNoAdmin","setBanStatus","removeItem","setAllUsersList","setInterlocutorNick","setPrivateRequestData","data","setIsNew","setNick","roomActions","joinRoom","setInterlocutorId","setIsFull","leaveRoom","messageActions","setMessageText","sendFakeMessage","setNewMessagesQty","setQuote","quoteData","setImageUrl","setImagePublicId","resetMessageData","setIsUploadedImage","setPublicColor","color","i","Math","floor","random","socket","io","chat","connect","subscribeJoinRoom","off","on","store","dispatch","subscribeUsersCount","leaveChat","emit","getState","destroy","reJoinRoom","joinChat","searchNew","addToPublicList","userData","isVIP","subscribeChangeClients","sendMessage","messageId","round","messageData","key","socketId","document","getElementById","innerHTML","WriteMessage","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","checkKeyType","e","publicMessageData","privateMessageData","preventDefault","typingHandler","target","isTyping","setState","setTimeout","toString","alert","getInputRef","node","inputRef","formatClipboardData","html","clipboardData","getData","imgRegExp","RegExp","imgSrc","setPreviewImgUrl","replace","execCommand","prevProps","refactoredMessage","roomIsFull","isEditable","ref","contentEditable","suppressContentEditableWarning","onInput","onPaste","onKeyPress","Component","popUpActions","showPopUp","hidePopUp","emojiTranslates","search","notfound","skintext","categories","recent","people","nature","foods","activity","places","objects","symbols","flags","custom","ChatToolbar","checkNick","addEventListener","hideEmojiPicker","isShowEmojiPicker","pickerRef","contains","removeEventListener","getPickerRef","addEmoji","emoji","addedEmoji","dangerouslySetInnerHTML","__html","Emoji","set","skin","parse","size","publicMessage","privateMessage","ReactDOMServer","renderToStaticMarkup","removeQuote","_this2","imagePreviewUrl","publicImageUrl","privateImageUrl","publicIsUploadedImg","privateIsUploadedImg","publicQuotedImage","privateQuotedImage","publicQuotedMessage","privateQuotedMessage","toolbarClassName","hasQuote","dist_es","i18n","showPreview","emojiTooltip","onSelect","style","position","top","width","left","display","Fragment","removeImagePreview","src","alt","dumb_UploadPhoto","dumb_AddEmoji","smart_WriteMessage","dumb_SendMessage","quote","galleryActions","addImageToGallery","setGalleryVisibility","setActiveGalleryType","setActiveIndex","removeImageFromGallery","ChatMessage","deleteMessage","removeFromGallery","map","value","imageIndex","deleted","quoteMessage","collapseActions","isShowActions","toggleActions","detectURL","messageText","b","c","likeMessage","isLiked","showGallery","parseInt","dataset","isSameGender","deletedImageUrl","date","Date","hours","getHours","minutes","getMinutes","nickName","label","activeClass","isYourMessage","genderClass","userGender","containerClassName","likeActionClassName","background","data-index","UsersList","blockClient","setVIPStatus","likeUser","newList","muteUser","prevList","indexOf","filter","existId","concat","createList","usePrevData","clientsData","prevData","hasOwnProperty","_ret","isMuted","likeButtonClassName","v","backgroundColor","children","changeNick","classList","toggle","proposePrivateChat","clientsList","receiverNick","receiverId","isToggled","prevState","snapshot","keys","SavedList","removeUser","_loop","isOnline","statusColor","MessagesWrapper","resizeHandler","scrollToLastMessage","likesHandler","messageWrapper","querySelector","appendChild","createRange","createContextualFragment","prevLikesCount","textContent","remove","force","chatTextRef","ceil","scrollTop","clientHeight","scrollHeight","scr","setInterval","scrollTo","clearInterval","refreshChat","isPrivate","messages","sendBotMessage","toggleList","open","chatTextWrapperRef","notify2","play","smart_ChatMessage","getScrollHeight","getRef","getChatTextWrapperRef","saveUser","notify","ssr","Audio","getMessageEvent","isAlien","botMessage","_this3","_this4","saveUserClassName","onScroll","smart_UsersList","smart_SavedList","PureComponent","CLOUDINARY_UPLOAD_PRESET","CLOUDINARY_UPLOAD_URL","ChatWindow","onImageDrop","files","uploadedFile","handleImageUpload","file","request","post","field","end","err","response","body","secure_url","public_id","deleteImage","publicImageId","privateImageId","chatClassName","react_dropzone_dist_es","multiple","activeClassName","disableClick","onDrop","bind","smart_MessagesWrapper","smart_ChatToolbar","hideGallery","activeImageIndex","Chat","onBeforeUnload","onUnload","handleTouchStart","prevPosition","touchStartPosition","nativeEvent","touches","clientX","swipeDistance","handleSwipe","minSwipeLength","handleTouchStop","clearNewMessagesQty","touchPosition","clearAllUsersList","onTouchMove","onTouchStart","onTouchEnd","transition","smart_ChatWindow","isGalleryActive","dumb_Gallery","Redirect","to","Footer","data-href","data-layout","data-size","data-mobile-iframe","href","changeChatPosition","burgerClassName","chatSwitchClassName","unreadMessagesCount","themeSwitchClassName","notificationsSwitchClassName","NavLink","exact","Helmet","content","ContactUs","isEmptyText","mailSendSuccess","mailSendError","emailWasSend","scrollBottom","pageRef","getTextareaRef","textArea","sendMail","getPageRef","placeholder","autoFocus","CreateNick","changeSavingStatus","saveNick","acceptAction","modKey","isValid","checkKey","additionalClassName","_useState","useState","_useState2","slicedToArray","setIsValid","PopUp","acceptPrivateRequest","reject","rejectPrivateRequest","isModal","customContent","smart_CreateNick","dumb_LikeInterlocutor","interlocutor","PrivacyPolicy","App","detectDeviceType","mobileBreakpoint","switchToPrivate","onunload","isRemove","wrapperClassName","dumb_Header","dumb_Aside","dumb_Nav","Switch","Route","path","render","dumb_Chat","component","dumb_Home","dumb_Footer","smart_PopUp","withRouter","isBlockForce","ReactDOM","hydrate","BrowserRouter","es","components_App","URL","process","origin","fetch","contentType","headers","get","status","ready","unregister","reload","checkValidServiceWorker","module","exports"],"mappings":"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","file":"static/js/main.ccde7dd3.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nimport React from 'react'\r\n\r\n/**\r\n * Aside component\r\n *\r\n * @returns {*}\r\n * @constructor\r\n */\r\nconst Aside = () => {\r\n    return (\r\n        <aside></aside>\r\n    )\r\n};\r\n\r\nexport default Aside\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nimport React from 'react'\r\n\r\n/**\r\n * AddEmoji component\r\n *\r\n * @param props\r\n\r\n * @returns {*}\r\n * @constructor\r\n */\r\nconst AddEmoji = (props) => {\r\n    return (\r\n        <span className=\"action add-emoji\" onClick={props.showEmojiPicker}/>\r\n    )\r\n};\r\n\r\nexport default AddEmoji\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nimport React from 'react'\r\n\r\n/**\r\n * UploadPhoto component\r\n *\r\n * @param props\r\n\r\n * @returns {*}\r\n * @constructor\r\n */\r\nconst UploadPhoto = (props) => {\r\n    let inputId = 'upload_' + props.type + '_photo';\r\n\r\n    return (\r\n        <label className='action upload-photo' htmlFor={inputId} title='завантажити зображення'>\r\n            <input type='file'\r\n                   className='upload-photo'\r\n                   name={inputId}\r\n                   id={inputId}\r\n                   accept='image/*'\r\n                   onChange={props.imageSelect}\r\n            />\r\n        </label>\r\n    )\r\n};\r\n\r\nexport default UploadPhoto\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nconst initialState = {\r\n    chatPosition           : 0, // 0 means active chat is private\r\n    isConnected            : true,\r\n    isMobile               : true,\r\n    isNavActive            : false,\r\n    isNeedRedirect         : true,\r\n    isInChat               : false,\r\n    isNotificationsEnabled : true,\r\n    onlineCount            : null,\r\n    theme                  : 'light'\r\n};\r\n\r\nconst appReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case 'TOGGLE_MENU':\r\n            state = {\r\n                ...state,\r\n                isNavActive: !state.isNavActive\r\n            };\r\n            break;\r\n        case 'SET_CHAT_POSITION':\r\n            state = {\r\n                ...state,\r\n                chatPosition: action.payload === null\r\n                    ? state.chatPosition === 0\r\n                        ? -window.innerWidth\r\n                        : 0\r\n                    : action.payload\r\n            };\r\n            break;\r\n        case 'SET_IS_IN_CHAT':\r\n            state = {\r\n                ...state,\r\n                isInChat: action.payload\r\n            };\r\n            break;\r\n        case 'SET_CONNECTION_STATUS':\r\n            state = {\r\n                ...state,\r\n                isConnected: action.payload\r\n            };\r\n            break;\r\n        case 'SET_REDIRECTION_STATUS':\r\n            state = {\r\n                ...state,\r\n                isNeedRedirect: action.payload\r\n            };\r\n            break;\r\n        case 'SET_THEME':\r\n            state = {\r\n                ...state,\r\n                theme: action.payload\r\n            };\r\n            break;\r\n        case 'SET_DEVICE_TYPE':\r\n            state = {\r\n                ...state,\r\n                isMobile: action.payload\r\n            };\r\n            break;\r\n        case 'CHANGE_NOTIFICATIONS':\r\n            state = {\r\n                ...state,\r\n                isNotificationsEnabled: !state.isNotificationsEnabled\r\n            };\r\n            break;\r\n        case 'CHANGE_ONLINE_COUNT':\r\n            state = {\r\n                ...state,\r\n                onlineCount: action.payload\r\n            };\r\n            break;\r\n        default:\r\n            state = {\r\n                ...state\r\n            };\r\n    }\r\n\r\n    return state;\r\n};\r\n\r\nexport default appReducer\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nconst initialState = {\r\n    roomName       : null,\r\n    isFull         : false,\r\n    interlocutorId : null\r\n};\r\n\r\nconst appReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case 'JOIN_ROOM':\r\n            state = {\r\n                ...state,\r\n                roomName: action.payload\r\n            };\r\n            break;\r\n        case 'SET_INTERLOCUTOR_ID':\r\n            state = {\r\n                ...state,\r\n                interlocutorId: action.payload\r\n            };\r\n            break;\r\n        case 'LEAVE_ROOM':\r\n            state = {\r\n                ...state,\r\n                roomName : null,\r\n                isFull   : false\r\n            };\r\n            break;\r\n        case 'SET_IS_FULL':\r\n            state = {\r\n                ...state,\r\n                isFull: action.payload\r\n            };\r\n            break;\r\n        default:\r\n            state = {\r\n                ...state\r\n            };\r\n    }\r\n\r\n    return state;\r\n};\r\n\r\nexport default appReducer\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nconst initialState = {\r\n    gender           : null,\r\n    nick             : null,\r\n    userId           : null,\r\n    isNewInPublic    : true,\r\n    mutedList        : [],\r\n    likedList        : {},\r\n    allUsersList     : {},\r\n    likesCount       : 0,\r\n    isBlocked        : false,\r\n    isModerator      : false,\r\n    senderId         : null,\r\n    senderNick       : null,\r\n    interlocutorNick : null\r\n};\r\n\r\nconst userReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case 'SET_GENDER':\r\n            state = {\r\n                ...state,\r\n                gender: action.payload\r\n            };\r\n            break;\r\n        case 'SET_ALL_USERS_LIST':\r\n            state = {\r\n                ...state,\r\n                allUsersList: action.payload\r\n            };\r\n            break;\r\n        case 'SET_BAN_STATUS':\r\n            state = {\r\n                ...state,\r\n                isBlocked: action.payload\r\n            };\r\n            break;\r\n        case 'SET_AS_NOADMIN':\r\n            state = {\r\n                ...state,\r\n                isNoAdmin: true\r\n            };\r\n            break;\r\n        case 'SET_USER_ID':\r\n            state = {\r\n                ...state,\r\n                userId: action.payload\r\n            };\r\n            break;\r\n        case 'SET_NICK':\r\n            state = {\r\n                ...state,\r\n                nick: action.payload\r\n            };\r\n            break;\r\n        case 'SET_LIKES_COUNT':\r\n            state = {\r\n                ...state,\r\n                likesCount: action.payload\r\n            };\r\n            break;\r\n        case 'CHANGE_MUTED_LIST':\r\n            state = {\r\n                ...state,\r\n                mutedList: action.payload\r\n            };\r\n            break;\r\n        case 'CHANGE_LIKED_LIST':\r\n            state = {\r\n                ...state,\r\n                likedList: action.payload\r\n            };\r\n            break;\r\n        case 'SET_AS_MODERATOR':\r\n            state = {\r\n                ...state,\r\n                isModerator: true\r\n            };\r\n            break;\r\n        case 'SET_IS_NEW':\r\n            state = {\r\n                ...state,\r\n                isNewInPublic: !state.isNewInPublic\r\n            };\r\n            break;\r\n        case 'SET_PRIVATE_REQUEST_DATA':\r\n            state = {\r\n                ...state,\r\n                ...action.payload\r\n            };\r\n            break;\r\n        case 'SET_INTERLOCUTOR_NICK':\r\n            state = {\r\n                ...state,\r\n                interlocutorNick: action.payload\r\n            };\r\n            break;\r\n        default:\r\n            state = {\r\n                ...state\r\n            };\r\n    }\r\n\r\n    return state;\r\n};\r\n\r\nexport default userReducer\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nconst initialState = {\r\n    isActive: false,\r\n    activeType: null,\r\n    private : {\r\n        images : [],\r\n        index  : 0,\r\n        activeIndex: null\r\n    },\r\n    public : {\r\n        images : [],\r\n        index  : 0,\r\n        activeIndex: null\r\n    }\r\n};\r\n\r\nconst galleryReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case 'SET_GALLERY_VISIBILITY' :\r\n            state = {\r\n                ...state,\r\n                isActive: action.payload\r\n            };\r\n            break;\r\n        case 'SET_ACTIVE_GALLERY_TYPE' :\r\n            state = {\r\n                ...state,\r\n                activeType: action.payload\r\n            };\r\n            break;\r\n        case 'ADD_TO_GALLERY':\r\n            const type = action.payload.type;\r\n\r\n            state = {\r\n                ...state,\r\n            };\r\n\r\n            state[type].images.push(action.payload.url);\r\n            state[type].index++;\r\n            break;\r\n        case 'REMOVE_FROM_GALLERY':\r\n            state = {\r\n                ...state\r\n            };\r\n\r\n            state[action.payload.type].images = action.payload.updatedGallery;\r\n            break;\r\n        case 'SET_ACTIVE_INDEX':\r\n            state = {\r\n                ...state\r\n            };\r\n\r\n            state[action.payload.type].activeIndex = action.payload.activeIndex;\r\n            break;\r\n        default:\r\n            state = {\r\n                ...state\r\n            };\r\n    }\r\n\r\n    return state;\r\n};\r\n\r\nexport default galleryReducer\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nconst initialState = {\r\n    isPopUpShow : false,\r\n    type        : null\r\n};\r\n\r\nconst popUpReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case 'SHOW_POPUP' :\r\n            state = {\r\n                ...state,\r\n                type        : action.payload,\r\n                isPopUpShow : true\r\n            };\r\n            break;\r\n        case 'HIDE_POPUP' :\r\n            state = {\r\n                ...state,\r\n                isPopUpShow : false\r\n            };\r\n            break;\r\n        default:\r\n            state = {\r\n                ...state\r\n            };\r\n    }\r\n\r\n    return state;\r\n};\r\n\r\nexport default popUpReducer\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nconst initialState = {\r\n    private: {\r\n        text            : '',\r\n        imageUrl        : null,\r\n        imagePublicId   : null,\r\n        IsUploadedImage : false,\r\n        quotedMessage   : null,\r\n        quotedImage     : null\r\n    },\r\n    public: {\r\n        text            : '',\r\n        imageUrl        : null,\r\n        imagePublicId   : null,\r\n        IsUploadedImage : false,\r\n        quotedMessage   : null,\r\n        quotedImage     : null\r\n    },\r\n    publicColor : null,\r\n    newMessagesQty: 0,\r\n    fakeMessageData: {}\r\n};\r\n\r\nconst messageReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case 'SET_MESSAGE_TEXT':\r\n            state = {\r\n                ...state\r\n            };\r\n\r\n            state[action.payload.type] = {\r\n                ...state[action.payload.type],\r\n                text: action.payload.text\r\n            };\r\n            break;\r\n        case 'SET_IS_UPLOADED_IMAGE':\r\n            state = {\r\n                ...state\r\n            };\r\n\r\n            state[action.payload.type] = {\r\n                ...state[action.payload.type],\r\n                isUploadedImage: action.payload.isUploaded\r\n            };\r\n            break;\r\n        case 'SET_PUBLIC_COLOR':\r\n            state = {\r\n                ...state,\r\n                publicColor: action.payload\r\n            };\r\n            break;\r\n        case 'SET_NEW_MESSAGES_QTY':\r\n            state = {\r\n                ...state,\r\n                newMessagesQty: action.payload\r\n            };\r\n            break;\r\n        case 'SET_FAKE_MESSAGE_DATA':\r\n            state = {\r\n                ...state,\r\n                fakeMessageData: action.payload\r\n            };\r\n            break;\r\n        case 'RESET_MESSAGE_DATA':\r\n            const type = action.payload;\r\n\r\n            state = {\r\n                ...state\r\n            };\r\n\r\n            state[type] = initialState[type];\r\n            break;\r\n        case 'SET_IMAGE_URL':\r\n            state = {\r\n                ...state\r\n            };\r\n\r\n            state[action.payload.type] = {\r\n                ...state[action.payload.type],\r\n                imageUrl: action.payload.imageUrl\r\n            };\r\n            break;\r\n        case 'SET_QUOTE':\r\n            state = {\r\n                ...state\r\n            };\r\n\r\n            state[action.payload.type] = {\r\n                ...state[action.payload.type],\r\n                quotedMessage: action.payload.message,\r\n                quotedImage: action.payload.image,\r\n            };\r\n            break;\r\n        case 'SET_IMAGE_PUBLIC_ID':\r\n            state = {\r\n                ...state\r\n            };\r\n\r\n            state[action.payload.type] = {\r\n                ...state[action.payload.type],\r\n                imagePublicId: action.payload.id\r\n            };\r\n            break;\r\n        default:\r\n            state = {\r\n                ...state\r\n            };\r\n    }\r\n\r\n    return state;\r\n};\r\n\r\nexport default messageReducer\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nimport logger from 'redux-logger'\r\nimport app from './reducers/appReducer'\r\nimport room from './reducers/roomReducer'\r\nimport user from './reducers/userReducer'\r\nimport gallery from './reducers/galleryReducer'\r\nimport popup from './reducers/popUpReducer'\r\nimport message from './reducers/messageReducer'\r\nimport {createStore, combineReducers, applyMiddleware} from 'redux'\r\n\r\nexport default createStore(\r\n    combineReducers({\r\n        app, user, room, message, popup, gallery\r\n    }),\r\n    {},\r\n    applyMiddleware(logger)\r\n);\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nconst appActions = {\r\n    /**\r\n     * Toggle menu\r\n     *\r\n     * @returns {{type: string}}\r\n     */\r\n    toggleMenu: () => {\r\n        return {\r\n            type: 'TOGGLE_MENU'\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Set connection status\r\n     *\r\n     * @param isConnected\r\n     * @returns {{payload: *, type: string}}\r\n     */\r\n    setConnectionStatus: (isConnected) => {\r\n        return {\r\n            type    : 'SET_CONNECTION_STATUS',\r\n            payload : isConnected\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Set redirection to chat status\r\n     *\r\n     * @param isNeedRedirect\r\n     * @returns {{payload: *, type: string}}\r\n     */\r\n    setRedirectionStatus: (isNeedRedirect) => {\r\n        return {\r\n            type    : 'SET_REDIRECTION_STATUS',\r\n            payload : isNeedRedirect\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Set is in chat\r\n     *\r\n     * @param isInChat\r\n     *\r\n     * @returns {{payload: *, type: string}}\r\n     */\r\n    setIsInChat: (isInChat) => {\r\n        return {\r\n            type    : 'SET_IS_IN_CHAT',\r\n            payload : isInChat\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Set chat theme\r\n     *\r\n     * @param theme = null\r\n     *\r\n     * @returns {{type: string}}\r\n     */\r\n    setTheme: (theme = null) => {\r\n        if (!theme) {\r\n            theme = localStorage.getItem('theme') === 'dark' ? 'light' : 'dark'\r\n        }\r\n\r\n        localStorage.setItem('theme', theme);\r\n\r\n        return {\r\n            type    : 'SET_THEME',\r\n            payload : theme\r\n        }\r\n    },\r\n\r\n    /**\r\n     * On/off notifications\r\n     *\r\n     * @returns {{type: string}}\r\n     */\r\n    changeNotifications: () => {\r\n        return {\r\n            type: 'CHANGE_NOTIFICATIONS'\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Set device type\r\n     *\r\n     * @param isMobile\r\n     *\r\n     * @returns {{payload: *, type: string}}\r\n     */\r\n    setDeviceType: (isMobile) => {\r\n        return {\r\n            type    : 'SET_DEVICE_TYPE',\r\n            payload : isMobile\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Set chat position\r\n     *\r\n     * @param position\r\n     *\r\n     * @returns {{payload: string, type: string}}\r\n     */\r\n    setChatPosition: (position = null) => {\r\n        return {\r\n            type    : 'SET_CHAT_POSITION',\r\n            payload : position\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Change online users count\r\n     *\r\n     * @param count\r\n     * @returns {{payload: *, type: string}}\r\n     */\r\n    changeOnlineCount: (count) => {\r\n        return {\r\n            type    : 'CHANGE_ONLINE_COUNT',\r\n            payload : count\r\n        }\r\n    }\r\n};\r\n\r\nexport default appActions;\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nconst userActions = {\r\n    /**\r\n     * Set user gender\r\n     *\r\n     * @param gender\r\n     *\r\n     * @returns {{payload: *, type: string}}\r\n     */\r\n    setGender: (gender) => {\r\n        localStorage.setItem('gender', gender);\r\n        \r\n        return {\r\n            type    : 'SET_GENDER',\r\n            payload : gender\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Set unique user id\r\n     *\r\n     * @param id\r\n     *\r\n     * @returns {{payload: *, type: string}}\r\n     */\r\n    setUserId: (id) => {\r\n        return {\r\n            type    : 'SET_USER_ID',\r\n            payload : id\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Mute/unmute list\r\n     *\r\n     * @param list\r\n     *\r\n     * @returns {{payload: *, type: string}}\r\n     */\r\n    changeMutedList: (list) => {\r\n        return {\r\n            type    : 'CHANGE_MUTED_LIST',\r\n            payload : list\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Set likes count\r\n     *\r\n     * @param qty\r\n     *\r\n     * @returns {{payload: *, type: string}}\r\n     */\r\n    setLikesCount: (qty) => {\r\n        return {\r\n            type    : 'SET_LIKES_COUNT',\r\n            payload : qty\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Like/dislike user\r\n     *\r\n     * @param list\r\n     *\r\n     * @returns {{payload: *, type: string}}\r\n     */\r\n    changeLikedList: (list) => {\r\n        localStorage.setItem('liked_list', JSON.stringify(list));\r\n\r\n        return {\r\n            type    : 'CHANGE_LIKED_LIST',\r\n            payload : list\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Set User As moderator\r\n     *\r\n     * @returns {{type: string}}\r\n     */\r\n    setAsModerator: () => {\r\n        return {\r\n            type: 'SET_AS_MODERATOR'\r\n        }\r\n    },\r\n\r\n    setAsNoAdmin: () => {\r\n        return {\r\n            type: 'SET_AS_NOADMIN'\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Set ban status\r\n     *\r\n     * @param isBlockForce\r\n     * @returns {{payload: boolean, type: string}}\r\n     */\r\n    setBanStatus: (isBlockForce = false) => {\r\n        let isBlocked;\r\n\r\n        if (isBlockForce) {\r\n            isBlocked = true\r\n        } else if (localStorage.getItem('block')) {\r\n            isBlocked = false;\r\n            localStorage.removeItem('block');\r\n        } else {\r\n            isBlocked = true;\r\n            localStorage.setItem('block', 'blocked');\r\n        }\r\n\r\n        return {\r\n            type    : 'SET_BAN_STATUS',\r\n            payload : isBlocked\r\n        }\r\n    },\r\n\r\n    /**\r\n     * set all connected users list\r\n     *\r\n     * @param list\r\n     *\r\n     * @returns {{payload: *, type: string}}\r\n     */\r\n    setAllUsersList: (list) => {\r\n        return {\r\n            type    : 'SET_ALL_USERS_LIST',\r\n            payload : list\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Set interlocutor nick name\r\n     *\r\n     * @param nick\r\n     * @returns {{payload: *, type: string}}\r\n     */\r\n    setInterlocutorNick: (nick) => {\r\n        return {\r\n            type    : 'SET_INTERLOCUTOR_NICK',\r\n            payload : nick\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Set private request senders data\r\n     *\r\n     * @param data: object\r\n     *\r\n     * @returns {{payload: object, type: string}}\r\n     */\r\n    setPrivateRequestData: (data) => {\r\n        return {\r\n            type: 'SET_PRIVATE_REQUEST_DATA',\r\n            payload: data\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Set is new in public\r\n     *\r\n     * @returns {{type: string}}\r\n     */\r\n    setIsNew: () => {\r\n        return {\r\n            type: 'SET_IS_NEW'\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Set user nickName\r\n     *\r\n     * @param nick\r\n     *\r\n     * @returns {{payload: *, type: string}}\r\n     */\r\n    setNick: (nick) => {\r\n        return {\r\n            type: 'SET_NICK',\r\n            payload: nick\r\n        }\r\n    }\r\n};\r\n\r\nexport default userActions;\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nconst roomActions = {\r\n    /**\r\n     * Join private chat roomName\r\n     *\r\n     * @param room\r\n     *\r\n     * @returns {{type: string}}\r\n     */\r\n    joinRoom: (room) => {\r\n        return {\r\n            type: 'JOIN_ROOM',\r\n            payload: room\r\n        }\r\n    },\r\n\r\n    setInterlocutorId: (id) => {\r\n        return {\r\n            type: 'SET_INTERLOCUTOR_ID',\r\n            payload: id\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Set is full room\r\n     *\r\n     * @param isFull\r\n     *\r\n     * @returns {{type: string}}\r\n     */\r\n    setIsFull: (isFull) => {\r\n        return {\r\n            type    : 'SET_IS_FULL',\r\n            payload : isFull\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Leave private chat roomName\r\n     *\r\n     * @returns {{type: string}}\r\n     */\r\n    leaveRoom: () => {\r\n        return {\r\n            type: 'LEAVE_ROOM'\r\n        }\r\n    }\r\n};\r\n\r\nexport default roomActions;\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nconst messageActions = {\r\n    /**\r\n     * Set message text\r\n     *\r\n     * @param text\r\n     *\r\n     * @returns {{payload: *, type: string}}\r\n     */\r\n    setMessageText: (text) => {\r\n        return {\r\n            type    : 'SET_MESSAGE_TEXT',\r\n            payload : text\r\n        }\r\n    },\r\n\r\n    sendFakeMessage: (data) => {\r\n        return {\r\n            type    : 'SET_FAKE_MESSAGE_DATA',\r\n            payload : data\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Set quantity on new messages in not active chat\r\n     *\r\n     * @param qty\r\n     *\r\n     * @returns {{payload: *, type: string}}\r\n     */\r\n    setNewMessagesQty: (qty) => {\r\n        return {\r\n            type    : 'SET_NEW_MESSAGES_QTY',\r\n            payload : qty\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Set Quote\r\n     *\r\n     * @param quoteData\r\n     *\r\n     * @returns {{payload: *, type: string}}\r\n     */\r\n    setQuote: (quoteData) => {\r\n        return {\r\n            type: 'SET_QUOTE',\r\n            payload: quoteData\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Set uploaded image url\r\n     *\r\n     * @param url\r\n     *\r\n     * @returns {{payload: *, type: string}}\r\n     */\r\n    setImageUrl: (url) => {\r\n        return {\r\n            type: 'SET_IMAGE_URL',\r\n            payload: url\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Set uploaded image public id\r\n     *\r\n     * @param id\r\n     *\r\n     * @returns {{payload: *, type: string}}\r\n     */\r\n    setImagePublicId: (id) => {\r\n        return {\r\n            type: 'SET_IMAGE_PUBLIC_ID',\r\n            payload: id\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Reset message data\r\n     *\r\n     * @param type\r\n     *\r\n     * @returns {{payload: *, type: string}}\r\n     */\r\n    resetMessageData: (type) => {\r\n        return {\r\n            type    : 'RESET_MESSAGE_DATA',\r\n            payload : type\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Set is uploaded image\r\n     *\r\n     * @param isUploaded\r\n     *\r\n     * @returns {{payload: *, type: string}}\r\n     */\r\n    setIsUploadedImage: (isUploaded) => {\r\n        return {\r\n            type    : 'SET_IS_UPLOADED_IMAGE',\r\n            payload : isUploaded\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Set public messages color\r\n     *\r\n     * @returns {{payload: string, type: string}}\r\n     */\r\n    setPublicColor: () => {\r\n        let letters = '0123456789',\r\n            color = '#';\r\n\r\n        for (let i = 0; i < 6; i++) {\r\n            color += letters[Math.floor(Math.random() * 10)];\r\n        }\r\n\r\n        return {\r\n            type    : 'SET_PUBLIC_COLOR',\r\n            payload : color\r\n        }\r\n    }\r\n};\r\n\r\nexport default messageActions;\r\n","import io from 'socket.io-client'\r\nimport store from './store'\r\nimport appActions from \"./actions/appActions\"\r\nimport userActions from \"./actions/userActions\"\r\nimport roomActions from \"./actions/roomActions\";\r\nimport messageActions from \"./actions/messageActions\";\r\n\r\nconst socket = {\r\n    /**\r\n     * Socket.io\r\n     */\r\n    io: io,\r\n\r\n    /**\r\n     * Chat namespace\r\n     */\r\n    chat: null,\r\n\r\n    /**\r\n     * Connect to socket\r\n     */\r\n    connect: () => {\r\n        socket.chat = socket.io(/*'localhost:3001'*/);\r\n\r\n        return socket\r\n    },\r\n\r\n    /**\r\n     * Subscribe to joining private room\r\n     *\r\n     * @returns socket object\r\n     */\r\n    subscribeJoinRoom: () => {\r\n        socket.chat.off('joined room').on('joined room', (room) => {\r\n            store.dispatch(roomActions.joinRoom(room))\r\n        });\r\n\r\n        return socket\r\n    },\r\n\r\n    /**\r\n     * Subscribe changing clients count\r\n     *\r\n     * @returns {{io: lookup, chat: null, subscribeJoinRoom: (function()), sendMessage: socket.sendMessage, subscribeUsersCount: (function()), connectToServer: socket.connectToServer}}\r\n     */\r\n    subscribeUsersCount: () => {\r\n        socket.chat.off('change clients count').on('change clients count', (count) => {\r\n            store.dispatch(appActions.changeOnlineCount(count))\r\n        });\r\n\r\n        return socket\r\n    },\r\n\r\n    /**\r\n     * Leave chat (after destroy chat component)\r\n     */\r\n    leaveChat: () => {\r\n        socket.chat.emit('leave chat');\r\n        socket.leaveRoom();\r\n    },\r\n\r\n    /**\r\n     * Leave private room\r\n     */\r\n    leaveRoom: () => {\r\n        const state = store.getState();\r\n\r\n        if (!state.room.roomName || !state.user.gender) {\r\n            return socket;\r\n        }\r\n\r\n        const data = {\r\n            room    : state.room.roomName,\r\n            gender  : state.user.gender,\r\n            destroy : !state.room.isFull\r\n        };\r\n\r\n        socket.chat.emit('leave room', data);\r\n        store.dispatch(roomActions.leaveRoom());\r\n\r\n        return socket\r\n    },\r\n\r\n    /**\r\n     * Try to rejoin private room\r\n     */\r\n    reJoinRoom: () => {\r\n        const state = store.getState();\r\n\r\n        if (state.room.roomName) {\r\n            socket.chat.emit('rejoin room', {\r\n                room   : state.room.roomName,\r\n                gender : state.user.gender,\r\n                isFull : state.room.isFull\r\n            })\r\n        }\r\n\r\n        return socket;\r\n    },\r\n\r\n    /**\r\n     * Join to chat\r\n     */\r\n    joinChat: () => {\r\n        const gender = store.getState().user.gender;\r\n\r\n        if (!gender) {\r\n            return socket\r\n        }\r\n\r\n        socket.chat.emit('join chat', gender);\r\n\r\n        return socket\r\n    },\r\n\r\n    /**\r\n     * Search new interlocutor in private chat\r\n     *\r\n     * @returns {{refreshChat: (function()), io: lookup, chat: null, leaveRoom: (function()), subscribeJoinRoom: (function()), reJoinRoom: socket.reJoinRoom, joinChat: (function()), sendMessage: (function(*)), subscribeUsersCount: (function()), connect: (function())}}\r\n     */\r\n    searchNew: () => {\r\n        if (store.getState().room.roomName) {\r\n            socket.leaveRoom();\r\n        }\r\n\r\n        if (store.getState().user.gender) {\r\n            socket.joinChat();\r\n        }\r\n\r\n        return socket;\r\n    },\r\n\r\n    /**\r\n     * Set user nick name\r\n     *\r\n     * @param nick\r\n     */\r\n    setNick: (nick) => {\r\n        store.dispatch(userActions.setNick(nick));\r\n        socket.addToPublicList();\r\n\r\n        return socket\r\n    },\r\n\r\n    /**\r\n     * Join public add user to public list\r\n     *\r\n     * @returns {{refreshChat: (function()), io: lookup, chat: null, leaveRoom: (function()), subscribeJoinRoom: (function()), reJoinRoom: socket.reJoinRoom, setNick: (function(*=)), joinChat: (function()), addToPublicList: (function()), sendMessage: (function(*)), subscribeUsersCount: (function()), connect: (function())}}\r\n     */\r\n    addToPublicList: () => {\r\n        const state = store.getState(),\r\n              userData = {\r\n                  nick      : state.user.nick,\r\n                  userId    : state.user.userId,\r\n                  isVIP     : state.user.isVIP,\r\n                  isBlocked : state.user.isBlocked,\r\n                  color     : state.message.publicColor\r\n              };\r\n\r\n        if (state.user.isNewInPublic) {\r\n            socket.chat.emit('connect to public chat', userData);\r\n            store.dispatch(userActions.setIsNew());\r\n        } else {\r\n            socket.chat.emit('reconnect to public chat', userData)\r\n        }\r\n\r\n        return socket\r\n    },\r\n\r\n    /**\r\n     * Subscribe for changes users in public chat\r\n     */\r\n    subscribeChangeClients: () => {\r\n        socket.chat.off('change clients').on('change clients', (list) => {\r\n            store.dispatch(userActions.setAllUsersList(list))\r\n        })\r\n    },\r\n\r\n    /**\r\n     * Send message\r\n     *\r\n     * @param message\r\n     */\r\n    sendMessage: (message) => {\r\n        if (message.text || message.imageUrl || message.quotedImage || message.quotedMessage) {\r\n            const messageId = Math.round(100000 + Math.random() * (999999 - 100000)),\r\n                state = store.getState(),\r\n                type = message.type;\r\n\r\n            let messageData = {\r\n                ...message,\r\n                publicColor: type === 'public' && state.message.publicColor,\r\n                messageId: messageId,\r\n                key: messageId,\r\n                gender: state.user.gender,\r\n                nick: state.user.nick,\r\n                isNoAdmin: state.user.isNoAdmin,\r\n                socketId: socket.chat.id,\r\n                room: message.type === 'private' ? state.room.roomName : null\r\n            };\r\n\r\n            if (state.user.isBlocked) {\r\n                messageData.type = message.type;\r\n                store.dispatch(messageActions.sendFakeMessage(messageData))\r\n            } else {\r\n                socket.chat.emit('send ' + type + ' message', messageData);\r\n            }\r\n\r\n            document.getElementById(type + '_message').innerHTML = '';\r\n            store.dispatch(messageActions.resetMessageData(type))\r\n        }\r\n\r\n        return socket\r\n    }\r\n};\r\n\r\nexport default socket;\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nimport React from 'react'\r\nimport socket from \"../../socket\";\r\nimport {connect} from \"react-redux\";\r\n\r\n/**\r\n * SendMessage component\r\n *\r\n * @param props\r\n\r\n * @returns {*}\r\n * @constructor\r\n */\r\nconst SendMessage = (props) => {\r\n    /**\r\n     * Send message\r\n     */\r\n    const sendMessage = () => {\r\n        let type = props.type,\r\n            data = props.messageData[type];\r\n\r\n        socket.sendMessage({...data, type})\r\n    };\r\n\r\n    return (\r\n        <span className=\"action send-message\" onClick={sendMessage}/>\r\n    )\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        messageData : state.message\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps)(SendMessage)\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nimport React, {Component} from 'react'\r\nimport socket from \"../../socket\";\r\nimport messageActions from \"../../actions/messageActions\";\r\nimport {connect} from \"react-redux\";\r\n\r\n/**\r\n * WriteMessage component\r\n */\r\nclass WriteMessage extends Component {\r\n    /**\r\n     * WriteMessage Constructor\r\n     *\r\n     * @param props\r\n     */\r\n    constructor(props) {\r\n        super(props);\r\n        \r\n        this.state = {\r\n            isTyping: false\r\n        };\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        if (this.props.refactoredMessage !== prevProps.refactoredMessage) {\r\n            this.inputRef.innerHTML = this.props.refactoredMessage\r\n        }\r\n    }\r\n\r\n    checkKeyType = (e) => {\r\n        if (e.key !== 'Enter') {\r\n            return\r\n        }\r\n\r\n        const type = this.props.type,\r\n              data = type === 'public' ? this.props.publicMessageData : this.props.privateMessageData;\r\n\r\n        e.preventDefault();\r\n        socket.sendMessage({...data, type});\r\n    };\r\n\r\n    typingHandler = (e) => {\r\n        let text = e.target.innerHTML;\r\n\r\n        if (this.props.type === 'private' && !this.state.isTyping) {\r\n            socket.chat.emit('typing', this.props.room);\r\n            this.setState({\r\n                isTyping: true\r\n            });\r\n\r\n            setTimeout(() => {\r\n                this.setState({\r\n                    isTyping: false\r\n                });\r\n            }, 2500);\r\n        }\r\n\r\n        if (text.toString().length >= 1000) {\r\n            alert('Ваше повідомлення надто довге. Будь ласка, зменшіть кількість символів');\r\n            return false\r\n        }\r\n\r\n        this.props.setMessageText({type: this.props.type, text})\r\n    };\r\n\r\n    /**\r\n     * Get message input ref\r\n     *\r\n     * @param node\r\n     */\r\n    getInputRef = (node) => {\r\n        this.inputRef = node\r\n    };\r\n    /**\r\n     * Format clipboard data before paste\r\n     *\r\n     * @param e\r\n     */\r\n    formatClipboardData = (e) => {\r\n        e.preventDefault();\r\n        let html = e.clipboardData.getData(\"text/html\"),\r\n            imgRegExp = new RegExp(/(<img src=\")(.*?)(?=\\s*\")/),\r\n            imgSrc = html.match(imgRegExp);\r\n        if (imgSrc) {\r\n            //get image url\r\n            this.props.setPreviewImgUrl(imgSrc[0].replace('<img src=\"', ''));\r\n        }\r\n\r\n        let text = e.clipboardData.getData(\"text/plain\");\r\n        document.execCommand(\"insertHTML\", false, text);\r\n    };\r\n\r\n    /**\r\n     * Render WriteMessage component\r\n     */\r\n    render() {\r\n        const type = this.props.type,\r\n            roomIsFull = this.props.isFull,\r\n            isConnected = this.props.isConnected,\r\n            isEditable = (roomIsFull && isConnected) || (type === 'public' && isConnected && typeof this.props.nick === \"string\");\r\n\r\n        return (\r\n            <span className=\"action write-message\">\r\n            <div className=\"message-area\">\r\n                <p  className=\"message-input\"\r\n                    ref={this.getInputRef}\r\n                    contentEditable={isEditable}\r\n                    id={this.props.type + '_message'}\r\n                    suppressContentEditableWarning={true}\r\n                    onInput={this.typingHandler}\r\n                    onPaste={this.formatClipboardData}\r\n                    onKeyPress={this.checkKeyType}/>\r\n            </div>\r\n        </span>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        privateMessageData : state.message.private,\r\n        publicMessageData  : state.message.public,\r\n        isFull             : state.room.isFull,\r\n        nick               : state.user.nick,\r\n        room               : state.room.roomName,\r\n        isConnected        : state.app.isConnected\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        /**\r\n         * Set message text\r\n         *\r\n         * @param text\r\n         */\r\n        setMessageText: (text) => {\r\n            dispatch(messageActions.setMessageText(text))\r\n        }\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(WriteMessage)\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nconst popUpActions = {\r\n    /**\r\n     * Show popup\r\n     *\r\n     * @param type\r\n     *\r\n     * @returns {{payload: *, type: string}}\r\n     */\r\n    showPopUp: (type) => {\r\n        return {\r\n            type    : 'SHOW_POPUP',\r\n            payload : type\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Hide popup\r\n     *\r\n     * @returns {{type: string}}\r\n     */\r\n    hidePopUp: () => {\r\n        return {\r\n            type: 'HIDE_POPUP'\r\n        }\r\n    }\r\n};\r\n\r\nexport default popUpActions;\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nimport AddEmoji from '../dumb/AddEmoji'\r\nimport UploadPhoto from '../dumb/UploadPhoto'\r\nimport React, {Component} from 'react'\r\nimport ReactDOMServer from 'react-dom/server';\r\nimport 'emoji-mart/css/emoji-mart.css'\r\nimport { Picker } from 'emoji-mart'\r\nimport { Emoji } from 'emoji-mart'\r\nimport SendMessage from '../dumb/SendMessage'\r\nimport WriteMessage from './WriteMessage'\r\nimport {connect} from \"react-redux\";\r\nimport popUpActions from \"../../actions/popUpActions\";\r\nimport socket from \"../../socket\";\r\nimport messageActions from \"../../actions/messageActions\";\r\nconst emojiTranslates = {\r\n    search: 'Пошук',\r\n    notfound: 'Смайл не знайдено',\r\n    skintext: 'Виберіть тон шкіри за замовчуванням',\r\n    categories: {\r\n        search: 'Результати пошуку',\r\n        recent: 'Нещодавні',\r\n        people: 'Емоції та люди',\r\n        nature: 'Тварини та природа',\r\n        foods: 'Їжа та напої',\r\n        activity: 'Діяльність',\r\n        places: 'Подорожі та місця',\r\n        objects: 'Предмети',\r\n        symbols: 'Символи',\r\n        flags: 'Прапори',\r\n        custom: 'Користувацькі',\r\n    }\r\n};\r\n\r\n/**\r\n * ChatToolbar component\r\n */\r\nclass ChatToolbar extends Component {\r\n    /**\r\n     * ChatToolbar Constructor\r\n     *\r\n     * @param props\r\n     */\r\n    constructor(props) {\r\n        super(props);\r\n        \r\n        this.state = {\r\n            isTyping          : false,\r\n            isShowEmojiPicker : false,\r\n            refactoredMessage : null\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Component mounted in DOM\r\n     */\r\n    componentDidMount() {\r\n        socket.chat.on('show typing', () => {\r\n            this.setState({\r\n                isTyping: true\r\n            });\r\n\r\n            setTimeout(() => {\r\n                this.setState({\r\n                    isTyping: false\r\n                });\r\n            }, 2500);\r\n        });\r\n    }\r\n\r\n    checkNick = (e) => {\r\n        if (this.props.type === 'private') {\r\n            return\r\n        } else if (!this.props.nick) {\r\n            e.preventDefault();\r\n            this.props.showPopUp('CREATE_NICK')\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Display Emoji picker block after click on emoji button\r\n     */\r\n    showEmojiPicker = () => {\r\n        document.addEventListener('click', this.hideEmojiPicker);\r\n        document.addEventListener('tap', this.hideEmojiPicker);\r\n\r\n        this.setState({\r\n            isShowEmojiPicker: true\r\n        })\r\n    };\r\n\r\n    /**\r\n     * Hide emoji picker\r\n     *\r\n     * @param e\r\n     */\r\n    hideEmojiPicker = (e) => {\r\n        if (this.pickerRef && !this.pickerRef.contains(e.target)) {\r\n            this.setState({\r\n                isShowEmojiPicker: false\r\n            });\r\n\r\n            document.removeEventListener('click', this.hideEmojiPicker);\r\n            document.removeEventListener('tap', this.hideEmojiPicker);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Get Emoji picker wrapper ref\r\n     *\r\n     * @param node\r\n     */\r\n    getPickerRef = (node) => {\r\n        this.pickerRef = node\r\n    };\r\n\r\n    /**\r\n     * Add emoji to the message input\r\n     *\r\n     * @param emoji\r\n     */\r\n    addEmoji = (emoji) => {\r\n        const addedEmoji =\r\n            <span className=\"emoji-wrapper\"\r\n                  contentEditable={false}\r\n                  dangerouslySetInnerHTML={{\r\n                      __html: Emoji({\r\n                        html: true,\r\n                        set: 'apple',\r\n                        skin: JSON.parse(localStorage.getItem('emoji-mart.skin')),\r\n                        emoji: emoji.id,\r\n                        size: 20\r\n                      })\r\n                }}\r\n            />;\r\n        let message = this.props.type === 'public' ? this.props.publicMessage : this.props.privateMessage,\r\n            refactoredMessage = message + ReactDOMServer.renderToStaticMarkup(addedEmoji) + '&nbsp;';\r\n\r\n        this.setState({refactoredMessage});\r\n        this.props.setMessageText(this.props.type, refactoredMessage)\r\n    };\r\n\r\n    /**\r\n     * Remove quote\r\n     */\r\n    removeQuote = () => {\r\n        this.props.setQuote({type: this.props.type})\r\n    };\r\n\r\n    /**\r\n     * ComponentWillUnmount method\r\n     */\r\n    componentWillUnmount() {\r\n        document.removeEventListener('click', this.hideEmojiPicker);\r\n        document.removeEventListener('tap', this.hideEmojiPicker);\r\n    }\r\n\r\n    /**\r\n     * Render ChatToolbar component\r\n     */\r\n    render() {\r\n        const type = this.props.type,\r\n              roomIsFull = this.props.isFull,\r\n              isConnected = this.props.isConnected,\r\n              imagePreviewUrl = type === 'public' ? this.props.publicImageUrl : this.props.privateImageUrl,\r\n              isUploadedImage = type === 'public' ? this.props.publicIsUploadedImg : this.props.privateIsUploadedImg,\r\n              quotedImage = type === 'public' ? this.props.publicQuotedImage : this.props.privateQuotedImage,\r\n              quotedMessage = type === 'public' ? this.props.publicQuotedMessage : this.props.privateQuotedMessage,\r\n              isActive = (roomIsFull && isConnected) || (type === 'public'),\r\n              toolbarClassName = isActive ? 'chat-actions-toolbar' : 'chat-actions-toolbar disabled',\r\n              hasQuote = quotedMessage || quotedImage;\r\n\r\n        return (\r\n            <div className={toolbarClassName}\r\n                 onClick={this.checkNick}\r\n                 title={isActive ? '' : 'дії з чатом тимчасово заблоковані'}>\r\n                {this.state.isTyping && type === 'private' &&\r\n                    <span className=\"write-animation\">анонім друкує повідомлення</span>}\r\n                {this.state.isShowEmojiPicker &&\r\n                <div ref={this.getPickerRef}>\r\n                    <Picker set='apple'\r\n                            i18n={emojiTranslates}\r\n                            showPreview={false}\r\n                            color={this.props.theme === 'light' ? '#2F2F2F' : '#E3E3E3'}\r\n                            emojiTooltip={true}\r\n                            onSelect={this.addEmoji}\r\n                            title='Оберіть смайл' emoji='point_up'\r\n                            style={{position: 'absolute', top: '-295px', width: 'calc(100% - 10px)', left: '5px', display: 'block'}}\r\n                    />\r\n                </div>}\r\n                {isUploadedImage &&\r\n                    <div className=\"image-preview\">\r\n                        <div className=\"preview-wrapper\">\r\n                        {imagePreviewUrl ?\r\n                            <React.Fragment>\r\n                                <span className=\"remove-preview\" onClick={this.props.removeImagePreview}/>\r\n                                <img src={imagePreviewUrl} alt=\"preview\"/>\r\n                            </React.Fragment> :\r\n                            <div className=\"image-preview-loader\">\r\n                                <span className=\"loader\"/>\r\n                            </div>}\r\n                        </div>\r\n                     </div>}\r\n                {hasQuote &&\r\n                <span className=\"quoted-message\">\r\n                        <span className=\"quote-wrapper\">\r\n                            <span className=\"remove-quote\" onClick={this.removeQuote}/>\r\n                            {quotedMessage && <span className=\"text\" dangerouslySetInnerHTML={{__html: quotedMessage}}/>}\r\n                            {quotedImage && <img src={quotedImage} alt=\"\"/>}\r\n                        </span>\r\n                    </span>}\r\n                <div className='actions-wrapper'>\r\n                    <UploadPhoto type={type} imageSelect={this.props.imageSelect}/>\r\n                    <AddEmoji type={type} showEmojiPicker={this.showEmojiPicker}/>\r\n                    <WriteMessage type={type} refactoredMessage={this.state.refactoredMessage}/>\r\n                    <SendMessage type={type}/>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        isFull               : state.room.isFull,\r\n        isConnected          : state.app.isConnected,\r\n        publicMessage        : state.message.public.text,\r\n        privateMessage       : state.message.private.text,\r\n        privateQuotedMessage : state.message.private.quotedMessage,\r\n        publicQuotedMessage  : state.message.public.quotedMessage,\r\n        privateQuotedImage   : state.message.private.quotedImage,\r\n        publicQuotedImage    : state.message.public.quotedImage,\r\n        privateImageUrl      : state.message.private.imageUrl,\r\n        publicIsUploadedImg  : state.message.public.isUploadedImage,\r\n        privateIsUploadedImg : state.message.private.isUploadedImage,\r\n        publicImageUrl       : state.message.public.imageUrl,\r\n        theme                : state.app.theme,\r\n        nick                 : state.user.nick\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        /**\r\n         * Show popup\r\n         *\r\n         * @param type\r\n         */\r\n        showPopUp: (type) => {\r\n            dispatch(popUpActions.showPopUp(type))\r\n        },\r\n\r\n        /**\r\n         * Set message text\r\n         *\r\n         * @param type\r\n         * @param text\r\n         */\r\n        setMessageText: (type, text) => {\r\n            dispatch(messageActions.setMessageText({type, text}))\r\n        },\r\n\r\n        /**\r\n         * Set quote\r\n         *\r\n         * @param quote\r\n         */\r\n        setQuote: (quote) => {\r\n            dispatch(messageActions.setQuote(quote))\r\n        }\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ChatToolbar)\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nconst galleryActions = {\r\n    /**\r\n     * Add new image to gallery\r\n     *\r\n     * @param data\r\n     *\r\n     * @returns {{payload: object, type: string}}\r\n     */\r\n    addImageToGallery: (data) => {\r\n        return {\r\n            type    : 'ADD_TO_GALLERY',\r\n            payload : data\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Show/hide image gallery\r\n     *\r\n     * @param isActive\r\n     *\r\n     * @returns {{payload: *, type: string}}\r\n     */\r\n    setGalleryVisibility: (isActive) => {\r\n        return {\r\n            type    : 'SET_GALLERY_VISIBILITY',\r\n            payload : isActive\r\n        }\r\n    },\r\n\r\n    setActiveGalleryType: (type) => {\r\n        return {\r\n            type    : 'SET_ACTIVE_GALLERY_TYPE',\r\n            payload : type\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Set active image index\r\n     *\r\n     * @param data\r\n     *\r\n     * @returns {{payload: *, type: string}}\r\n     */\r\n    setActiveIndex: (data) => {\r\n        return {\r\n            type: 'SET_ACTIVE_INDEX',\r\n            payload: data\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Remove image from gallery\r\n     *\r\n     * @param data\r\n     * @returns {{payload: *, type: string}}\r\n     */\r\n    removeImageFromGallery: (data) => {\r\n        return {\r\n            type: 'REMOVE_FROM_GALLERY',\r\n            payload: data\r\n        }\r\n    }\r\n};\r\n\r\nexport default galleryActions;\r\n","import React, {Component} from 'react'\r\nimport socket from \"../../socket\";\r\nimport {connect} from \"react-redux\";\r\nimport deleted from '../../images/deleted.jpg'\r\nimport messageActions from \"../../actions/messageActions\";\r\nimport galleryActions from \"../../actions/galleryActions\";\r\n\r\n/**\r\n * Message output component\r\n */\r\nclass ChatMessage extends Component {\r\n    /**\r\n     * ChatMessage Constructor\r\n     *\r\n     * @param props\r\n     */\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            name: null,\r\n            isSameGender: false,\r\n            messageText: null,\r\n            deletedImageUrl: '/images/deleted.jpg',\r\n            isShowActions: false,\r\n            date: null,\r\n            isLiked: false\r\n        };\r\n\r\n        if (props.image) {\r\n            this.state.imageIndex = props.gallery[props.type].images.length\r\n        }\r\n    }\r\n\r\n    /**\r\n     * ComponentDidMount method\r\n     */\r\n    componentDidMount() {\r\n        this.detectURL(this.props.message);\r\n\r\n        let date = new Date(),\r\n            hours = date.getHours() < 10 ? \"0\" + date.getHours() : date.getHours(),\r\n            minutes = date.getMinutes() < 10 ? \"0\" + date.getMinutes() : date.getMinutes(),\r\n            name;\r\n\r\n        if (this.props.type === 'public') {\r\n            name = this.props.nickName\r\n        } else if (this.props.label === 'bot') {\r\n            name = 'Бот'\r\n        } else if (this.props.label === 'anon') {\r\n            name = 'Анонім'\r\n        } else {\r\n            name = 'Ви'\r\n        }\r\n\r\n        this.setState({\r\n            date: !this.state.date ? hours + ':' + minutes : this.state.date,\r\n            name: name\r\n        })\r\n    }\r\n\r\n    /**\r\n     * Delete message action\r\n     */\r\n    deleteMessage = () => {\r\n        if (this.props.image) {\r\n            this.removeFromGallery();\r\n        }\r\n\r\n        socket.chat.emit('delete message', this.props.messageId)\r\n    };\r\n\r\n    /**\r\n     * Remove image from gallery\r\n     */\r\n    removeFromGallery = () => {\r\n        let type = this.props.type,\r\n            gallery,\r\n            updatedGallery;\r\n\r\n        gallery = this.props.gallery[type].images;\r\n        updatedGallery = gallery.map((value, index) => {\r\n            return index === this.state.imageIndex ? deleted : value\r\n        });\r\n\r\n        this.props.removeImageFromGallery({type, updatedGallery});\r\n    };\r\n\r\n    /**\r\n     * Quote message action\r\n     */\r\n    quoteMessage = () => {\r\n        this.props.setQuote({message: this.props.message, image: this.props.image, type: this.props.type})\r\n    };\r\n\r\n    /**\r\n     * Hide message actions\r\n     */\r\n    collapseActions = () => {\r\n        this.setState({\r\n            isShowActions: false\r\n        });\r\n\r\n        document.removeEventListener('click', this.collapseActions);\r\n        document.removeEventListener('tap', this.collapseActions);\r\n    };\r\n\r\n    /**\r\n     * Toggle actions\r\n     */\r\n    toggleActions = () => {\r\n        document.addEventListener('click', this.collapseActions);\r\n        document.addEventListener('tap', this.collapseActions);\r\n        this.setState({\r\n            isShowActions: true\r\n        })\r\n    };\r\n\r\n    /**\r\n     * Url usage detection\r\n     *\r\n     * @param text\r\n     * @returns {*}\r\n     */\r\n    detectURL = (text) => {\r\n        let urlRegex = /((([^;\"]https?:\\/\\/)|(^https?:\\/\\/)|(www\\.))[^\\s]+)/g;\r\n        this.setState({\r\n            messageText: text.replace(urlRegex, (url,b,c) => {\r\n                let url2 = (c === 'www.') ?  'http://' +url : url;\r\n                return '<a href=\"' +url2+ '\" target=\"_blank\">' + url + '</a>';\r\n            })\r\n        })\r\n    };\r\n\r\n    /**\r\n     * Likes handler\r\n     */\r\n    likeMessage = () => {\r\n        this.setState({\r\n            isLiked: !this.state.isLiked\r\n        }, () => {\r\n            socket.chat.emit('like message', {\r\n                id: this.props.messageId,\r\n                isLiked: this.state.isLiked\r\n            })\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Show images gallery\r\n     *\r\n     * @param e\r\n     */\r\n    showGallery = (e) => {\r\n        let type = this.props.type;\r\n\r\n        this.props.setActiveIndex({type, activeIndex: parseInt(e.target.dataset.index, 10)});\r\n        this.props.showGallery(type);\r\n    };\r\n\r\n    /**\r\n     * Render component method\r\n     *\r\n     * @returns {*}\r\n     */\r\n    render() {\r\n        let activeClass = this.state.isShowActions ? \" active\" : \"\",\r\n            isYourMessage = this.props.socketId === socket.chat.id,\r\n            genderClass = this.props.gender === this.props.userGender ? ' same' : ' anon',\r\n            label = isYourMessage ? 'you' : '',\r\n            hasQuote = this.props.quotedMessage || this.props.quotedImage,\r\n            containerClassName = \"message-container \" + this.props.gender + \" \" + label + activeClass + genderClass,\r\n            likeActionClassName = this.state.isLiked\r\n                ? \"message-action like-message liked\"\r\n                : \"message-action like-message\";\r\n\r\n        return (\r\n            <p className={containerClassName} id={this.props.messageId}>\r\n                {isYourMessage\r\n                    ? <span className=\"message-action delete-message\"\r\n                            onClick={this.deleteMessage}\r\n                            title=\"видалити повідомлення\"\r\n                    />\r\n                    : <span className={likeActionClassName}\r\n                            onClick={this.likeMessage}\r\n                            title={this.state.isLiked ? 'мені не подобається' : 'мені подобається'}\r\n                    />}\r\n                {\r\n                    <span className=\"message-action quote-message\"\r\n                          onClick={this.quoteMessage}\r\n                          title=\"переслати повідомлення\"\r\n                    />\r\n                }\r\n                <span onClick={this.props.label !== 'bot' ? this.toggleActions : () => {}}\r\n                      className={this.props.isNoAdmin ? \"message vip\" : \"message\"}\r\n                      style={this.props.publicColor ? {background: this.props.publicColor} : {}}>\r\n                    {this.state.messageText &&\r\n                        <span className=\"message-text\"\r\n                            dangerouslySetInnerHTML={{__html: this.state.messageText}}\r\n                        />\r\n                    }\r\n                    {this.props.image &&\r\n                        <span className=\"message-image\">\r\n                            <img src={this.props.image}\r\n                                 onClick={this.showGallery}\r\n                                 data-index={this.state.imageIndex}\r\n                                 alt=\"\"/>\r\n                        </span>}\r\n                    {hasQuote &&\r\n                        <span className=\"quote\">\r\n                            {this.props.quotedMessage &&\r\n                                <span className=\"text\"\r\n                                      dangerouslySetInnerHTML={{__html: this.props.quotedMessage}}\r\n                                />}\r\n                            {this.props.quotedImage && <img src={this.props.quotedImage} alt=\"\"/>}\r\n                        </span>}\r\n                </span>\r\n                <span className=\"time\">{this.state.name + \", \" + this.state.date}</span>\r\n            </p>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        nick       : state.user.nick,\r\n        userGender : state.user.gender,\r\n        gallery    : state.gallery\r\n    }\r\n};\r\n\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        /**\r\n         * Set quote\r\n         *\r\n         * @param quote\r\n         */\r\n        setQuote: (quote) => {\r\n            dispatch(messageActions.setQuote(quote))\r\n        },\r\n\r\n        /**\r\n         * Set active image index\r\n         *\r\n         * @param data\r\n         */\r\n        setActiveIndex: (data) => {\r\n            dispatch(galleryActions.setActiveIndex(data))\r\n        },\r\n\r\n        /**\r\n         * Show image gallery\r\n         *\r\n         * @param type\r\n         */\r\n        showGallery: (type) => {\r\n            dispatch(galleryActions.setGalleryVisibility(true));\r\n            dispatch(galleryActions.setActiveGalleryType(type))\r\n        },\r\n\r\n        /**\r\n         * Remove image from gallery\r\n         *\r\n         * @param data\r\n         */\r\n        removeImageFromGallery: (data) => {\r\n            dispatch(galleryActions.removeImageFromGallery(data))\r\n        },\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ChatMessage)\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nimport appActions from \"../../actions/appActions\";\r\nimport popUpActions from \"../../actions/popUpActions\";\r\nimport React, {Component} from 'react'\r\nimport socket from '../../socket'\r\nimport userActions from \"../../actions/userActions\";\r\nimport {connect} from \"react-redux\";\r\n\r\n/**\r\n * UsersList component\r\n */\r\nclass UsersList extends Component {\r\n    /**\r\n     * UsersList Constructor\r\n     *\r\n     * @param props\r\n     */\r\n    constructor(props) {\r\n        super(props);\r\n        \r\n        this.state = {\r\n            clientsList: [],\r\n            isToggled: false,\r\n            prevData: []\r\n        };\r\n    }\r\n\r\n    /**\r\n     * ComponentDidMount method\r\n     */\r\n    componentDidMount() {\r\n        if(localStorage.getItem('status') === 'moderator') {\r\n            this.props.setAsModerator();\r\n            this.createList(this.state.prevData, true)\r\n        }\r\n\r\n        const likedList = localStorage.getItem('liked_list');\r\n\r\n        if (likedList) {\r\n            this.props.changeLikedList(JSON.parse(likedList))\r\n        }\r\n\r\n        socket.subscribeChangeClients();\r\n\r\n        socket.chat.off('list update force').on('list update force', (data) => {\r\n            this.createList(data)\r\n        })\r\n    };\r\n\r\n    /**\r\n     * Unsubscribe from events\r\n     */\r\n    componentWillUnmount() {\r\n        socket.chat.off('change clients')\r\n    }\r\n\r\n    /**\r\n     * Block client in public chat\r\n     *\r\n     * @param id\r\n     */\r\n    blockClient = (id) => {\r\n        socket.chat.emit('block user', id)\r\n    };\r\n\r\n    /**\r\n     * Set VIP status\r\n     *\r\n     * @param id\r\n     */\r\n    setVIPStatus = (id) => {\r\n        socket.chat.emit('set vip status', id)\r\n    };\r\n\r\n    /**\r\n     * Component did update\r\n     *\r\n     * @param prevProps\r\n     * @param prevState\r\n     * @param snapshot\r\n     */\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const prevData = this.state.prevData;\r\n\r\n        if (prevProps.mutedList.length !== this.props.mutedList.length) {\r\n            this.createList(prevData, true)\r\n        }\r\n\r\n        if (prevProps.nick !== this.props.nick && prevData[this.props.userId]) {\r\n            socket.chat.emit('changed nick', {\r\n                nick: this.props.nick,\r\n                userId: this.props.userId\r\n            });\r\n        }\r\n\r\n        if (Object.keys(prevProps.likedList).length !== Object.keys(this.props.likedList).length) {\r\n            this.createList(prevData, true)\r\n        }\r\n\r\n        if (prevProps.likesCount !== this.props.likesCount) {\r\n            this.createList(prevData, true)\r\n        }\r\n\r\n        if (Object.keys(prevProps.allUsersList).length !== Object.keys(this.props.allUsersList).length) {\r\n            this.createList(this.props.allUsersList)\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Like user Handler\r\n     *\r\n     * @param data\r\n     */\r\n    likeUser = (data) => {\r\n        const userId = data.userId;\r\n\r\n        let newList = {...this.props.likedList};\r\n\r\n        if (newList[userId]) {\r\n            newList = delete newList[userId];\r\n        } else {\r\n            newList[userId] = data;\r\n        }\r\n\r\n        this.props.changeLikedList(newList)\r\n    };\r\n\r\n    /**\r\n     * Mute user in public chat\r\n     *\r\n     * @param id\r\n     */\r\n    muteUser = (id) => {\r\n        const prevList = this.props.mutedList;\r\n\r\n        this.props.changeMutedList(prevList.indexOf(id) !== -1\r\n            ? prevList.filter((existId) => existId !== id)\r\n            : prevList.concat(id))\r\n    };\r\n\r\n    /**\r\n     * Create list of clients\r\n     *\r\n     * @param data\r\n     * @param usePrevData\r\n     */\r\n    createList = (data, usePrevData = false) => {\r\n        let clientsData = [];\r\n\r\n        if (!usePrevData) {\r\n            this.setState({\r\n                prevData: data\r\n            });\r\n        }\r\n\r\n        for (let userId in data) {\r\n            if (data.hasOwnProperty(userId)) {\r\n                let isMuted = this.props.mutedList.indexOf(data[userId].socketId) !== -1,\r\n                    likeButtonClassName = this.props.likedList[userId]\r\n                        ? 'liked like-user client-action' : 'like-user client-action',\r\n                    userData = data[userId];\r\n\r\n                if (!userData.nick) {\r\n                    return\r\n                }\r\n\r\n                clientsData.push(\r\n                    <li key={userId}>\r\n                        <span className=\"client-color\" style={{backgroundColor: userData.color}}/>\r\n                        <span className=\"name\">{userData.nick}</span>\r\n                        <span className='user-actions'>\r\n                            {userData.socketId !== socket.chat.id &&\r\n                            <span className={likeButtonClassName}\r\n                                  onClick={() => {this.likeUser(userData)}}>\r\n                                {this.props.likesCount !== 0\r\n                                && <span className='likes-count' children={this.props.likesCount}/>}\r\n                            </span>}\r\n                            {/*{this.props.isModerator &&\r\n                            <span\r\n                                className={userData.isVIP ? 'set-vip-status client-action vip' : 'set-vip-status client-action'}\r\n                                title='Надати VIP статус'\r\n                                onClick={(e) => {\r\n                                    e.target.classList.toggle('vip');\r\n                                    this.setVIPStatus(userData.id)\r\n                                }}\r\n                            />}*/}\r\n                            {userData.socketId === socket.chat.id &&\r\n                            <span className='client-action change-nick' onClick={this.props.changeNick}/>}\r\n                            {this.props.isModerator &&\r\n                            userData.socketId !== socket.chat.id &&\r\n                            <span\r\n                                className={userData.isBlocked ? 'ban-client client-action blocked' : 'ban-client client-action'}\r\n                                title='Заблокувати'\r\n                                onClick={(e) => {\r\n                                    e.target.classList.toggle('blocked');\r\n                                    this.blockClient(userData.socketId)\r\n                                }}\r\n                            />}\r\n                            {userData.socketId !== socket.chat.id &&\r\n                            <React.Fragment>\r\n                            <span className='start-chat client-action'\r\n                                  title='розпочати приватний чат'\r\n                                  onClick={() => {\r\n                                      this.proposePrivateChat(userData.nick, userData.socketId)\r\n                                  }}\r\n                            />\r\n                                <span className={isMuted ? 'mute-user client-action muted' : 'mute-user client-action'}\r\n                                      title='ігнорувати користувача'\r\n                                      onClick={() => {\r\n                                          this.muteUser(userData.socketId)\r\n                                      }}\r\n                                />\r\n                            </React.Fragment>}\r\n                        </span>\r\n                    </li>\r\n                )\r\n            }\r\n        }\r\n\r\n        this.setState({\r\n            clientsList: clientsData\r\n        })\r\n    };\r\n\r\n    /**\r\n     * Start private chat\r\n     *\r\n     * @param receiverNick\r\n     * @param receiverId\r\n     */\r\n    proposePrivateChat = (receiverNick, receiverId) => {\r\n        socket.chat.emit('private request', {\r\n            receiverNick,\r\n            receiverId,\r\n            senderNick: this.props.nick,\r\n            senderId: socket.chat.id\r\n        })\r\n    };\r\n\r\n    /**\r\n     * Render UsersList component\r\n     */\r\n    render() {\r\n        return (\r\n            <div className=\"users-list-wrapper\">\r\n                <ul className='users-list'>\r\n                    {this.state.clientsList}\r\n                </ul>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        nick         : state.user.nick,\r\n        mutedList    : state.user.mutedList,\r\n        allUsersList : state.user.allUsersList,\r\n        isModerator  : state.user.isModerator,\r\n        userId       : state.user.userId,\r\n        likesCount   : state.user.likesCount,\r\n        likedList    : state.user.likedList\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        /**\r\n         * Show popup\r\n         *\r\n         * @param type\r\n         */\r\n        showPopUp: (type) => {\r\n            dispatch(appActions.showPopUp(type))\r\n        },\r\n\r\n        /**\r\n         * Change nick name\r\n         */\r\n        changeNick: () => {\r\n            localStorage.removeItem('nick');\r\n            dispatch(popUpActions.showPopUp('CREATE_NICK'))\r\n        },\r\n\r\n        /**\r\n         * Mute/unmute user\r\n         *\r\n         * @param list\r\n         */\r\n        changeMutedList: (list) => {\r\n            dispatch(userActions.changeMutedList(list))\r\n        },\r\n\r\n        setAsModerator: () => {\r\n            dispatch(userActions.setAsModerator())\r\n        },\r\n\r\n        /**\r\n         * Like/dislike user\r\n         *\r\n         * @param list\r\n         */\r\n        changeLikedList: (list) => {\r\n            dispatch(userActions.changeLikedList(list))\r\n        }\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(UsersList)\r\n\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nimport appActions from \"../../actions/appActions\";\r\nimport popUpActions from \"../../actions/popUpActions\";\r\nimport React, {Component} from 'react'\r\nimport socket from '../../socket'\r\nimport userActions from \"../../actions/userActions\";\r\nimport {connect} from \"react-redux\";\r\n\r\n/**\r\n * UsersList component\r\n */\r\nclass SavedList extends Component {\r\n    /**\r\n     * UsersList Constructor\r\n     *\r\n     * @param props\r\n     */\r\n    constructor(props) {\r\n        super(props);\r\n        \r\n        this.state = {\r\n            clientsList: [],\r\n            allUsersList: {},\r\n            isToggled: false\r\n        };\r\n    }\r\n\r\n    /**\r\n     * ComponentDidMount method\r\n     */\r\n    componentDidMount() {\r\n        let userId = localStorage.getItem('unique_id');\r\n\r\n        if (!userId) {\r\n            userId = Math.floor(Math.random() * Math.floor(999999999));\r\n            localStorage.setItem('unique_id', userId)\r\n        }\r\n\r\n        this.props.setUserId(userId);\r\n    };\r\n\r\n    /**\r\n     * Component did update\r\n     *\r\n     * @param prevProps\r\n     */\r\n    componentDidUpdate(prevProps) {\r\n        if (Object.keys(prevProps.likedList).length !== Object.keys(this.props.likedList).length) {\r\n            this.createList(this.props.likedList)\r\n        }\r\n\r\n        if (Object.keys(prevProps.allUsersList).length !== Object.keys(this.props.allUsersList).length) {\r\n            this.createList(this.props.likedList)\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Remove user from liked list\r\n     *\r\n     * @param userId\r\n     */\r\n    removeUser = (userId) => {\r\n        let newList = {...this.props.likedList};\r\n\r\n        delete newList[userId];\r\n\r\n        this.props.changeLikedList(newList)\r\n    };\r\n\r\n    /**\r\n     * Create list of clients\r\n     *\r\n     * @param data\r\n     */\r\n    createList = (data) => {\r\n        let clientsData = [];\r\n\r\n        for (let userId in data) {\r\n            if (data.hasOwnProperty(userId)) {\r\n                let userData = data[userId],\r\n                    isOnline = this.props.allUsersList.hasOwnProperty(userId),\r\n                    statusColor = isOnline ? '#9FD468' : '#808080';\r\n\r\n                if (isOnline) {\r\n                    data[userId].socketId = this.props.allUsersList[userId].socketId\r\n                }\r\n\r\n                clientsData.push(\r\n                    <li key={userId}>\r\n                        <span className=\"client-color\" style={{backgroundColor: statusColor}}\r\n                              title={isOnline ? 'online' : 'offline'}/>\r\n                        <span className=\"name\">{userData.nick}</span>\r\n                        <span className='user-actions'>\r\n                            {isOnline && <span className='start-chat client-action'\r\n                                  title='розпочати приватний чат'\r\n                                  onClick={() => {\r\n                                      this.proposePrivateChat(userData.nick, userData.socketId)\r\n                                  }}\r\n                            />}\r\n                            <span className='remove-user client-action'\r\n                                  title='видалити користувача зі списку'\r\n                                  onClick={() => {\r\n                                      this.removeUser(userId)\r\n                                  }}\r\n                            />\r\n                        </span>\r\n                    </li>\r\n                )\r\n            }\r\n        }\r\n\r\n        this.setState({\r\n            clientsList: clientsData\r\n        })\r\n    };\r\n\r\n    /**\r\n     * Start private chat\r\n     *\r\n     * @param receiverNick\r\n     * @param receiverId\r\n     */\r\n    proposePrivateChat = (receiverNick, receiverId) => {\r\n        socket.chat.emit('private request', {\r\n            receiverNick,\r\n            receiverId,\r\n            senderNick: this.props.nick,\r\n            senderId: socket.chat.id\r\n        })\r\n    };\r\n\r\n    /**\r\n     * Render UsersList component\r\n     */\r\n    render() {\r\n        return (\r\n            <div className=\"users-list-wrapper\">\r\n                <ul className='users-list'>\r\n                    {this.state.clientsList.length\r\n                        ? this.state.clientsList :\r\n                    <li>Тут буде відображатися список усіх збережених користувачів. Щоб зберегти користувача натисніть\r\n                        на іконку серця у вікні приватного чату або поряд з ніком у списку загального чату. Колір поряд\r\n                        з користувачем у цьому списку означає його статус online (зелений) і offline (сірий).\r\n                    </li>}\r\n                </ul>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        likedList    : state.user.likedList,\r\n        allUsersList : state.user.allUsersList\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        /**\r\n         * Show popup\r\n         *\r\n         * @param type\r\n         */\r\n        showPopUp: (type) => {\r\n            dispatch(appActions.showPopUp(type))\r\n        },\r\n\r\n        /**\r\n         * Set all connected users list\r\n         *\r\n         * @param list\r\n         */\r\n        setAllUsersList: (list) => {\r\n            dispatch(userActions.setAllUsersList(list))\r\n        },\r\n\r\n        /**\r\n         * Change nick name\r\n         */\r\n        changeNick: () => {\r\n            localStorage.removeItem('nick');\r\n            dispatch(popUpActions.showPopUp('CREATE_NICK'))\r\n        },\r\n\r\n        /**\r\n         * Set unique user id\r\n         *\r\n         * @param id\r\n         */\r\n        setUserId: (id) => {\r\n            dispatch(userActions.setUserId(id))\r\n        },\r\n\r\n        /**\r\n         * Like/dislike user\r\n         *\r\n         * @param list\r\n         */\r\n        changeLikedList: (list) => {\r\n            dispatch(userActions.changeLikedList(list))\r\n        }\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SavedList)\r\n\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nimport React, {PureComponent} from 'react'\r\nimport socket from \"../../socket\";\r\nimport ChatMessage from '../smart/ChatMessage'\r\nimport {connect} from \"react-redux\";\r\nimport roomActions from \"../../actions/roomActions\";\r\nimport appActions from \"../../actions/appActions\";\r\nimport UsersList from \"./UsersList\";\r\nimport SavedList from \"./SavedList\";\r\nimport popUpActions from \"../../actions/popUpActions\";\r\nimport galleryActions from \"../../actions/galleryActions\";\r\nimport messageActions from \"../../actions/messageActions\";\r\nimport userActions from \"../../actions/userActions\";\r\n\r\n/**\r\n * MessagesWrapper component\r\n */\r\nclass MessagesWrapper extends PureComponent {\r\n    /**\r\n     * MessagesWrapper Constructor\r\n     *\r\n     * @param props\r\n     */\r\n    constructor(props) {\r\n        super(props);\r\n        \r\n        this.state = {\r\n            notify          : !props.ssr && new Audio('/audio/magic.mp3'),\r\n            notify2         : !props.ssr && new Audio('/audio/pop.mp3'),\r\n            newMessagesQty  : 0,\r\n            messages        : []\r\n        };\r\n    }\r\n\r\n    /**\r\n     * ComponentDidMount\r\n     */\r\n    componentDidMount() {\r\n        if (!this.state.notify && !this.state.notify2) {\r\n            this.setState({\r\n                notify  : new Audio('/audio/magic.mp3'),\r\n                notify2 : new Audio('/audio/pop.mp3')\r\n            })\r\n        }\r\n\r\n        const type = this.props.type,\r\n            getMessageEvent = 'get ' + type + ' message';\r\n\r\n        if (type === 'private') {\r\n            let message = 'Очікуємо співрозмовника... </br> Поки йде пошук, можете поспілкуватися' +\r\n                ' в загальному чаті.';\r\n\r\n            if (this.props.isMobile) {\r\n                message += '</br> Щоб перейти в загальний чат зробіть свайп вліво ' +\r\n                '<img width=\"50px\" src=\"/images/swipe.gif\" alt=\"swipe invischat\"/>'\r\n            }\r\n\r\n            this.setState({\r\n                messages: this.state.messages.concat(<ChatMessage\r\n                    key={Math.round(100000 + Math.random() * (999999 - 100000))}\r\n                    gender=\"bot\"\r\n                    message={message}\r\n                    socketId={null}\r\n                    label='bot'\r\n                />)\r\n            });\r\n\r\n            socket.chat.off('get interlocutor id').on('get interlocutor id', (id) => {\r\n                this.props.setInterlocutorId(id)\r\n            })\r\n        } else {\r\n            socket.chat.off('get public chat info').on('get public chat info', () => {\r\n                this.sendBotMessage('PUBLIC_WELCOME')\r\n            });\r\n\r\n            socket.chat.off('new user connected').on('new user connected', (nick) => {\r\n                if (nick) {\r\n                    this.sendBotMessage('NEW_USER_IN_PUBLIC', nick);\r\n                }\r\n            });\r\n\r\n            socket.chat.off('liked message').on('liked message', (data) => {\r\n                this.likesHandler(data)\r\n            })\r\n        }\r\n\r\n        socket.chat.off('disconnect').on('disconnect', () => {\r\n            setTimeout(() => {\r\n                this.sendBotMessage('CONNECTION_PROBLEM');\r\n            }, 100)\r\n        });\r\n\r\n        socket.chat.off('reconnect').on('reconnect', () => {\r\n            socket.reJoinRoom()\r\n                .addToPublicList();\r\n            this.sendBotMessage('CONNECTION_RESTORED');\r\n        });\r\n\r\n        socket.chat.off(getMessageEvent).on(getMessageEvent, (message) => {\r\n            //Ignore message if client is muted\r\n            if (this.props.mutedList.indexOf(message.socketId) !== -1) {\r\n                return false\r\n            }\r\n\r\n            const isAlien = message.socketId !== socket.chat.id;\r\n\r\n            if (message.botMessage) {\r\n                return this.sendBotMessage(message.botMessage)\r\n            }\r\n\r\n            if (this.props.isMobile) {\r\n                if (type === 'private' && this.props.chatPosition !== 0) {\r\n                    this.props.setNewMessagesQty(this.props.newMessagesQty + 1)\r\n                }\r\n\r\n                if (type === 'public' && this.props.chatPosition === 0) {\r\n                    this.props.setNewMessagesQty(this.props.newMessagesQty + 1)\r\n                }\r\n            }\r\n\r\n            if (isAlien) {\r\n                this.scrollToLastMessage();\r\n\r\n                if (this.props.isNotificationsEnabled && type === 'private' && this.state.notify) {\r\n                    this.state.notify.play();\r\n                }\r\n            } else {\r\n                this.scrollToLastMessage(true);\r\n            }\r\n\r\n            this.setState({\r\n                messages: this.state.messages.concat(\r\n                    <ChatMessage key={message.messageId}\r\n                                 message={message.text}\r\n                                 type={this.props.type}\r\n                                 label={socket.chat.id !== message.socketId ? 'anon' : 'you'}\r\n                                 messageId={message.messageId}\r\n                                 quotedMessage={message.quotedMessage}\r\n                                 quotedImage={message.quotedImage}\r\n                                 publicColor={message.publicColor}\r\n                                 isNoAdmin={message.isNoAdmin}\r\n                                 socketId={message.socketId}\r\n                                 gender={message.gender}\r\n                                 nickName={message.nick}\r\n                                 image={message.imageUrl}\r\n                    />\r\n                )\r\n            });\r\n\r\n            if (message.imageUrl) {\r\n                this.props.addImageToGallery({url: message.imageUrl, type: this.props.type})\r\n            }\r\n        });\r\n\r\n        socket.chat.off('deleted message').on('deleted message', (id) => {\r\n            let message = document.getElementById(id);\r\n\r\n            if (message) {\r\n                message.innerHTML = '<span class=\"message-text removed\">Повідомлення видалено</span>'\r\n            }\r\n        });\r\n\r\n        this.props.isMobile && window.addEventListener(\"resize\", this.resizeHandler)\r\n    };\r\n\r\n    resizeHandler = () => {\r\n        this.scrollToLastMessage(true)\r\n    };\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        let message = this.props.fakeMessageData;\r\n\r\n        if (prevProps.fakeMessageData.key !== message.key && this.props.type === message.type) {\r\n            this.setState({\r\n                messages: this.state.messages.concat(\r\n                    <ChatMessage key={message.messageId}\r\n                                 message={message.text}\r\n                                 type={message.type}\r\n                                 label={socket.chat.id !== message.socketId ? 'anon' : 'you'}\r\n                                 messageId={message.messageId}\r\n                                 quotedMessage={message.quotedMessage}\r\n                                 quotedImage={message.quotedImage}\r\n                                 publicColor={message.publicColor}\r\n                                 socketId={message.socketId}\r\n                                 gender={message.gender}\r\n                                 nickName={message.nick}\r\n                                 image={message.imageUrl}\r\n                    />\r\n                )\r\n            }, () => {\r\n                this.scrollToLastMessage(true)\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Likes Handler\r\n     *\r\n     * @param data\r\n     *\r\n     * @returns {*}\r\n     */\r\n    likesHandler = (data) => {\r\n        let messageWrapper = document.getElementById(data.id);\r\n\r\n        if (!(messageWrapper && messageWrapper.querySelector('.message'))) {\r\n            return\r\n        }\r\n\r\n        let message = messageWrapper.querySelector('.likes-count');\r\n\r\n        if (!message) {\r\n            return messageWrapper.querySelector('.message').appendChild(\r\n                document.createRange().createContextualFragment(\r\n                    '<span class=\"likes-count\">1</span>'\r\n                )\r\n            );\r\n        }\r\n\r\n        let prevLikesCount = parseInt(message.textContent),\r\n            likesCount = data.isLiked ? prevLikesCount + 1 : prevLikesCount - 1;\r\n\r\n        if (likesCount === 0) {\r\n            return messageWrapper.querySelector('.likes-count').remove()\r\n        }\r\n\r\n        messageWrapper.querySelector('.likes-count').innerHTML = likesCount.toString()\r\n    };\r\n\r\n    /**\r\n     * Scroll to the last message\r\n     *\r\n     * @param force\r\n     */\r\n    scrollToLastMessage = (force = false) => {\r\n        const chat = this.chatTextRef;\r\n\r\n        if (!force && chat && Math.ceil(chat.scrollTop + chat.clientHeight) < chat.scrollHeight) {\r\n            return this.setState({\r\n                newMessagesQty: this.state.newMessagesQty + 1\r\n            })\r\n        }\r\n\r\n        let top = chat.scrollTop < chat.clientHeight ? chat.clientHeight : chat.scrollTop,\r\n            scr = setInterval(() => {\r\n                if (chat) {\r\n                    top += 300;\r\n                    chat.scrollTo(0, top);\r\n                }\r\n\r\n                if (!chat || top > chat.scrollHeight) {\r\n                    clearInterval(scr);\r\n                }\r\n            }, 1);\r\n\r\n        this.setState({\r\n            newMessagesQty: 0\r\n        })\r\n    };\r\n\r\n    /**\r\n     * Search new interlocutor in private chat\r\n     */\r\n    refreshChat = () => {\r\n        const isPrivate = this.props.type === 'private';\r\n\r\n        if (isPrivate && this.props.room && !this.props.isFull) {\r\n            return this.props.showPopUp('CAN_NOT_REFRESH')\r\n        }\r\n\r\n        this.setState({\r\n            messages: []\r\n        }, () => {\r\n            if (isPrivate) {\r\n                this.sendBotMessage('SEARCH_NEW');\r\n                socket.searchNew()\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Show/hide list of active users in public chat\r\n     */\r\n    toggleList = (e, open = false) => {\r\n        if (this.props.type === 'public' && !this.props.nick) {\r\n            return this.props.showPopUp('CREATE_NICK')\r\n        }\r\n\r\n        let classList = this.chatTextWrapperRef.classList;\r\n\r\n        if (open) {\r\n            classList.toggle('with-users-list')\r\n        } else if (classList.contains('with-users-list') && !e.target.classList.contains('users-list')) {\r\n            classList.remove('with-users-list')\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Send bot message\r\n     *\r\n     * @param message\r\n     * @param data\r\n     */\r\n    sendBotMessage = (message, data = null) => {\r\n        let text;\r\n\r\n        switch (message) {\r\n            case 'ROOM_IS_FULL' :\r\n                this.props.setIsFull(true);\r\n                this.state.notify2.play();\r\n                socket.chat.emit('set interlocutor id', {room: this.props.room, id: this.props.userId});\r\n                text = 'Співрозмовника знайдено! Розпочніть Ваш діалог';\r\n                break;\r\n            case 'INTERLOCUTOR_LEAVE' :\r\n                socket.leaveRoom();\r\n                this.state.notify2.play();\r\n                text = 'Співрозмовник покинув чат';\r\n                break;\r\n            case 'USER_DISCONNECTED' :\r\n                this.props.setConnectionStatus(false);\r\n                text = 'У співрозмовника виникли проблеми зі з\\'єднанням. Очікуємо відновлення зв\\'язку';\r\n                break;\r\n            case 'ROOM_IS_EMPTY' :\r\n                if (this.props.isFull) {\r\n                    socket.leaveRoom();\r\n                    this.state.notify2.play();\r\n                    text = 'Співрозмовник покинув чат';\r\n                } else {\r\n                    text = null\r\n                }\r\n                break;\r\n            case 'CONNECTION_PROBLEM' :\r\n                this.props.setConnectionStatus(false);\r\n                text = 'Спостерігаються проблеми зі з\\'єднанням. Очікуємо відновлення зв\\'язку';\r\n                break;\r\n            case 'SEARCH_NEW' :\r\n                text = 'Йде пошук нового співрозмовника';\r\n                break;\r\n            case 'NEW_USER_IN_PUBLIC' :\r\n                text = 'Користувач <b>' + data + '</b> приєднується до чату.';\r\n                break;\r\n            case 'PUBLIC_WELCOME' :\r\n                text = 'Вітаємо у загальному чаті! Ваші повідомлення та повідомлення осіб вашої' +\r\n                    ' статі відображаються справа, а від анонімів протилежної статі - зліва.' +\r\n                    ' Приємного спілкування!';\r\n                break;\r\n            case 'CONNECTION_RESTORED' :\r\n                if (!this.props.isConnected) {\r\n                    this.props.setConnectionStatus(true);\r\n                    text = 'З\\'єднання відновлено';\r\n                } else {\r\n                    text = null\r\n                }\r\n                break;\r\n            default:\r\n                text = 'default'\r\n        }\r\n\r\n        if (!text) {\r\n            return\r\n        }\r\n\r\n        this.setState({\r\n            messages: this.state.messages.concat(\r\n                <ChatMessage key={Math.round(100000 + Math.random() * (999999 - 100000))}\r\n                             gender=\"bot\"\r\n                             socketId={null}\r\n                             message={text}\r\n                             label='bot'\r\n                />\r\n            )\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Get height of chat text scroll\r\n     */\r\n    getScrollHeight = () => {\r\n        const chat = this.chatTextRef;\r\n\r\n        if (chat.scrollHeight === Math.ceil(chat.scrollTop + chat.clientHeight)) {\r\n            this.setState({\r\n                newMessagesQty: 0\r\n            })\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Get messages wrapper component's ref\r\n     *\r\n     * @param node\r\n     */\r\n    getRef = (node) => {\r\n        this.chatTextRef = node\r\n    };\r\n\r\n    getChatTextWrapperRef = (node) => {\r\n        this.chatTextWrapperRef = node\r\n    };\r\n\r\n    /**\r\n     * Add user from private chat to the favorite list\r\n     */\r\n    saveUser = () => {\r\n        let newList = {...this.props.likedList},\r\n            userId = this.props.interlocutorId;\r\n\r\n        if (newList[userId]) {\r\n            delete newList[userId];\r\n            this.props.changeLikedList(newList)\r\n        } else {\r\n            this.props.showPopUp('LIKE_INTERLOCUTOR')\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Component unmounted from DOM\r\n     */\r\n    componentWillUnmount() {\r\n        window.removeEventListener('resize', this.resizeHandler)\r\n    }\r\n\r\n    /**\r\n     * Render MessagesWrapper component\r\n     */\r\n    render() {\r\n        const saveUserClassName = this.props.likedList[this.props.interlocutorId] ?\r\n            'action-secondary save-user saved' : 'action-secondary save-user';\r\n\r\n        return (\r\n            <div className='chat-text-wrapper'\r\n                 onScroll={this.getScrollHeight}\r\n                 onClick={this.toggleList}\r\n                 ref={this.getChatTextWrapperRef}>\r\n                <div className=\"actions-secondary\">\r\n                    <span className=\"action-secondary refresh\"\r\n                          title=\"шукати нового співрозмовника\"\r\n                          onClick={this.refreshChat}\r\n                    />\r\n                    {this.props.type === 'private' &&\r\n                    <React.Fragment>\r\n                        <span className='action-secondary saved-list users-list'\r\n                              title=\"зберегти співрозмовника\"\r\n                              onClick={(e) => {this.toggleList(e, true)}}\r\n                        />\r\n                        {this.props.isFull &&\r\n                        <span className={saveUserClassName}\r\n                              title=\"зберегти співрозмовника\"\r\n                              onClick={this.saveUser}\r\n                        />}\r\n                    </React.Fragment>}\r\n                    {this.props.type === 'public' &&\r\n                    <span className=\"action-secondary show-users users-list\"\r\n                          title=\"показати хто у чаті\"\r\n                          onClick={(e) => {this.toggleList(e, true)}}\r\n                    />}\r\n                </div>\r\n                <div className='chat-text' ref={this.getRef}>{this.state.messages}</div>\r\n                {this.props.type === 'public'\r\n                    ? <UsersList/>\r\n                    : <SavedList/>}\r\n                {this.state.newMessagesQty ?\r\n                    <span className=\"unread-messages-count\"\r\n                          onClick={() => {this.scrollToLastMessage(true)}}\r\n                          children={\"У вас \" + this.state.newMessagesQty + \" нових повідомлень\"}/> : false}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        isFull                 : state.room.isFull,\r\n        isMobile               : state.app.isMobile,\r\n        newMessagesQty         : state.message.newMessagesQty,\r\n        chatPosition           : state.app.chatPosition,\r\n        userId                 : state.user.userId,\r\n        interlocutorId         : state.room.interlocutorId,\r\n        nick                   : state.user.nick,\r\n        fakeMessageData        : state.message.fakeMessageData,\r\n        isConnected            : state.app.isConnected,\r\n        room                   : state.room.roomName,\r\n        likedList              : state.user.likedList,\r\n        mutedList              : state.user.mutedList,\r\n        isNotificationsEnabled : state.app.isNotificationsEnabled\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        /**\r\n         * Set set room is full\r\n         *\r\n         * @param isFull\r\n         */\r\n        setIsFull: (isFull) => {\r\n            dispatch(roomActions.setIsFull(isFull))\r\n        },\r\n\r\n        /**\r\n         * Add new image to gallery\r\n         *\r\n         * @param data\r\n         */\r\n        addImageToGallery: (data) => {\r\n            dispatch(galleryActions.addImageToGallery(data))\r\n        },\r\n\r\n        /**\r\n         * Show popup\r\n         *\r\n         * @param type\r\n         */\r\n        showPopUp: (type) => {\r\n            dispatch(popUpActions.showPopUp(type))\r\n        },\r\n\r\n        /**\r\n         * Set new messages qty in not active chat\r\n         *\r\n         * @param qty\r\n         */\r\n        setNewMessagesQty: (qty) => {\r\n            dispatch(messageActions.setNewMessagesQty(qty))\r\n        },\r\n\r\n        /**\r\n         * Like/dislike user\r\n         *\r\n         * @param list\r\n         */\r\n        changeLikedList: (list) => {\r\n            dispatch(userActions.changeLikedList(list))\r\n        },\r\n\r\n        /**\r\n         * Set interlocutor Public Id\r\n         *\r\n         * @param id\r\n         */\r\n        setInterlocutorId: (id) => {\r\n            dispatch(roomActions.setInterlocutorId(id))\r\n        },\r\n\r\n        /**\r\n         * Set connection status\r\n         *\r\n         * @param isConnected\r\n         */\r\n        setConnectionStatus: (isConnected) => {\r\n            dispatch(appActions.setConnectionStatus(isConnected))\r\n        }\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MessagesWrapper)\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nimport React, {Component} from 'react'\r\nimport ChatToolbar from './ChatToolbar'\r\nimport Dropzone from 'react-dropzone'\r\nimport request from 'superagent'\r\nimport MessagesWrapper from '../smart/MessagesWrapper'\r\nimport socket from \"../../socket\";\r\nimport roomActions from \"../../actions/roomActions\";\r\nimport {connect} from \"react-redux\";\r\nimport messageActions from \"../../actions/messageActions\";\r\nimport popUpActions from \"../../actions/popUpActions\";\r\n\r\nconst CLOUDINARY_UPLOAD_PRESET = 'oddbpaek';\r\nconst CLOUDINARY_UPLOAD_URL = 'https://api.cloudinary.com/v1_1/dfgkgr7ui/image/upload';\r\n\r\n/**\r\n * ChatWindow component\r\n */\r\nclass ChatWindow extends Component {\r\n    /**\r\n     * ChatWindow Constructor\r\n     *\r\n     * @param props\r\n     */\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            isTyping     : false,\r\n            uploadedFile : null,\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Drop image in dropzone handler\r\n     *\r\n     * @param files\r\n     */\r\n    onImageDrop = (files) => {\r\n        if (files.length) {\r\n            this.setState({\r\n                uploadedFile: files[0],\r\n            });\r\n            this.props.setIsUploadedImage({type: this.props.type, isUploaded: true});\r\n            this.handleImageUpload(files[0]);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Select image to upload\r\n     *\r\n     * @param e\r\n     */\r\n    imageSelect = (e) => {\r\n        this.onImageDrop(e.target.files);\r\n        e.target.value = null\r\n    };\r\n\r\n    /**\r\n     * Image upload handler\r\n     *\r\n     * @param file\r\n     */\r\n    handleImageUpload = (file) => {\r\n        let type = this.props.type,\r\n            upload = request.post(CLOUDINARY_UPLOAD_URL)\r\n            .field('upload_preset', CLOUDINARY_UPLOAD_PRESET)\r\n            .field('file', file);\r\n\r\n        upload.end((err, response) => {\r\n            if (err) {\r\n                this.removeImagePreview();\r\n                this.props.showPopUp('IMAGE_UPLOADING_ERROR');\r\n            } else if (response.body.secure_url !== '') {\r\n                this.props.setImageUrl({type, imageUrl: response.body.secure_url});\r\n                this.props.setImagePublicId({type, id: response.body.public_id});\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Remove image preview\r\n     */\r\n    removeImagePreview = () => {\r\n        this.props.setIsUploadedImage({type: this.props.type, isUploaded: false});\r\n        this.deleteImage()\r\n    };\r\n\r\n    /**\r\n     * Delete image from cloud\r\n     */\r\n    deleteImage = () => {\r\n        this.props.setImageUrl({type: this.props.type, imageUrl: null});\r\n\r\n        socket.chat.emit(\r\n            'remove uploaded image',\r\n            this.props.type === 'public' ? this.props.publicImageId : this.props.privateImageId\r\n        )\r\n    };\r\n\r\n    /**\r\n     * Set preview image url from clipboard\r\n     *\r\n     * @param src\r\n     */\r\n    setPreviewImgUrl = (src) => {\r\n        this.props.setIsUploadedImage({type: this.props.type, isUploaded: true});\r\n        this.props.setImageUrl({type: this.props.type, imageUrl: src})\r\n    };\r\n\r\n    /**\r\n     * Render ChatWindow component\r\n     */\r\n    render() {\r\n        let chatClassName = 'chat-window ' + this.props.type;\r\n\r\n        return (\r\n            <Dropzone multiple={false}\r\n                      accept=\"image/*\"\r\n                      className={'chat-window ' + chatClassName}\r\n                      activeClassName=\"active\"\r\n                      style={{position: \"absolute\"}}\r\n                      disableClick={true}\r\n                      onDrop={this.onImageDrop.bind(this)}>\r\n                <MessagesWrapper type={this.props.type} ssr={this.props.ssr}/>\r\n                <ChatToolbar type={this.props.type}\r\n                             removeImagePreview={this.removeImagePreview}\r\n                             imageSelect={this.imageSelect}\r\n                />\r\n            </Dropzone>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        publicImageId  : state.message.public.imagePublicId,\r\n        privateImageId : state.message.private.imagePublicId\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        /**\r\n         * Set set room is full\r\n         *\r\n         * @param isFull\r\n         */\r\n        setIsFull: (isFull) => {\r\n            dispatch(roomActions.setIsFull(isFull))\r\n        },\r\n\r\n        /**\r\n         * Set uploaded image url\r\n         *\r\n         * @param url\r\n         */\r\n        setImageUrl: (url) => {\r\n            dispatch(messageActions.setImageUrl(url))\r\n        },\r\n\r\n        /**\r\n         * Show popup\r\n         *\r\n         * @param type\r\n         */\r\n        showPopUp: (type) => {\r\n            dispatch(popUpActions.showPopUp(type))\r\n        },\r\n\r\n        /**\r\n         * Set image public id\r\n         *\r\n         * @param id\r\n         */\r\n        setImagePublicId: (id) => {\r\n            dispatch(messageActions.setImagePublicId(id))\r\n        },\r\n\r\n        /**\r\n         * Set is uploaded image\r\n         *\r\n         * @param isUploaded\r\n         */\r\n        setIsUploadedImage: (isUploaded) => {\r\n            dispatch(messageActions.setIsUploadedImage(isUploaded))\r\n        }\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ChatWindow)\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nimport React from 'react'\r\nimport galleryActions from \"../../actions/galleryActions\";\r\nimport {connect} from \"react-redux\";\r\n\r\n/**\r\n * Gallery component\r\n *\r\n * @param props\r\n\r\n * @returns {*}\r\n * @constructor\r\n */\r\nconst Gallery = (props) => {\r\n    const type = props.gallery.activeType,\r\n          gallery = props.gallery[type].images,\r\n          activeImageIndex = props.gallery[type].activeIndex;\r\n\r\n    const showPrevImage = () => {\r\n        if (activeImageIndex > 0) {\r\n            props.setActiveIndex({type, activeIndex: activeImageIndex - 1});\r\n        }\r\n    };\r\n\r\n    const showNextImage = () => {\r\n        if (activeImageIndex < gallery.length -1) {\r\n            props.setActiveIndex({type, activeIndex: activeImageIndex + 1});\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"image-gallery\">\r\n            <span className=\"close close-gallery\" onClick={props.hideGallery}/>\r\n            {(gallery.length > 1 && activeImageIndex !== 0) &&\r\n            <span\r\n                title=\"попереднє зображення\"\r\n                className=\"gallery-link prev\"\r\n                onClick={showPrevImage}/>}\r\n            {activeImageIndex !== null ?\r\n                <img src={gallery[activeImageIndex]} alt=\"\"/> :\r\n                <span className=\"loader\"/>}\r\n            {(gallery.length > 1 && activeImageIndex < gallery.length - 1) &&\r\n            <span\r\n                title=\"наступне зображення\"\r\n                className=\"gallery-link next\"\r\n                onClick={showNextImage}/>}\r\n        </div>\r\n    )\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        gallery: state.gallery\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        /**\r\n         * Hide image gallery\r\n         */\r\n        hideGallery: () => {\r\n            dispatch(galleryActions.setGalleryVisibility(false))\r\n        },\r\n\r\n        setActiveIndex: (data) => {\r\n            dispatch(galleryActions.setActiveIndex(data))\r\n        }\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Gallery)\r\n\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nimport React, {Component} from 'react'\r\nimport ChatWindow from \"../smart/ChatWindow\";\r\nimport socket from \"../../socket\";\r\nimport  { Redirect } from 'react-router-dom'\r\nimport {connect} from \"react-redux\";\r\nimport appActions from \"../../actions/appActions\";\r\nimport userActions from \"../../actions/userActions\";\r\nimport messageActions from \"../../actions/messageActions\";\r\nimport Gallery from \"./Gallery\";\r\n\r\n/**\r\n * Chat page component\r\n */\r\nclass Chat extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        if (!props.ssr) {\r\n            const gender = localStorage.getItem('gender');\r\n\r\n            if (!props.gender && gender) {\r\n                props.setGender(gender)\r\n            }\r\n        }\r\n\r\n        this.state = {\r\n            minSwipeLength : 60,// Minimal length needed for swipe (px)\r\n            touchPosition  : 0,\r\n            prevPosition   : 0,\r\n            swipeDistance  : 0\r\n        };\r\n    }\r\n\r\n    /**\r\n     * ComponentDidMount\r\n     */\r\n    componentDidMount() {\r\n        let nick = localStorage.getItem('nickName');\r\n\r\n        this.props.setIsInChat(true);\r\n        this.props.setRedirectionStatus(false);\r\n\r\n        if (!this.props.publicColor) {\r\n            this.props.setPublicColor()\r\n        }\r\n\r\n        if (nick && !this.props.nick) {\r\n            socket.setNick(nick);\r\n        }\r\n\r\n        if (this.props.nick) {\r\n            socket.addToPublicList();\r\n        }\r\n\r\n        if (!this.props.room) {\r\n            socket.joinChat()\r\n        }\r\n\r\n        window.addEventListener('beforeunload', this.onBeforeUnload, false);\r\n        window.addEventListener('unload', this.onUnload, false);\r\n\r\n        socket.subscribeJoinRoom()\r\n    }\r\n\r\n    onBeforeUnload = () => {\r\n        return \"Усю переписку буде втрачено. Ви справді бажаєте покинути чат?\";\r\n    };\r\n\r\n    /**\r\n     * When user is leave chat\r\n     */\r\n    onUnload = () => {\r\n        socket.chat.emit('leave room', {\r\n            room: this.props.room,\r\n            gender: this.props.gender,\r\n            destroy: true\r\n        })\r\n    };\r\n\r\n    /**\r\n     * Detect first touch on chat screen\r\n     *\r\n     * @param e\r\n     */\r\n    handleTouchStart = (e) => {\r\n        this.setState({\r\n            prevPosition: this.props.chatPosition,\r\n            touchStartPosition: e.nativeEvent.touches[0].clientX,\r\n            swipeDistance: 0\r\n        })\r\n    };\r\n\r\n    /**\r\n     * Detect swipe on chat screen\r\n     *\r\n     * @param e\r\n     */\r\n    handleSwipe = (e) => {\r\n        let position,\r\n            prevPosition   = this.state.prevPosition,\r\n            minSwipeLength = this.state.minSwipeLength,\r\n            swipeDistance  = -(this.state.touchStartPosition - e.nativeEvent.touches[0].clientX);\r\n\r\n        if (prevPosition === 0 && swipeDistance < -minSwipeLength) {\r\n            position = swipeDistance\r\n        } else if (prevPosition === -window.innerWidth && swipeDistance > minSwipeLength) {\r\n            position = prevPosition + swipeDistance\r\n        } else {\r\n            return\r\n        }\r\n\r\n        this.setState({\r\n            swipeDistance: swipeDistance\r\n        });\r\n\r\n        this.props.setChatPosition(position)\r\n    };\r\n\r\n    /**\r\n     * Detect end of swipe\r\n     */\r\n    handleTouchStop = () => {\r\n        if (!this.state.swipeDistance) {\r\n            return\r\n        }\r\n\r\n        let position;\r\n\r\n        if (this.state.prevPosition !== -window.innerWidth &&  this.props.chatPosition < -this.state.minSwipeLength) {\r\n            position = -window.innerWidth;\r\n            this.props.clearNewMessagesQty()\r\n        } else if (this.props.chatPosition > -window.innerWidth + this.state.minSwipeLength) {\r\n            position = 0;\r\n            this.props.clearNewMessagesQty()\r\n        } else {\r\n            position = this.state.prevPosition\r\n        }\r\n\r\n        this.props.setChatPosition(position);\r\n    };\r\n\r\n    /**\r\n     * ComponentWillUnmount\r\n     */\r\n    componentWillUnmount() {\r\n        this.props.setIsInChat(false);\r\n\r\n        window.removeEventListener('beforeunload', this.onBeforeUnload);\r\n        window.removeEventListener('unload', this.onUnload);\r\n\r\n        if (this.props.room) {\r\n            socket.leaveChat()\r\n        }\r\n\r\n        this.props.clearAllUsersList()\r\n    }\r\n\r\n    /**\r\n     * Render component\r\n     *\r\n     * @returns {*}\r\n     */\r\n    render() {\r\n        if (!this.props.ssr) {\r\n            if (!localStorage.getItem('gender')) {\r\n                return <Redirect to='/'/>\r\n            }\r\n        }\r\n\r\n        return (\r\n        <div id='chat' className='chat-content'>\r\n            <div className='chat-wrapper'>\r\n                <div className='chat-windows'\r\n                     onTouchMove={!this.props.isMobile ? this.handleSwipe : () => {}}\r\n                     onTouchStart={!this.props.isMobile ? this.handleTouchStart : () => {}}\r\n                     onTouchEnd={!this.props.isMobile ? this.handleTouchStop : () => {}}\r\n                     style={!this.props.isMobile ? {left: this.props.chatPosition + \"px\", transition: \"linear .1s\"} : {}}>\r\n                    <ChatWindow type='private' ssr={this.props.ssr}/>\r\n                    <ChatWindow type='public' ssr={this.props.ssr}/>\r\n                    {this.props.isGalleryActive && <Gallery/>}\r\n                </div>\r\n            </div>\r\n        </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        chatPosition    : state.app.chatPosition,\r\n        publicColor     : state.message.publicColor,\r\n        isGalleryActive : state.gallery.isActive,\r\n        gender          : state.user.gender,\r\n        allUsersList    : state.user.allUsersList,\r\n        userId          : state.user.userId,\r\n        newMessagesQty  : state.message.newMessagesQty,\r\n        room            : state.room.roomName,\r\n        nick            : state.user.nick\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        /**\r\n         * Set active chat position\r\n         *\r\n         * @param position\r\n         */\r\n        setChatPosition: (position) => {\r\n            dispatch(appActions.setChatPosition(position));\r\n        },\r\n\r\n        /**\r\n         * Clear all users List\r\n         */\r\n        clearAllUsersList: () => {\r\n            dispatch(userActions.setAllUsersList({}));\r\n        },\r\n\r\n        /**\r\n         * Clear new messages qty\r\n         */\r\n        clearNewMessagesQty: () => {\r\n            dispatch(messageActions.setNewMessagesQty(0))\r\n        },\r\n\r\n        /**\r\n         * Set public messages color\r\n         */\r\n        setPublicColor: () => {\r\n            dispatch(messageActions.setPublicColor())\r\n        },\r\n\r\n        /**\r\n         * Set is user in chat\r\n         *\r\n         * @param isInChat\r\n         */\r\n        setIsInChat: (isInChat) => {\r\n            dispatch(appActions.setIsInChat(isInChat))\r\n        },\r\n\r\n        /**\r\n         * Set user nickName\r\n         *\r\n         * @param nick\r\n         */\r\n        setNick: (nick) => {\r\n            dispatch(userActions.setNick(nick))\r\n        },\r\n\r\n        /**\r\n         * Set user gender\r\n         *\r\n         * @param gender\r\n         */\r\n        setGender: (gender) => {\r\n            dispatch(userActions.setGender(gender))\r\n        },\r\n\r\n        /**\r\n         *\r\n         * Set redirection status\r\n         *\r\n         * @param isNeedRedirect\r\n         */\r\n        setRedirectionStatus: (isNeedRedirect) => {\r\n            dispatch(appActions.setRedirectionStatus(isNeedRedirect))\r\n        }\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Chat)\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nimport React from 'react'\r\n\r\n/**\r\n * Footer component\r\n *\r\n * @returns {*}\r\n * @constructor\r\n */\r\nconst Footer = () => {\r\n    return (\r\n        <footer>\r\n            <span>&copy; 2019</span>\r\n            <div className=\"fb-share-button\"\r\n                 data-href=\"http://www.invischat.com\"\r\n                 data-layout=\"button_count\"\r\n                 data-size=\"small\"\r\n                 data-mobile-iframe=\"true\">\r\n                <a target=\"_blank\"\r\n                   href=\"https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Finvischat.com%2F&amp;src=sdkpreparse\"\r\n                   className=\"fb-xfbml-parse-ignore\">Поширити</a>\r\n            </div>\r\n        </footer>\r\n    )\r\n};\r\n\r\nexport default Footer\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nimport appActions from '../../actions/appActions'\r\nimport React from 'react'\r\nimport {connect} from 'react-redux'\r\nimport {Helmet} from \"react-helmet\"\r\nimport {NavLink} from 'react-router-dom'\r\nimport messageActions from \"../../actions/messageActions\";\r\nimport socket from \"../../socket\";\r\n\r\n/**\r\n * Header component\r\n * @param props\r\n * @returns {*}\r\n * @constructor\r\n */\r\nconst Header = (props) => {\r\n    if (!socket.chat){\r\n        socket.connect();\r\n    }\r\n\r\n    let burgerClassName = props.isNavActive\r\n            ? 'action menu-burger active'\r\n            : 'action menu-burger',\r\n        chatSwitchClassName = props.unreadMessagesCount\r\n            ? 'action chat-switch unread'\r\n            : 'action chat-switch',\r\n        themeSwitchClassName = props.theme === 'dark'\r\n            ? 'action theme-switch dark'\r\n            : 'action theme-switch',\r\n        notificationsSwitchClassName = props.isNotificationsEnabled\r\n            ? 'action notifications-switch'\r\n            : 'action notifications-switch active';\r\n\r\n    return (\r\n        <header>\r\n            <NavLink exact={true} to='/' className='logo'>\r\n                <h1>Invischat</h1>\r\n            </NavLink>\r\n            <div className='actions'>\r\n                <span className=\"action now-online\"\r\n                      title=\"now online\">{props.onlineCount}\r\n                </span>\r\n                <span className={notificationsSwitchClassName}\r\n                      onClick={props.changeNotifications}\r\n                      title='on/off notifications'\r\n                />\r\n                <span className={themeSwitchClassName}\r\n                      onClick={props.setTheme}\r\n                      title='change theme'\r\n                />\r\n                {props.isInChat && props.isMobile && <span className={chatSwitchClassName}\r\n                      onClick={props.changeChatPosition}\r\n                      title='switch chat'\r\n                      children={props.newMessagesQty ?\r\n                          <span className='new-qty'>{props.newMessagesQty}</span> : false}\r\n                />}\r\n                <span className={burgerClassName}\r\n                      onClick={props.toggleMenu}\r\n                      title='show menu'>\r\n                </span>\r\n            </div>\r\n            <Helmet>\r\n                <meta name=\"theme-color\" content={props.theme === 'dark' ? '#2F2F2F' : '#FFFFFF'} />\r\n            </Helmet>\r\n        </header>\r\n    )\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        chatPosition           : state.app.chatPosition,\r\n        isMobile               : state.app.isMobile,\r\n        isInChat               : state.app.isInChat,\r\n        isNavActive            : state.app.isNavActive,\r\n        isNotificationsEnabled : state.app.isNotificationsEnabled,\r\n        newMessagesQty         : state.message.newMessagesQty,\r\n        onlineCount            : state.app.onlineCount,\r\n        theme                  : state.app.theme,\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        /**\r\n         * Toggle menu\r\n         */\r\n        toggleMenu: () => {\r\n            dispatch(appActions.toggleMenu())\r\n        },\r\n\r\n        /**\r\n         * Set Chat Theme\r\n         */\r\n        setTheme: () => {\r\n            dispatch(appActions.setTheme())\r\n        },\r\n\r\n        /**\r\n         * Switch between chat windows\r\n         */\r\n        changeChatPosition: () => {\r\n            dispatch(appActions.setChatPosition());\r\n            dispatch(messageActions.setNewMessagesQty(0))\r\n        },\r\n\r\n        /**\r\n         * On/off notifications\r\n         */\r\n        changeNotifications: () => {\r\n            dispatch(appActions.changeNotifications())\r\n        }\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Header)\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nimport React from 'react'\r\nimport  { Redirect } from 'react-router-dom'\r\nimport userActions from '../../actions/userActions'\r\nimport {connect} from 'react-redux'\r\nimport {NavLink} from 'react-router-dom'\r\n\r\n/**\r\n * Home component\r\n *\r\n * @param props\r\n *\r\n * @returns {*}\r\n * @constructor\r\n */\r\nconst Home = (props) => {\r\n    if (!props.ssr) {\r\n        const gender = localStorage && localStorage.getItem('gender');\r\n\r\n        if (gender && props.isNeedRedirect) {\r\n            props.setGender(gender);\r\n            return <Redirect to='/chat'/>\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className='page-content home'>\r\n            <div className='main-logo'>\r\n                <img src='/images/logo.png' alt='Invischat'/>\r\n            </div>\r\n            <div className='gender-hint'>Обери свою стать:</div>\r\n            <div className='gender-fieldset'>\r\n                <NavLink className='gender female' onClick={() => {props.setGender('female')}} to='/chat'>\r\n                    <img src='../../images/female.png' alt=''/>\r\n                </NavLink>\r\n                <NavLink className='gender male' onClick={() => {props.setGender('male')}} to='/chat'>\r\n                    <img src='../../images/male.png' alt=''/>\r\n                </NavLink>\r\n            </div>\r\n        </div>\r\n    )\r\n};\r\n\r\n/**\r\n * Add redux states to component props\r\n *\r\n * @param state\r\n * @returns {{gender: null}}\r\n */\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        gender         : state.user.gender,\r\n        isNeedRedirect : state.app.isNeedRedirect\r\n    }\r\n};\r\n\r\n/**\r\n * Add redux actions to component props\r\n *\r\n * @param dispatch\r\n * @returns {{setGender: setGender}}\r\n */\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        /**\r\n         * Set user gender and connect to chat namespace\r\n         *\r\n         * @param gender\r\n         */\r\n        setGender: (gender) => {\r\n            dispatch(userActions.setGender(gender))\r\n        }\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Home)\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nimport React from 'react'\r\nimport {NavLink} from \"react-router-dom\";\r\nimport appActions from \"../../actions/appActions\";\r\nimport {connect} from \"react-redux\";\r\n\r\n/**\r\n * Nav component\r\n *\r\n * @param props\r\n * @returns {*}\r\n * @constructor\r\n */\r\nconst Nav = (props) => {\r\n    return (\r\n        <nav className=\"menu\">\r\n            <NavLink className=\"nav-link\" exact={true} onClick={props.toggleMenu} to='/'>Головна</NavLink>\r\n            <NavLink className=\"nav-link\" onClick={props.toggleMenu} to='/chat'>Чат</NavLink>\r\n            <NavLink className=\"nav-link\" onClick={props.toggleMenu} to='/contact_us'>Написати Нам</NavLink>\r\n            <NavLink className=\"nav-link\" onClick={props.toggleMenu} to='/privacy_policy'>Політика <br/> Конфіденційності</NavLink>\r\n        </nav>\r\n    )\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        isNavActive: state.app.isNavActive\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        /**\r\n         * Toggle menu\r\n         */\r\n        toggleMenu: () => {\r\n            dispatch(appActions.toggleMenu())\r\n        }\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Nav)\r\n","import React, {Component} from 'react'\r\nimport socket from '../../socket'\r\n\r\n/**\r\n * Contact us component\r\n */\r\nclass ContactUs extends Component {\r\n    state = {\r\n        isEmptyText: false,\r\n        mailSendSuccess: false,\r\n        mailSendError: false,\r\n        emailWasSend: false\r\n    };\r\n\r\n    /**\r\n     * ComponentDidMount method\r\n     */\r\n    componentDidMount() {\r\n        socket.chat.off('email send error').on('email sending error', () => {\r\n            this.setState({\r\n                mailSendError: true\r\n            })\r\n        });\r\n\r\n        socket.chat.off('email send successfully').on('email send successfully', () => {\r\n            this.setState({\r\n                mailSendSuccess: true\r\n            })\r\n        });\r\n\r\n        window.addEventListener('resize', this.scrollBottom)\r\n    }\r\n\r\n    scrollBottom = () => {\r\n        this.pageRef.scrollTop = this.pageRef.scrollHeight\r\n    };\r\n\r\n    /**\r\n     * Get message field ref\r\n     *\r\n     * @param node\r\n     */\r\n    getTextareaRef = (node) => {\r\n        this.textArea = node;\r\n    };\r\n\r\n    /**\r\n     * Send mail method\r\n     */\r\n    sendMail = () => {\r\n        let message = this.textArea.value;\r\n\r\n        if (message) {\r\n            socket.chat.emit('send mail', message);\r\n            this.setState({\r\n                emailWasSend: true,\r\n                isEmptyText: false\r\n            });\r\n        } else {\r\n            this.setState({\r\n                isEmptyText: true\r\n            });\r\n        }\r\n    };\r\n\r\n    getPageRef = (node) => {\r\n        this.pageRef = node;\r\n    };\r\n\r\n    /**\r\n     * Render component method\r\n     *\r\n     * @returns {*}\r\n     */\r\n    render() {\r\n        return (\r\n            <div className=\"page-content\" ref={this.getPageRef}>\r\n                <h2 className='page-title'>Зв'язок із Нами</h2>\r\n                {this.state.emailWasSend ? this.state.mailSendSuccess ?\r\n                    <p>Лист успішно відправлено. Дякуємо за Ваш відгук!</p> :\r\n                    this.state.mailSendError ?\r\n                        <p>При відправленні листа сталася помилка. Будь ласка, спробуйте пізніше</p> :\r\n                        <div className=\"send-mail-loader\">\r\n                            <span className=\"sending-process-message\">Надсилаємо повідомлення...</span>\r\n                            <span className=\"loader\"/>\r\n                        </div> :\r\n                    <div>\r\n                        <p className='page-description'>\r\n                            Якщо ви помітили помилки в роботі сервісу можете повідомити нам деталі, щоб ми могли швидко їх\r\n                            їх усунути. <br/> Також у цій формі можна написати свої пропозиції щодо вдосконалення сервісу.\r\n                            Ми розглянемо усі варіанти. Можливо, саме Ваша ідея стане ключовою у розвитку ресурсу =)\r\n                        </p>\r\n                        {this.state.isEmptyText ? <p className=\"error\">Повідомлення не може бути пустим</p> : false}\r\n                        <textarea className=\"mail-text\"\r\n                                  placeholder=\"Введіть повідомлення...\"\r\n                                  autoFocus={true}\r\n                                  ref={this.getTextareaRef}\r\n                        />\r\n                        <div className=\"actions buttons\">\r\n                            <button className=\"button ok-button\" onClick={this.sendMail}>Надіслати</button>\r\n                        </div>\r\n                    </div>}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default ContactUs\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nimport React, {Component} from 'react'\r\nimport socket from \"../../socket\";\r\nimport popUpActions from \"../../actions/popUpActions\";\r\nimport {connect} from \"react-redux\";\r\nimport userActions from \"../../actions/userActions\";\r\n\r\n/**\r\n * CreateNick component\r\n */\r\nclass CreateNick extends Component {\r\n    /**\r\n     * CreateNick Constructor\r\n     *\r\n     * @param props\r\n     */\r\n    constructor(props) {\r\n        super(props);\r\n        \r\n        this.state = {\r\n            saveNick: false,\r\n            isValid : true\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Change need to save nick in localStorage\r\n     */\r\n    changeSavingStatus = () => {\r\n        this.setState({\r\n            saveNick: !this.state.saveNick\r\n        })\r\n    };\r\n\r\n    /**\r\n     * Accept creating nick name\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    acceptAction = () => {\r\n        let value = this.inputRef.value,\r\n            modKey = value.match(new RegExp(/(%m%)/));\r\n\r\n        if (modKey) {\r\n            this.props.setAsModerator();\r\n            value = value.replace(modKey[0], '')\r\n        }\r\n\r\n        if (value.length > 2 && value.length < 15) {\r\n            if (this.state.saveNick) {\r\n                localStorage.setItem('nickName', value)\r\n            } else if (localStorage.getItem('nickName')) {\r\n                localStorage.removeItem('nickName')\r\n            }\r\n\r\n            socket.setNick(value);\r\n            this.setState({isValid: false});\r\n            this.props.hidePopUp();\r\n        } else {\r\n            this.setState({isValid: false});\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Chack pressed button\r\n     *\r\n     * @param e\r\n     */\r\n    checkKey = (e) => {\r\n        if(e.key === 'Enter'){\r\n            this.acceptAction();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Get input ref\r\n     *\r\n     * @param node\r\n     */\r\n    getInputRef = (node) => {\r\n        this.inputRef = node\r\n    };\r\n\r\n    /**\r\n     * Render CreateNick component\r\n     */\r\n    render() {\r\n        let additionalClassName = this.state.saveNick ? 'pop-up-additional save' : 'pop-up-additional';\r\n\r\n        if (!this.state.isValid) {\r\n            additionalClassName+= ' invalid'\r\n        }\r\n\r\n        return (\r\n            <React.Fragment>\r\n                <div className=\"pop-up-text\">Щоб написати у загальний чат, придумайте нікнейм</div>\r\n                <div className={additionalClassName}>\r\n                    <input type='text' autoFocus={true} ref={this.getInputRef} onKeyPress={this.checkKey}/>\r\n                    <label className='save-nick'>\r\n                        <input id='save_nick' type='checkbox' onChange={this.changeSavingStatus}/>\r\n                        <span>Запам'ятати цей нік</span>\r\n                    </label>\r\n                    {!this.state.isValid &&\r\n                    <p className=\"error\">Нікнейм повинен містити від 3 до 15 символів</p>}\r\n                </div>\r\n                <div className=\"pop-up-actions\">\r\n                    <button className=\"button ok-button\" onClick={this.acceptAction}>ок</button>\r\n                </div>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = () => {\r\n    return {}\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        /**\r\n         * Hide popup\r\n         */\r\n        hidePopUp: () => {\r\n            dispatch(popUpActions.hidePopUp())\r\n        },\r\n\r\n        /**\r\n         * Set user as Moderator\r\n         */\r\n        setAsModerator: () => {\r\n            localStorage.setItem('status', 'moderator');\r\n            dispatch(userActions.setAsModerator())\r\n        }\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CreateNick)\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nimport React, {useState} from 'react'\r\nimport appActions from \"../../actions/appActions\";\r\nimport popUpActions from \"../../actions/popUpActions\";\r\nimport userActions from \"../../actions/userActions\";\r\nimport {connect} from \"react-redux\";\r\n\r\n/**\r\n * LikeInterlocutor component\r\n *\r\n * @param props\r\n\r\n * @returns {*}\r\n * @constructor\r\n */\r\nconst LikeInterlocutor = (props) => {\r\n    const [isValid, setIsValid] = useState(true);\r\n\r\n    let inputRef;\r\n    /**\r\n     * Accept creating nick name\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    const acceptAction = () => {\r\n        let value = inputRef.value.toString();\r\n\r\n        if (value.length && value.length <= 15) {\r\n            let newList = {...props.likedList},\r\n                userId = props.interlocutorId;\r\n\r\n            newList[userId] = {\r\n                nick: value,\r\n                userId,\r\n                socketId: props.allUsersList[userId].socketId\r\n            };\r\n\r\n            props.changeLikedList(newList);\r\n            props.hidePopUp();\r\n        } else {\r\n            setIsValid(false);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Chack pressed button\r\n     *\r\n     * @param e\r\n     */\r\n    const checkKey = (e) => {\r\n        if(e.key === 'Enter'){\r\n            acceptAction();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Get input ref\r\n     *\r\n     * @param node\r\n     */\r\n    const getInputRef = (node) => {\r\n        inputRef = node\r\n    };\r\n\r\n    let additionalClassName = isValid ? 'pop-up-additional ' : 'pop-up-additional invalid';\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <div className=\"pop-up-text\">Введіть ім'я поточного співрозмовника під яким бажаєте зберегти\r\n                його до списку улюблених</div>\r\n            <div className={additionalClassName}>\r\n                <input type='text' autoFocus={true} ref={getInputRef} onKeyPress={checkKey}/>\r\n                {!isValid &&\r\n                <p className=\"error\">Ім'я не може бути пустим та довшим ніж 15 символів</p>}\r\n            </div>\r\n            <div className=\"pop-up-actions\">\r\n                <button className=\"button ok-button\" onClick={acceptAction}>ок</button>\r\n            </div>\r\n        </React.Fragment>\r\n    )\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        interlocutorId : state.room.interlocutorId,\r\n        allUsersList   : state.user.allUsersList,\r\n        likedList      : state.user.likedList\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        /**\r\n         * Like/dislike user\r\n         *\r\n         * @param list\r\n         */\r\n        changeLikedList: (list) => {\r\n            dispatch(userActions.changeLikedList(list))\r\n        },\r\n\r\n        /**\r\n         * Hide popup\r\n         */\r\n        hidePopUp: () => {\r\n            dispatch(popUpActions.hidePopUp())\r\n        }\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(LikeInterlocutor)\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nimport React, {Component} from 'react'\r\nimport CreateNick from './CreateNick'\r\nimport socket from '../../socket'\r\nimport {connect} from \"react-redux\"\r\nimport LikeInterlocutor from '../dumb/LikeInterlocutor'\r\nimport popUpActions from \"../../actions/popUpActions\"\r\nimport {Redirect} from 'react-router-dom'\r\n\r\n/**\r\n * PopUp component\r\n *\r\n * @param props\r\n *\r\n * @returns {*}\r\n * @constructor\r\n */\r\nclass PopUp extends Component {\r\n    /**\r\n     * PopUp Constructor\r\n     *\r\n     * @param props\r\n     */\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            title         : '',\r\n            isModal       : false,\r\n            text          : '',\r\n            customContent : null\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Component was mounted in DOM\r\n     */\r\n    componentDidMount() {\r\n        let state;\r\n\r\n        switch (this.props.type) {\r\n            case 'CREATE_NICK' :\r\n                state = {\r\n                    title         : 'Придумайте нікнейм',\r\n                    customContent : <CreateNick/>\r\n                };\r\n                break;\r\n            case 'PRIVATE_REQUEST' :\r\n                let sender = this.props.senderNick\r\n                    ? this.props.senderNick\r\n                    : 'Хтось із Ваших попередніх співрозмовників';\r\n\r\n                state = {\r\n                    title : 'Запит на приватний чат',\r\n                    text   : sender + ' пропонує перейти у приватний чат. Поточний приватний чат буде втрачено. Бажаєте перейти?',\r\n                    isModal: true\r\n                };\r\n                break;\r\n            case 'LIKE_INTERLOCUTOR' :\r\n                state = {\r\n                    title         : 'Зберегти співрозмовника',\r\n                    customContent : <LikeInterlocutor/>\r\n                };\r\n                break;\r\n            case 'PRIVATE_REQUEST_REJECTED' :\r\n                state = {\r\n                    title : 'Запит відхилено',\r\n                    text  : this.props.interlocutor + ' відмовився(-лась) переходти в приватний чат'\r\n                };\r\n                break;\r\n            case 'CAN_NOT_REFRESH' :\r\n                state = {\r\n                    title : 'Повторний пошук',\r\n                    text  : 'Неможливо розпочати новий пошук, оскільки ще триває попередній'\r\n                };\r\n                break;\r\n            case 'PRIVATE_REQUEST_ACCEPTED' :\r\n                state = {\r\n                    title : 'Запит прийнято',\r\n                    text  : 'Вас з\\'єднано з ' + this.props.interlocutor + '. Приємного спілкування!'\r\n                };\r\n                break;\r\n            case 'IMAGE_UPLOADING_ERROR' :\r\n                state = {\r\n                    title : 'Помилка завантаження',\r\n                    text  : 'На жаль, не вдалося завантажити зображення. Спробуйте, будь ласка пізніще'\r\n                };\r\n                break;\r\n            default:\r\n                state = {};\r\n        }\r\n\r\n        this.setState(state)\r\n    };\r\n\r\n    /**\r\n     * Accept modal action\r\n     */\r\n    accept = () => {\r\n        switch (this.props.type) {\r\n            case 'PRIVATE_REQUEST' :\r\n                this.acceptPrivateRequest();\r\n                break;\r\n            default:\r\n                return this.props.hidePopUp()\r\n        }\r\n\r\n        this.props.hidePopUp()\r\n    };\r\n\r\n    /**\r\n     * Reject modal action\r\n     *\r\n     * @returns {*|void|{type: string}}\r\n     */\r\n    reject = () => {\r\n        switch (this.props.type) {\r\n            case 'PRIVATE_REQUEST' :\r\n                this.rejectPrivateRequest();\r\n                break;\r\n            default:\r\n                return this.props.hidePopUp()\r\n        }\r\n\r\n        this.props.hidePopUp()\r\n    };\r\n\r\n    /**\r\n     * Accept request to private chat\r\n     *\r\n     * @returns {*}\r\n     */\r\n    acceptPrivateRequest = () => {\r\n        socket.chat.emit('accept private request', {\r\n            receiverNick : this.props.nick,\r\n            receiverId   : socket.chat.id,\r\n            senderId     : this.props.senderId,\r\n            senderNick   : this.props.senderNick,\r\n        });\r\n\r\n        if (!this.props.isInChat) {\r\n            return <Redirect to='/chat'/>\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Reject private chat request\r\n     */\r\n    rejectPrivateRequest = () => {\r\n        socket.chat.emit('reject private request', {\r\n            senderId: this.props.senderId,\r\n            receiverNick: this.props.nick\r\n        })\r\n    };\r\n\r\n    /**\r\n     * Render component\r\n     *\r\n     * @returns {*}\r\n     */\r\n    render()\r\n    {\r\n        return (\r\n            <div className='pop-up-overlay'>\r\n                <div className=\"pop-up\">\r\n                    <div className=\"pop-up-title-wrapper\">\r\n                        <span className=\"pop-up-title\" children={this.state.title}/>\r\n                        <span className=\"pop-up-close\" onClick={this.props.hidePopUp}/>\r\n                    </div>\r\n                    {this.state.customContent\r\n                        ? this.state.customContent\r\n                        : <React.Fragment>\r\n                            <div className=\"pop-up-text\" children={this.state.text}/>\r\n                            <div className=\"pop-up-actions\">\r\n                                {this.state.isModal\r\n                                    ? <React.Fragment>\r\n                                        <button className=\"button button-reject\" onClick={this.reject}>ні</button>\r\n                                        <button className=\"button button-accept\" onClick={this.accept}>так</button>\r\n                                    </React.Fragment>\r\n                                    : <button className=\"button ok-button\" onClick={this.props.hidePopUp}>ок</button>}\r\n                            </div>\r\n                        </React.Fragment>}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n/**\r\n * Add redux states to props\r\n *\r\n * @param state\r\n * @returns {{isInChat: boolean, nick: (popUpData.nick|{hasReject, additional, text, title, validation}|null), senderId: null, interlocutor: null, senderNick: null, type: *}}\r\n */\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        type         : state.popup.type,\r\n        isInChat     : state.app.isInChat,\r\n        senderNick   : state.user.senderNick,\r\n        interlocutor : state.user.interlocutorNick,\r\n        senderId     : state.user.senderId,\r\n        nick         : state.user.nick\r\n    }\r\n};\r\n\r\n/**\r\n * Add redux actions to props\r\n *\r\n * @param dispatch\r\n *\r\n * @returns {{hidePopUp: hidePopUp}}\r\n */\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        /**\r\n         * Hide popup\r\n         */\r\n        hidePopUp: () => {\r\n            dispatch(popUpActions.hidePopUp())\r\n        }\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(PopUp)\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nimport React from 'react'\r\n\r\n/**\r\n * PrivacyPolicy component\r\n *\r\n * @returns {*}\r\n * @constructor\r\n */\r\nconst PrivacyPolicy = () => {\r\n    return (\r\n        <div className=\"page-content privacy-policy\">\r\n            <h3>ПОЛІТИКА КОНФІДЕНЦІЙНОСТІ</h3>\r\n            <h4>1. Загальні положення</h4>\r\n            <p>\r\n                Цей документ описує політику конфіденційності для веб-додатку Invischat,\r\n                розміщеного за веб-адресою <a href=\"http://www.invischat.com\">http://www.invischat.com</a> (надалі – «Чат»).\r\n                У цьому документі роз’яснюється, які види інформації можуть бути зібрані\r\n                і оброблятися серверами Чату, хмарними сховищами та сторонніми сервісами,\r\n                що використовуються для коректної роботи Чату, та як може використовуватися ця інформація.\r\n            </p>\r\n            <p>\r\n                Даний документ не поширюється на веб-сайти, перехід на які здійснюється за\r\n                допомогою гіперпосилань, розміщених на сторінках Чату.\r\n            </p>\r\n\r\n            <h4>2. Автоматичний збір і обробка інформації</h4>\r\n            <p>\r\n                Для ведення аналітики відвідування та сеансів користувачів у Чаті з пристроїв\r\n                відвідувачів автоматично збирається і зберігається наступна інформація:\r\n            </p>\r\n            <ul>\r\n                <li>вид браузера та операційної системи;</li>\r\n                <li>дата і час відвідування Чату;</li>\r\n                <li>тривалість перебування на сторінках Чату;</li>\r\n                <li>регіон перебування та стать відвідувача;</li>\r\n                <li>переглянуті сторінки;</li>\r\n                <li>адреса та назва сайту або веб-додатку з якого був здійснений перехід на сторінки Чату.</li>\r\n            </ul>\r\n            <h4>3. Анонімність</h4>\r\n            <p>\r\n                Чат не зобов’язує користувачів вводити жодну особисту інформацію, яку можна вважати\r\n                конфіденційною. Усі повідовмення зберігаються виключно\r\n                у браузері на термін рівнозначний тривалості браузерної сесії.<br/>\r\n                Текстовий вміст повідомлень жодним чином не фіксується й не зберігається на серверах Чату.\r\n                Усі графічні зображення, завантажені\r\n                безпосередньо з пристрою користувача, надсилаються для тимчасового зберігання на сторонній хмарний\r\n                сервіс <a href=\"https://cloudinary.com\">cloudinary.com</a> . Через одну хвилину після завантаження\r\n                зображення, воно видаляється зі сховища і стає доступне лише у випадку, коли Чат встиг завантажити\r\n                його зі сховища за прямим посиланням до його повного видалення.\r\n                Зображення не індексуються та не відображаються у результатах пошуку пошукових систем.\r\n            </p>\r\n            <h4>4. Використання плагінів соціальних мереж</h4>\r\n            <p>\r\n                Технічне оснащення сторінок Чату включає в себе плагіни соціальної мережі facebook.com,\r\n                керування якою відбувається зі штаб-квартири компанії Facebook Inc, розташованої в США,\r\n                штат Каліфорнія, Пало Альто, Авеню Каліфорнія 94304, вул.1601 (надалі «Facebook»).\r\n            </p>\r\n            <p>\r\n                Ці плагіни можуть бути кнопками «Like» або відповідно «Мені подобається», а також «Поширити»\r\n                в мережі Facebook. Плагін передаватиме на сервер Facebook дані про те, які саме наші\r\n                веб-сторінки Ви відвідали. Якщо Ви маєте обліковий запис на Facebook і Ви зайшли у\r\n                систему під своїм аккаунтом, під час відвідування нашої веб-сторінки Facebook пов'язуватиме\r\n                цю інформацію з Вашим аккаунтом.\r\n            </p>\r\n            <p>\r\n                У разі використання будь-яких функцій плагіна (наприклад, при натисканні кнопки\r\n                «Мені подобається» чи коментуванні), ця інформація також буде синхронізована з Вашим\r\n                аккаунтом на Facebook.\r\n            </p>\r\n            <p>\r\n                Більш детальну інформацію про збір та використання даних мережею Facebook, а також\r\n                про права і можливості захисту персональних даних в даному контексті можна знайти в\r\n                розділі про захист персональних даних на сайті Facebook.\r\n            </p>\r\n            <p>\r\n                Щоб уникнути зв'язку мережі Facebook з нашими веб-сторінками та подальшого зв’язку\r\n                даної інформації з Вашим аккаунтом, Вам потрібно вийти з облікового запису Facebook\r\n                перед відвідуванням наших веб-сторінок.\r\n            </p>\r\n            <h4>5. Відповідальність сторін</h4>\r\n            <p>\r\n                Чат надає ресурси для знайомства у інтернеті лише розважального характеру. Чат не\r\n                використовує засобів цензури для фільтрації текстового та графічного контенту відправленого\r\n                випадковим співрозмовником у Чаті, тому забороняється використання ресурсу дітьми,\r\n                що не досягли шістнадцятирічного віку. Відповідальність за вміст повідомлень несе виключно відправник.\r\n            </p>\r\n            <h4>6. Зміна ПОЛІТИКИ КОНФІДЕНЦІЙНОСТІ</h4>\r\n            <p>\r\n                Перебуваючи на сторінках Чату Ви автоматично погоджуєтеся з умовами конфіденційності,\r\n                передбаченими у даному документі та підтверджуєте, що погоджуєтеся з\r\n                тим, що дана ПОЛІТИКА КОНФІДЕНЦІЙНОСТІ може час від часу змінюватися. Зміни, що вносяться до ПОЛІТИКИ\r\n                КОНФІДЕНЦІЙНОСТІ, публікуються у Чаті.\r\n            </p>\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default PrivacyPolicy\r\n","/**\r\n * @author Yuriy Matviyuk\r\n */\r\nimport Aside from './dumb/Aside'\r\nimport Chat from './dumb/Chat'\r\nimport Footer from './dumb/Footer'\r\nimport Header from './dumb/Header'\r\nimport Home from './dumb/Home'\r\nimport Nav from './dumb/Nav'\r\nimport ContactUs from './smart/ContactUs'\r\nimport PopUp from './smart/PopUp';\r\nimport PrivacyPolicy from './dumb/PrivacyPolicy'\r\nimport React, {Component} from 'react'\r\nimport {connect} from 'react-redux'\r\nimport {Switch, Route, withRouter} from 'react-router-dom'\r\nimport socket from \"../socket\"\r\nimport appActions from \"../actions/appActions\"\r\nimport userActions from \"../actions/userActions\";\r\nimport popUpActions from \"../actions/popUpActions\";\r\nimport roomActions from \"../actions/roomActions\";\r\nimport messageActions from \"../actions/messageActions\";\r\n\r\n/**\r\n * App component\r\n */\r\nclass App extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            mobileBreakpoint: 768\r\n        };\r\n    }\r\n\r\n    /**\r\n     * ComponentDidMount\r\n     */\r\n    componentDidMount() {\r\n        if (localStorage.getItem('block')) {\r\n            this.props.setBanStatus(true)\r\n        }\r\n\r\n        if (localStorage.getItem('not_admin')) {\r\n            this.props.setAsNoAdmin()\r\n        }\r\n\r\n        this.detectDeviceType();\r\n        this.setTheme();\r\n\r\n        socket.subscribeUsersCount();\r\n\r\n        socket.chat.off('get private request').on('get private request', (data) => {\r\n            this.props.setPrivateRequestData({\r\n                senderNick: data.senderNick,\r\n                senderId: data.senderId\r\n            });\r\n\r\n            this.props.showPopUp('PRIVATE_REQUEST')\r\n        });\r\n\r\n        socket.chat.off('private request accepted').on('private request accepted', (data) => {\r\n            let interlocutor = data.interlocutor ? data.interlocutor : 'Загубленим співрозмовником';\r\n            socket.leaveRoom();\r\n\r\n            setTimeout(() => {\r\n                socket.chat.emit('join room', data.roomName);\r\n                this.props.joinRoom(data.roomName);\r\n                this.props.setIsFull(true);\r\n\r\n                if (this.props.isMobile && this.props.chatPosition !== 0) {\r\n                    this.props.switchToPrivate();\r\n                }\r\n\r\n                this.props.setInterlocutorNick(interlocutor);\r\n                this.props.showPopUp('PRIVATE_REQUEST_ACCEPTED');\r\n            }, 1)\r\n        });\r\n\r\n        socket.chat.off('private request rejected').on('private request rejected', (receiverNick) => {\r\n            this.props.setInterlocutorNick(receiverNick);\r\n            this.props.showPopUp('PRIVATE_REQUEST_REJECTED')\r\n        });\r\n\r\n        socket.chat.off('like').on('like', (isLiked) => {\r\n            this.props.setLikesCount(isLiked ? this.props.likesCount + 1 : this.props.likesCount - 1)\r\n        });\r\n\r\n        socket.chat.off('block').on('block', () => {\r\n            this.props.setBanStatus()\r\n        });\r\n\r\n        window.onunload = () => {\r\n            !this.props.ssr && socket.chat.emit('all users update', {id: this.props.userId, isRemove: true});\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Check is need to change default theme\r\n     */\r\n    setTheme = () => {\r\n        if (localStorage.getItem('theme') === 'dark') {\r\n            this.props.setTheme('dark')\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Detect device viewport width and subscribe to it changes\r\n     */\r\n    detectDeviceType = () => {\r\n        this.props.setDeviceType(window.innerWidth < this.state.mobileBreakpoint);\r\n\r\n        window.addEventListener(\"resize\", () => {\r\n            this.props.setDeviceType(window.innerWidth < this.state.mobileBreakpoint)\r\n        }, null);\r\n    };\r\n\r\n    /**\r\n   * Render App component\r\n   *\r\n   * @returns {*}\r\n   */\r\n    render() {\r\n        let wrapperClassName = this.props.theme === 'dark' ? 'page-wrapper dark' : 'page-wrapper';\r\n\r\n        return (\r\n            <div className={wrapperClassName}>\r\n                <Header/>\r\n                <div className='page-main-wrapper'>\r\n                    <Aside/>\r\n                    <Nav/>\r\n                    <main className={this.props.isNavActive ? 'nav-active' : ''}>\r\n                        <Switch>\r\n                            <Route path=\"/chat\" render={() => (<Chat ssr={this.props.ssr}/>)}/>\r\n                            <Route path=\"/privacy_policy\" component={PrivacyPolicy}/>\r\n                            <Route path=\"/contact_us\" component={ContactUs}/>\r\n                            <Route path=\"/\" render={() => (<Home ssr={this.props.ssr}/>)}/>\r\n                        </Switch>\r\n                    </main>\r\n                </div>\r\n                <Footer/>\r\n                {this.props.isPopUpShow && <PopUp/>}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        isNavActive : state.app.isNavActive,\r\n        theme       : state.app.theme,\r\n        likesCount  : state.user.likesCount,\r\n        userId      : state.user.userId,\r\n        isMobile    : state.app.isMobile,\r\n        chatPosition: state.app.chatPosition,\r\n        isPopUpShow : state.popup.isPopUpShow\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        /**\r\n         * Change online users count\r\n         *\r\n         * @param count\r\n         */\r\n        changeOnlineCount: (count) => {\r\n            dispatch(appActions.changeOnlineCount(count))\r\n        },\r\n\r\n        /**\r\n         * Change design theme\r\n         *\r\n         * @param theme\r\n         */\r\n        setTheme: (theme) => {\r\n            dispatch(appActions.setTheme(theme))\r\n        },\r\n\r\n        /**\r\n         * Set likes count\r\n         *\r\n         * @param qty\r\n         */\r\n        setLikesCount: (qty) => {\r\n            dispatch(userActions.setLikesCount(qty))\r\n        },\r\n\r\n        /**\r\n         * Join private room\r\n         *\r\n         * @param room\r\n         */\r\n        joinRoom: (room) => {\r\n            dispatch(roomActions.joinRoom(room))\r\n        },\r\n\r\n        /**\r\n         * Set current interlocutor nick\r\n         *\r\n         * @param nick\r\n         */\r\n        setInterlocutorNick: (nick) => {\r\n            dispatch(userActions.setInterlocutorNick(nick))\r\n        },\r\n\r\n        /**\r\n         * Show popup\r\n         *\r\n         * @param type\r\n         */\r\n        showPopUp: (type) => {\r\n            dispatch(popUpActions.showPopUp(type))\r\n        },\r\n\r\n        /**\r\n         * Set sender request data\r\n         *\r\n         * @param data\r\n         */\r\n        setPrivateRequestData: (data) => {\r\n            dispatch(userActions.setPrivateRequestData(data))\r\n        },\r\n\r\n        /**\r\n         * Set device type\r\n         *\r\n         * @param isMobile\r\n         */\r\n        setDeviceType: (isMobile) => {\r\n            dispatch(appActions.setDeviceType(isMobile))\r\n        },\r\n\r\n        /**\r\n         * Switch to private window\r\n         */\r\n        switchToPrivate: () => {\r\n            dispatch(appActions.setChatPosition());\r\n            dispatch(messageActions.setNewMessagesQty(0))\r\n        },\r\n\r\n        setBanStatus: (isBlockForce = false) => {\r\n            dispatch(userActions.setBanStatus(isBlockForce))\r\n        },\r\n\r\n        setAsNoAdmin: () => {\r\n            dispatch(userActions.setAsNoAdmin())\r\n        },\r\n\r\n        /**\r\n         * Set set room is full\r\n         *\r\n         * @param isFull\r\n         */\r\n        setIsFull: (isFull) => {\r\n            dispatch(roomActions.setIsFull(isFull))\r\n        }\r\n    }\r\n};\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(App))\r\n","/**\n * @author Yuriy Matviyuk\n */\nimport './index.css'\nimport * as serviceWorker from './serviceWorker'\nimport App from './components/App'\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport store from './store'\nimport {BrowserRouter} from 'react-router-dom'\nimport {Provider} from 'react-redux'\n\nReactDOM.hydrate((\n    <BrowserRouter>\n        <Provider store={store}>\n            <App/>\n        </Provider>\n    </BrowserRouter>\n), document.getElementById('root'));\nserviceWorker.register();\n\n","module.exports = \"data:image/jpeg;base64,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\""],"sourceRoot":""}